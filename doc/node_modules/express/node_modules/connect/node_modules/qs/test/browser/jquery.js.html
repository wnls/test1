<!DOCTYPE html>
<html>
<head>
  <title>jquery.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../../../../doc-style.css" />
  <script src="../../../../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../../../../", thisFile = "node_modules/express/node_modules/connect/node_modules/qs/test/browser/jquery.js", defaultSidebar = true;
  </script>
  <script src="../../../../../../../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
      <div class="heading h1">
        <a href="#7653---8125---8152--local-protocol-detection">7653, #8125, #8152: local protocol detection</a>
      </div>
      <div class="heading h1">
        <a href="#8138--ie-may-throw-an-exception-when-accessing">8138, IE may throw an exception when accessing</a>
      </div>
      <div class="heading h1">
        <a href="#4825--get-the-actual-response-in-case">4825: Get the actual response in case</a>
      </div>
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>jquery.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>!
jQuery JavaScript Library v1.6.2
<a href='http://jquery.com/'>http://jquery.com/</a></p>
  </div>
  <div class="body"><p>Copyright 2011, John Resig
Dual licensed under the MIT or GPL Version 2 licenses.
<a href='http://jquery.org/license'>http://jquery.org/license</a></p>

<p>Includes Sizzle.js
<a href='http://sizzlejs.com/'>http://sizzlejs.com/</a>
Copyright 2011, The Dojo Foundation
Released under the MIT, BSD, and GPL Licenses.</p>

<p>Date: Thu Jun 30 14:16:56 2011 -0400</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nb">window</span><span class="p">,</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2">&#182;</a>
</div>
<p>Use the correct document accordingly with window argument (sandbox)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">var</span> <span class="nb">document</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nb">document</span><span class="p">,</span>
  <span class="nx">navigator</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">,</span>
  <span class="nx">location</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">jQuery</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3">&#182;</a>
</div>
<p>Define a local copy of jQuery</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">var</span> <span class="nx">jQuery</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4">&#182;</a>
</div>
<p>The jQuery object is actually just the init constructor 'enhanced'</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">rootjQuery</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5">&#182;</a>
</div>
<p>Map over jQuery in case of overwrite</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">_jQuery</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6">&#182;</a>
</div>
<p>Map over the $ in case of overwrite</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">_$</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">$</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7">&#182;</a>
</div>
<p>A central reference to the root jQuery(document)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rootjQuery</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8">&#182;</a>
</div>
<p>A simple way to check for HTML strings or ID strings
(both of which we optimize for)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">quickExpr</span> <span class="o">=</span> <span class="sr">/^(?:[^&lt;]*(&lt;[\w\W]+&gt;)[^&gt;]*$|#([\w\-]*)$)/</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9">&#182;</a>
</div>
<p>Check if a string has a non-whitespace character in it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rnotwhite</span> <span class="o">=</span> <span class="sr">/\S/</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10">&#182;</a>
</div>
<p>Used for trimming whitespace</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">trimLeft</span> <span class="o">=</span> <span class="sr">/^\s+/</span><span class="p">,</span>
  <span class="nx">trimRight</span> <span class="o">=</span> <span class="sr">/\s+$/</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11">&#182;</a>
</div>
<p>Check for digits</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rdigit</span> <span class="o">=</span> <span class="sr">/\d/</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12">&#182;</a>
</div>
<p>Match a standalone tag</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rsingleTag</span> <span class="o">=</span> <span class="sr">/^&lt;(\w+)\s*\/?&gt;(?:&lt;\/\1&gt;)?$/</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13">&#182;</a>
</div>
<p>JSON RegExp</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rvalidchars</span> <span class="o">=</span> <span class="sr">/^[\],:{}\s]*$/</span><span class="p">,</span>
  <span class="nx">rvalidescape</span> <span class="o">=</span> <span class="sr">/\\(?:[&quot;\\\/bfnrt]|u[0-9a-fA-F]{4})/g</span><span class="p">,</span>
  <span class="nx">rvalidtokens</span> <span class="o">=</span> <span class="sr">/&quot;[^&quot;\\\n\r]*&quot;|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g</span><span class="p">,</span>
  <span class="nx">rvalidbraces</span> <span class="o">=</span> <span class="sr">/(?:^|:|,)(?:\s*\[)+/g</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14">&#182;</a>
</div>
<p>Useragent RegExp</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rwebkit</span> <span class="o">=</span> <span class="sr">/(webkit)[ \/]([\w.]+)/</span><span class="p">,</span>
  <span class="nx">ropera</span> <span class="o">=</span> <span class="sr">/(opera)(?:.*version)?[ \/]([\w.]+)/</span><span class="p">,</span>
  <span class="nx">rmsie</span> <span class="o">=</span> <span class="sr">/(msie) ([\w.]+)/</span><span class="p">,</span>
  <span class="nx">rmozilla</span> <span class="o">=</span> <span class="sr">/(mozilla)(?:.*? rv:([\w.]+))?/</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15">&#182;</a>
</div>
<p>Matches dashed string for camelizing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rdashAlpha</span> <span class="o">=</span> <span class="sr">/-([a-z])/ig</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16">&#182;</a>
</div>
<p>Used by jQuery.camelCase as callback to replace()</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">fcamelCase</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">all</span><span class="p">,</span> <span class="nx">letter</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">letter</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17">&#182;</a>
</div>
<p>Keep a UserAgent string for use with jQuery.browser</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">userAgent</span> <span class="o">=</span> <span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18">&#182;</a>
</div>
<p>For matching the engine and version of the browser</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">browserMatch</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19">&#182;</a>
</div>
<p>The deferred used on DOM ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">readyList</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20">&#182;</a>
</div>
<p>The ready event handler</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">DOMContentLoaded</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21">&#182;</a>
</div>
<p>Save a reference to some core methods</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">toString</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">,</span>
  <span class="nx">hasOwn</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">,</span>
  <span class="nx">push</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">push</span><span class="p">,</span>
  <span class="nx">slice</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">,</span>
  <span class="nx">trim</span> <span class="o">=</span> <span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">trim</span><span class="p">,</span>
  <span class="nx">indexOf</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22">&#182;</a>
</div>
<p>[[Class]] -> type pairs</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">class2type</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">constructor</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">,</span>
  <span class="nx">init</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">rootjQuery</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">doc</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23">&#182;</a>
</div>
<p>Handle $(""), $(null), or $(undefined)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24">&#182;</a>
</div>
<p>Handle $(DOMElement)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25">&#182;</a>
</div>
<p>The body element only exists once, optimize finding it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;body&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="nb">document</span><span class="p">;</span>
      <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26">&#182;</a>
</div>
<p>Handle HTML strings</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27">&#182;</a>
</div>
<p>Are we dealing with HTML string or an ID?</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&gt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28">&#182;</a>
</div>
<p>Assume that strings that start and end with &lt;> are HTML and skip the regex check</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">match</span> <span class="o">=</span> <span class="p">[</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">null</span> <span class="p">];</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">match</span> <span class="o">=</span> <span class="nx">quickExpr</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29">&#182;</a>
</div>
<p>Verify a match, and that no context was specified for #id</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="o">!</span><span class="nx">context</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30">&#182;</a>
</div>
<p>HANDLE: $(html) -> $(array)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span> <span class="k">instanceof</span> <span class="nx">jQuery</span> <span class="o">?</span> <span class="nx">context</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">context</span><span class="p">;</span>
          <span class="nx">doc</span> <span class="o">=</span> <span class="p">(</span><span class="nx">context</span> <span class="o">?</span> <span class="nx">context</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">context</span> <span class="o">:</span> <span class="nb">document</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31">&#182;</a>
</div>
<p>If a single string is passed in and it's a single tag
just do a createElement and skip the rest</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">ret</span> <span class="o">=</span> <span class="nx">rsingleTag</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">selector</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">];</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">attr</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">selector</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">];</span>
            <span class="p">}</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">buildFragment</span><span class="p">(</span> <span class="p">[</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">doc</span> <span class="p">]</span> <span class="p">);</span>
            <span class="nx">selector</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ret</span><span class="p">.</span><span class="nx">cacheable</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="nx">ret</span><span class="p">.</span><span class="nx">fragment</span><span class="p">)</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">fragment</span><span class="p">).</span><span class="nx">childNodes</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32">&#182;</a>
</div>
<p>HANDLE: $("#id")</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">elem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33">&#182;</a>
</div>
<p>Check parentNode to catch when Blackberry 4.6 returns
nodes that are no longer in the document #6963</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34">&#182;</a>
</div>
<p>Handle the case where IE and Opera return items
by name instead of ID</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">id</span> <span class="o">!==</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">rootjQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
            <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35">&#182;</a>
</div>
<p>Otherwise, we inject the element directly into the jQuery object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="nb">document</span><span class="p">;</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36">&#182;</a>
</div>
<p>HANDLE: $(expr, $(...))</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">context</span> <span class="o">||</span> <span class="nx">context</span><span class="p">.</span><span class="nx">jquery</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">context</span> <span class="o">||</span> <span class="nx">rootjQuery</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37">&#182;</a>
</div>
<p>HANDLE: $(expr, context)
(which is just equivalent to: $(context).find(expr)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">(</span> <span class="nx">context</span> <span class="p">).</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38">&#182;</a>
</div>
<p>HANDLE: $(function)
Shortcut for document ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">rootjQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">selector</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">selector</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39">&#182;</a>
</div>
<p>Start with an empty selector</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">selector</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40">&#182;</a>
</div>
<p>The current version of jQuery being used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jquery</span><span class="o">:</span> <span class="s2">&quot;1.6.2&quot;</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41">&#182;</a>
</div>
<p>The default length of a jQuery object is 0</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">length</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42">&#182;</a>
</div>
<p>The number of elements contained in the matched element set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">size</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">toArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43">&#182;</a>
</div>
<p>Get the Nth element in the matched element set OR
Get the whole matched element set as a clean array</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">num</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">num</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44">&#182;</a>
</div>
<p>Return a 'clean' array</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">this</span><span class="p">.</span><span class="nx">toArray</span><span class="p">()</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45">&#182;</a>
</div>
<p>Return just the object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">(</span> <span class="nx">num</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="k">this</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="nx">num</span> <span class="p">]</span> <span class="o">:</span> <span class="k">this</span><span class="p">[</span> <span class="nx">num</span> <span class="p">]</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46">&#182;</a>
</div>
<p>Take an array of elements and push it onto the stack
(returning the new matched element set)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">pushStack</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47">&#182;</a>
</div>
<p>Build a new jQuery matched element set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">elems</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">elems</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48">&#182;</a>
</div>
<p>Add the old object onto the stack (as a reference)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">ret</span><span class="p">.</span><span class="nx">prevObject</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="nx">ret</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;find&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">selector</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">+</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">?</span> <span class="s2">&quot; &quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">selector</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">selector</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49">&#182;</a>
</div>
<p>Return the newly-formed element set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50">&#182;</a>
</div>
<p>Execute a callback for every element in the matched set.
(You can seed the arguments with an array of args, but this is
only used internally.)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">each</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">ready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51">&#182;</a>
</div>
<p>Attach the listeners</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">bindReady</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52">&#182;</a>
</div>
<p>Add the callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">readyList</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">eq</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">i</span> <span class="o">===</span> <span class="o">-</span><span class="mi">1</span> <span class="o">?</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="o">+</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">first</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">last</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">eq</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">slice</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">),</span>
      <span class="s2">&quot;slice&quot;</span><span class="p">,</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">map</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}));</span>
  <span class="p">},</span>

  <span class="nx">end</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">prevObject</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">constructor</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53">&#182;</a>
</div>
<p>For internal use only.
Behaves like an Array's method, not like a jQuery method.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">push</span><span class="o">:</span> <span class="nx">push</span><span class="p">,</span>
  <span class="nx">sort</span><span class="o">:</span> <span class="p">[].</span><span class="nx">sort</span><span class="p">,</span>
  <span class="nx">splice</span><span class="o">:</span> <span class="p">[].</span><span class="nx">splice</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54">&#182;</a>
</div>
<p>Give the init function the jQuery prototype for later instantiation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">copy</span><span class="p">,</span> <span class="nx">copyIsArray</span><span class="p">,</span> <span class="nx">clone</span><span class="p">,</span>
    <span class="nx">target</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="p">{},</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">length</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nx">deep</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55">&#182;</a>
</div>
<p>Handle a deep copy situation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">target</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">deep</span> <span class="o">=</span> <span class="nx">target</span><span class="p">;</span>
    <span class="nx">target</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56">&#182;</a>
</div>
<p>skip the boolean and the target</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57">&#182;</a>
</div>
<p>Handle case when target is a string or something (possible in deep copy)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">target</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">target</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58">&#182;</a>
</div>
<p>extend jQuery itself if only one argument is passed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">length</span> <span class="o">===</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">target</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="o">--</span><span class="nx">i</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59">&#182;</a>
</div>
<p>Only deal with non-null/undefined values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span> <span class="nx">i</span> <span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60">&#182;</a>
</div>
<p>Extend the base object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">src</span> <span class="o">=</span> <span class="nx">target</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
        <span class="nx">copy</span> <span class="o">=</span> <span class="nx">options</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61">&#182;</a>
</div>
<p>Prevent never-ending loop</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">target</span> <span class="o">===</span> <span class="nx">copy</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62">&#182;</a>
</div>
<p>Recurse if we're merging plain objects or arrays</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">deep</span> <span class="o">&amp;&amp;</span> <span class="nx">copy</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">copy</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">copyIsArray</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">copy</span><span class="p">))</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">copyIsArray</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">copyIsArray</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">clone</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="o">?</span> <span class="nx">src</span> <span class="o">:</span> <span class="p">[];</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">clone</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span><span class="nx">src</span><span class="p">)</span> <span class="o">?</span> <span class="nx">src</span> <span class="o">:</span> <span class="p">{};</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63">&#182;</a>
</div>
<p>Never move original objects, clone them</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">target</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">deep</span><span class="p">,</span> <span class="nx">clone</span><span class="p">,</span> <span class="nx">copy</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64">&#182;</a>
</div>
<p>Don't bring in undefined values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">copy</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">target</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">copy</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65">&#182;</a>
</div>
<p>Return the modified object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">noConflict</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">deep</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">===</span> <span class="nx">jQuery</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nx">_$</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">deep</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">===</span> <span class="nx">jQuery</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="nx">_jQuery</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66">&#182;</a>
</div>
<p>Is the DOM ready to be used? Set to true once it occurs.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">isReady</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67">&#182;</a>
</div>
<p>A counter to track how many items to wait for before
the ready event fires. See #6781</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">readyWait</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68">&#182;</a>
</div>
<p>Hold (or release) the ready event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">holdReady</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">hold</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">hold</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">readyWait</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69">&#182;</a>
</div>
<p>Handle when the DOM is ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ready</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">wait</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70">&#182;</a>
</div>
<p>Either a released hold or an DOMready/load event and not yet ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">wait</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="o">!--</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">readyWait</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">wait</span> <span class="o">!==</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isReady</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71">&#182;</a>
</div>
<p>Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72">&#182;</a>
</div>
<p>Remember that the DOM is ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isReady</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73">&#182;</a>
</div>
<p>If a normal DOM Ready event fired, decrement, and wait if need be</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">wait</span> <span class="o">!==</span> <span class="kc">true</span> <span class="o">&amp;&amp;</span> <span class="o">--</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">readyWait</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74">&#182;</a>
</div>
<p>If there are functions bound, to execute</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">readyList</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nb">document</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jQuery</span> <span class="p">]</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75">&#182;</a>
</div>
<p>Trigger any bound ready events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">trigger</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nb">document</span> <span class="p">).</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ready&quot;</span> <span class="p">).</span><span class="nx">unbind</span><span class="p">(</span> <span class="s2">&quot;ready&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">bindReady</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">readyList</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">readyList</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_Deferred</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76">&#182;</a>
</div>
<p>Catch cases where $(document).ready() is called after the
browser event has already occurred.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="s2">&quot;complete&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77">&#182;</a>
</div>
<p>Handle it asynchronously to allow scripts the opportunity to delay ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78">&#182;</a>
</div>
<p>Mozilla, Opera and webkit nightlies currently support this event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79">&#182;</a>
</div>
<p>Use the handy event callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span> <span class="nx">DOMContentLoaded</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80">&#182;</a>
</div>
<p>A fallback to window.onload, that will always work</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81">&#182;</a>
</div>
<p>If IE event model is used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82">&#182;</a>
</div>
<p>ensure firing before onload,
maybe late but safe also for iframes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nb">document</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;onreadystatechange&quot;</span><span class="p">,</span> <span class="nx">DOMContentLoaded</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83">&#182;</a>
</div>
<p>A fallback to window.onload, that will always work</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nb">window</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;onload&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84">&#182;</a>
</div>
<p>If IE and not a frame
continually check to see if the document is ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">toplevel</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">toplevel</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">frameElement</span> <span class="o">==</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">doScroll</span> <span class="o">&amp;&amp;</span> <span class="nx">toplevel</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">doScrollCheck</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-85" id="section-85">&#182;</a>
</div>
<p>See test/unit/core.js for details concerning isFunction.
Since version 1.3, DOM methods and functions like alert
aren't supported. They return false on IE (#2968).</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">isFunction</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">isArray</span><span class="o">:</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;array&quot;</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86">&#182;</a>
</div>
<p>A crude way of determining if an object is a window</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">isWindow</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">obj</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">obj</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;setInterval&quot;</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nb">isNaN</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">obj</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rdigit</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="o">||</span> <span class="nb">isNaN</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">type</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">obj</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
      <span class="nb">String</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="o">:</span>
      <span class="nx">class2type</span><span class="p">[</span> <span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;object&quot;</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">isPlainObject</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-87" id="section-87">&#182;</a>
</div>
<p>Must be an Object.
Because of IE, we also have to check the presence of the constructor property.
Make sure that DOM nodes and window objects don't pass through, as well</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">obj</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="o">||</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88">&#182;</a>
</div>
<p>Not own constructor property must be Object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">&amp;&amp;</span>
      <span class="o">!</span><span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="s2">&quot;constructor&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
      <span class="o">!</span><span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="s2">&quot;isPrototypeOf&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89">&#182;</a>
</div>
<p>Own properties are enumerated firstly, so to speed up,
if last one is own, then all properties are own.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="kd">var</span> <span class="nx">key</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{}</span>

    <span class="k">return</span> <span class="nx">key</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">hasOwn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">key</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">isEmptyObject</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">msg</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="nx">msg</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">parseJSON</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">data</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90">&#182;</a>
</div>
<p>Make sure leading/trailing whitespace is removed (IE can't handle it)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91">&#182;</a>
</div>
<p>Attempt to parse using the native JSON parser first</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">JSON</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">.</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">window</span><span class="p">.</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92">&#182;</a>
</div>
<p>Make sure the incoming data is actual JSON
Logic borrowed from <a href='http://json.org/json2.js'>http://json.org/json2.js</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">rvalidchars</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rvalidescape</span><span class="p">,</span> <span class="s2">&quot;@&quot;</span> <span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rvalidtokens</span><span class="p">,</span> <span class="s2">&quot;]&quot;</span> <span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rvalidbraces</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

      <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Function</span><span class="p">(</span> <span class="s2">&quot;return &quot;</span> <span class="o">+</span> <span class="nx">data</span> <span class="p">))();</span>

    <span class="p">}</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;Invalid JSON: &quot;</span> <span class="o">+</span> <span class="nx">data</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-93" id="section-93">&#182;</a>
</div>
<p>Cross-browser xml parsing
(xml &amp; tmp used internally)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">parseXML</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">,</span> <span class="nx">xml</span> <span class="p">,</span> <span class="nx">tmp</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">DOMParser</span> <span class="p">)</span> <span class="p">{</span> <span class="c1">// Standard</span>
      <span class="nx">tmp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DOMParser</span><span class="p">();</span>
      <span class="nx">xml</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">parseFromString</span><span class="p">(</span> <span class="nx">data</span> <span class="p">,</span> <span class="s2">&quot;text/xml&quot;</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// IE</span>
      <span class="nx">xml</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ActiveXObject</span><span class="p">(</span> <span class="s2">&quot;Microsoft.XMLDOM&quot;</span> <span class="p">);</span>
      <span class="nx">xml</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="s2">&quot;false&quot;</span><span class="p">;</span>
      <span class="nx">xml</span><span class="p">.</span><span class="nx">loadXML</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">xml</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span> <span class="nx">tmp</span> <span class="o">||</span> <span class="o">!</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">||</span> <span class="nx">tmp</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;parsererror&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;Invalid XML: &quot;</span> <span class="o">+</span> <span class="nx">data</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">xml</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">noop</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-94" id="section-94">&#182;</a>
</div>
<p>Evaluates a script in a global context
Workarounds based on findings by Jim Driscoll
<a href='http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context'>http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">globalEval</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">rnotwhite</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95">&#182;</a>
</div>
<p>We use execScript on Internet Explorer
We use an anonymous function so that context is window
rather than jQuery in Firefox</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">(</span> <span class="nb">window</span><span class="p">.</span><span class="nx">execScript</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">[</span> <span class="s2">&quot;eval&quot;</span> <span class="p">].</span><span class="nx">call</span><span class="p">(</span> <span class="nb">window</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span> <span class="p">)(</span> <span class="nx">data</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96">&#182;</a>
</div>
<p>Converts a dashed string to camelCased string;
Used by both the css and data modules</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">camelCase</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">string</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rdashAlpha</span><span class="p">,</span> <span class="nx">fcamelCase</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">nodeName</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97">&#182;</a>
</div>
<p>args is for internal usage only</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">each</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">object</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">length</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">isObj</span> <span class="o">=</span> <span class="nx">length</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">object</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isObj</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">object</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span> <span class="nx">args</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">],</span> <span class="nx">args</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98">&#182;</a>
</div>
<p>A special, fast, case for the most common use of each</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isObj</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">object</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">object</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">]</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">object</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99">&#182;</a>
</div>
<p>Use native String.trim function wherever possible</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">trim</span><span class="o">:</span> <span class="nx">trim</span> <span class="o">?</span>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="s2">&quot;&quot;</span> <span class="o">:</span>
        <span class="nx">trim</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">text</span> <span class="p">);</span>
    <span class="p">}</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100">&#182;</a>
</div>
<p>Otherwise use our own trimming functionality</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">text</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="s2">&quot;&quot;</span> <span class="o">:</span>
        <span class="nx">text</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">trimLeft</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">trimRight</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
    <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101">&#182;</a>
</div>
<p>results is for internal usage only</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">makeArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">array</span><span class="p">,</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">results</span> <span class="o">||</span> <span class="p">[];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">array</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102">&#182;</a>
</div>
<p>The window, strings (and functions) also have 'length'
The extra typeof function check is to prevent crashes
in Safari 2 (See: #3039)
Tweaked logic slightly to handle Blackberry 4.7 RegExp issues #6930</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span> <span class="nx">array</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;regexp&quot;</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">array</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">push</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">inArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">array</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">indexOf</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">indexOf</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">array</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">array</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">merge</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">second</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">first</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">second</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">second</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">first</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">second</span><span class="p">[</span> <span class="nx">j</span> <span class="p">];</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">second</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">first</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">second</span><span class="p">[</span> <span class="nx">j</span><span class="o">++</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">first</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">first</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">grep</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">inv</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">retVal</span><span class="p">;</span>
    <span class="nx">inv</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">inv</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103">&#182;</a>
</div>
<p>Go through the array, only saving the items
that pass the validator function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">retVal</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">callback</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">inv</span> <span class="o">!==</span> <span class="nx">retVal</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-104" id="section-104">&#182;</a>
</div>
<p>arg is for internal usage only</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">map</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">arg</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">length</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-105" id="section-105">&#182;</a>
</div>
<p>jquery objects are treated as arrays</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">isArray</span> <span class="o">=</span> <span class="nx">elems</span> <span class="k">instanceof</span> <span class="nx">jQuery</span> <span class="o">||</span> <span class="nx">length</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">length</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">elems</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">length</span> <span class="o">-</span><span class="mi">1</span> <span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">)</span> <span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-106" id="section-106">&#182;</a>
</div>
<p>Go through the array, translating each of the items to their</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">isArray</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">arg</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">[</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">length</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-107" id="section-107">&#182;</a>
</div>
<p>Go through every key on the object,</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span> <span class="nx">key</span> <span class="p">],</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">arg</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">[</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">length</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-108" id="section-108">&#182;</a>
</div>
<p>Flatten any nested arrays</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">concat</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="p">[],</span> <span class="nx">ret</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-109" id="section-109">&#182;</a>
</div>
<p>A global GUID counter for objects</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">guid</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-110" id="section-110">&#182;</a>
</div>
<p>Bind a function to a context, optionally partially applying any
arguments.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">proxy</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">[</span> <span class="nx">context</span> <span class="p">];</span>
      <span class="nx">context</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-111" id="section-111">&#182;</a>
</div>
<p>Quick check to determine if target is callable, in the spec
this throws a TypeError, but we will just return undefined.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-112" id="section-112">&#182;</a>
</div>
<p>Simulated bind</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">2</span> <span class="p">),</span>
      <span class="nx">proxy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-113" id="section-113">&#182;</a>
</div>
<p>Set the guid of unique handler to the same of original handler, so it can be removed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">proxy</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="nx">proxy</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">proxy</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-114" id="section-114">&#182;</a>
</div>
<p>Mutifunctional method to get and set values to a collection
The value/s can optionally be executed if it's a function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">access</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">exec</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">pass</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-115" id="section-115">&#182;</a>
</div>
<p>Setting many attributes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">key</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">k</span> <span class="k">in</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">access</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">key</span><span class="p">[</span><span class="nx">k</span><span class="p">],</span> <span class="nx">exec</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">elems</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-116" id="section-116">&#182;</a>
</div>
<p>Setting one attribute</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-117" id="section-117">&#182;</a>
</div>
<p>Optionally, function values get executed if exec is true</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">exec</span> <span class="o">=</span> <span class="o">!</span><span class="nx">pass</span> <span class="o">&amp;&amp;</span> <span class="nx">exec</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>

      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">fn</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">exec</span> <span class="o">?</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">fn</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">pass</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">elems</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-118" id="section-118">&#182;</a>
</div>
<p>Getting an attribute</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">length</span> <span class="o">?</span> <span class="nx">fn</span><span class="p">(</span> <span class="nx">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">key</span> <span class="p">)</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">now</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">getTime</span><span class="p">();</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-119" id="section-119">&#182;</a>
</div>
<p>Use of jQuery.browser is frowned upon.
More details: <a href='http://docs.jquery.com/Utilities/jQuery.browser'>http://docs.jquery.com/Utilities/jQuery.browser</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">uaMatch</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">ua</span> <span class="o">=</span> <span class="nx">ua</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="nx">rwebkit</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="o">||</span>
      <span class="nx">ropera</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="o">||</span>
      <span class="nx">rmsie</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="o">||</span>
      <span class="nx">ua</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;compatible&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">rmozilla</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ua</span> <span class="p">)</span> <span class="o">||</span>
      <span class="p">[];</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nx">browser</span><span class="o">:</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">version</span><span class="o">:</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;0&quot;</span> <span class="p">};</span>
  <span class="p">},</span>

  <span class="nx">sub</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">jQuerySub</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">jQuerySub</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">jQuerySub</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
    <span class="nx">jQuerySub</span><span class="p">.</span><span class="nx">superclass</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
    <span class="nx">jQuerySub</span><span class="p">.</span><span class="nx">fn</span> <span class="o">=</span> <span class="nx">jQuerySub</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">this</span><span class="p">();</span>
    <span class="nx">jQuerySub</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">jQuerySub</span><span class="p">;</span>
    <span class="nx">jQuerySub</span><span class="p">.</span><span class="nx">sub</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">sub</span><span class="p">;</span>
    <span class="nx">jQuerySub</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">init</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span> <span class="k">instanceof</span> <span class="nx">jQuery</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">context</span> <span class="k">instanceof</span> <span class="nx">jQuerySub</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">context</span> <span class="o">=</span> <span class="nx">jQuerySub</span><span class="p">(</span> <span class="nx">context</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">rootjQuerySub</span> <span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">jQuerySub</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">jQuerySub</span><span class="p">.</span><span class="nx">fn</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">rootjQuerySub</span> <span class="o">=</span> <span class="nx">jQuerySub</span><span class="p">(</span><span class="nb">document</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">jQuerySub</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">browser</span><span class="o">:</span> <span class="p">{}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-120" id="section-120">&#182;</a>
</div>
<p>Populate the class2type map</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="s2">&quot;Boolean Number String Function Array Date RegExp Object&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">class2type</span><span class="p">[</span> <span class="s2">&quot;[object &quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">browserMatch</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">uaMatch</span><span class="p">(</span> <span class="nx">userAgent</span> <span class="p">);</span>
<span class="k">if</span> <span class="p">(</span> <span class="nx">browserMatch</span><span class="p">.</span><span class="nx">browser</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">browser</span><span class="p">[</span> <span class="nx">browserMatch</span><span class="p">.</span><span class="nx">browser</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="nx">browserMatch</span><span class="p">.</span><span class="nx">version</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-121" id="section-121">&#182;</a>
</div>
<p>Deprecated, use jQuery.browser.webkit instead</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">webkit</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">safari</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-122" id="section-122">&#182;</a>
</div>
<p>IE doesn't match non-breaking spaces with \s</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="nx">rnotwhite</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="s2">&quot;\xA0&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">trimLeft</span> <span class="o">=</span> <span class="sr">/^[\s\xA0]+/</span><span class="p">;</span>
  <span class="nx">trimRight</span> <span class="o">=</span> <span class="sr">/[\s\xA0]+$/</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-123" id="section-123">&#182;</a>
</div>
<p>All jQuery objects should point back to these</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">rootjQuery</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nb">document</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-124" id="section-124">&#182;</a>
</div>
<p>Cleanup functions for the document ready method</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">DOMContentLoaded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="s2">&quot;DOMContentLoaded&quot;</span><span class="p">,</span> <span class="nx">DOMContentLoaded</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">();</span>
  <span class="p">};</span>

<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">DOMContentLoaded</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-125" id="section-125">&#182;</a>
</div>
<p>Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="s2">&quot;complete&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nb">document</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span> <span class="s2">&quot;onreadystatechange&quot;</span><span class="p">,</span> <span class="nx">DOMContentLoaded</span> <span class="p">);</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-126" id="section-126">&#182;</a>
</div>
<p>The DOM ready check for Internet Explorer</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">doScrollCheck</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isReady</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">try</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-127" id="section-127">&#182;</a>
</div>
<p>If IE is used, use the trick by Diego Perini
<a href='http://javascript.nwbox.com/IEContentLoaded/'>http://javascript.nwbox.com/IEContentLoaded/</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">doScroll</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">doScrollCheck</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-128" id="section-128">&#182;</a>
</div>
<p>and execute any waiting functions</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ready</span><span class="p">();</span>
<span class="p">}</span>

<span class="k">return</span> <span class="nx">jQuery</span><span class="p">;</span>

<span class="p">})();</span>


<span class="kd">var</span> <span class="c1">// Promise methods</span>
  <span class="nx">promiseMethods</span> <span class="o">=</span> <span class="s2">&quot;done fail isResolved isRejected promise then always pipe&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-129" id="section-129">&#182;</a>
</div>
<p>Static reference to slice</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">sliceDeferred</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-130" id="section-130">&#182;</a>
</div>
<p>Create a simple deferred (one callbacks list)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">_Deferred</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="c1">// callbacks list</span>
      <span class="nx">callbacks</span> <span class="o">=</span> <span class="p">[],</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-131" id="section-131">&#182;</a>
</div>
<p>stored [ context , args ]</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">fired</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-132" id="section-132">&#182;</a>
</div>
<p>to avoid firing when already doing so</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">firing</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-133" id="section-133">&#182;</a>
</div>
<p>flag to know if the deferred has been cancelled</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">cancelled</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-134" id="section-134">&#182;</a>
</div>
<p>the deferred itself</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">deferred</span>  <span class="o">=</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-135" id="section-135">&#182;</a>
</div>
<p>done( f1, f2, ...)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">done</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">cancelled</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">,</span>
              <span class="nx">i</span><span class="p">,</span>
              <span class="nx">length</span><span class="p">,</span>
              <span class="nx">elem</span><span class="p">,</span>
              <span class="nx">type</span><span class="p">,</span>
              <span class="nx">_fired</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">fired</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">_fired</span> <span class="o">=</span> <span class="nx">fired</span><span class="p">;</span>
              <span class="nx">fired</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">elem</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
              <span class="nx">type</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">type</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;array&quot;</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">deferred</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
              <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">callbacks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">_fired</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">_fired</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">_fired</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-136" id="section-136">&#182;</a>
</div>
<p>resolve with given context and args</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">resolveWith</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">cancelled</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">fired</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">firing</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-137" id="section-137">&#182;</a>
</div>
<p>make sure args are available (#8421)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">args</span> <span class="o">=</span> <span class="nx">args</span> <span class="o">||</span> <span class="p">[];</span>
            <span class="nx">firing</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="k">try</span> <span class="p">{</span>
              <span class="k">while</span><span class="p">(</span> <span class="nx">callbacks</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">callbacks</span><span class="p">.</span><span class="nx">shift</span><span class="p">().</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">finally</span> <span class="p">{</span>
              <span class="nx">fired</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">args</span> <span class="p">];</span>
              <span class="nx">firing</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-138" id="section-138">&#182;</a>
</div>
<p>resolve with this as context and given arguments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">resolve</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-139" id="section-139">&#182;</a>
</div>
<p>Has this deferred been resolved?</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">isResolved</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">return</span> <span class="o">!!</span><span class="p">(</span> <span class="nx">firing</span> <span class="o">||</span> <span class="nx">fired</span> <span class="p">);</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-140" id="section-140">&#182;</a>
</div>
<p>Cancel</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">cancel</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">cancelled</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
          <span class="nx">callbacks</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>

    <span class="k">return</span> <span class="nx">deferred</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-141" id="section-141">&#182;</a>
</div>
<p>Full fledged deferred (two callbacks list)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">Deferred</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_Deferred</span><span class="p">(),</span>
      <span class="nx">failDeferred</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_Deferred</span><span class="p">(),</span>
      <span class="nx">promise</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-142" id="section-142">&#182;</a>
</div>
<p>Add errorDeferred methods, then and promise</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">then</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">doneCallbacks</span><span class="p">,</span> <span class="nx">failCallbacks</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">deferred</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="nx">doneCallbacks</span> <span class="p">).</span><span class="nx">fail</span><span class="p">(</span> <span class="nx">failCallbacks</span> <span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">always</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">done</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">).</span><span class="nx">fail</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">fail</span><span class="o">:</span> <span class="nx">failDeferred</span><span class="p">.</span><span class="nx">done</span><span class="p">,</span>
      <span class="nx">rejectWith</span><span class="o">:</span> <span class="nx">failDeferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">,</span>
      <span class="nx">reject</span><span class="o">:</span> <span class="nx">failDeferred</span><span class="p">.</span><span class="nx">resolve</span><span class="p">,</span>
      <span class="nx">isRejected</span><span class="o">:</span> <span class="nx">failDeferred</span><span class="p">.</span><span class="nx">isResolved</span><span class="p">,</span>
      <span class="nx">pipe</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fnDone</span><span class="p">,</span> <span class="nx">fnFail</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">newDefer</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">{</span>
            <span class="nx">done</span><span class="o">:</span> <span class="p">[</span> <span class="nx">fnDone</span><span class="p">,</span> <span class="s2">&quot;resolve&quot;</span> <span class="p">],</span>
            <span class="nx">fail</span><span class="o">:</span> <span class="p">[</span> <span class="nx">fnFail</span><span class="p">,</span> <span class="s2">&quot;reject&quot;</span> <span class="p">]</span>
          <span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span>
              <span class="nx">action</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span> <span class="mi">1</span> <span class="p">],</span>
              <span class="nx">returned</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">deferred</span><span class="p">[</span> <span class="nx">handler</span> <span class="p">](</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">returned</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">returned</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">returned</span><span class="p">.</span><span class="nx">promise</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">returned</span><span class="p">.</span><span class="nx">promise</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span> <span class="nx">newDefer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">newDefer</span><span class="p">.</span><span class="nx">reject</span> <span class="p">);</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">newDefer</span><span class="p">[</span> <span class="nx">action</span> <span class="p">](</span> <span class="nx">returned</span> <span class="p">);</span>
                <span class="p">}</span>
              <span class="p">});</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">deferred</span><span class="p">[</span> <span class="nx">handler</span> <span class="p">](</span> <span class="nx">newDefer</span><span class="p">[</span> <span class="nx">action</span> <span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">});</span>
        <span class="p">}).</span><span class="nx">promise</span><span class="p">();</span>
      <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-143" id="section-143">&#182;</a>
</div>
<p>Get a promise for this deferred
If obj is provided, the promise aspect is added to the object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">promise</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">obj</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">promise</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">promise</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">promise</span> <span class="o">=</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">promiseMethods</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">obj</span><span class="p">[</span> <span class="nx">promiseMethods</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">deferred</span><span class="p">[</span> <span class="nx">promiseMethods</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">];</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-144" id="section-144">&#182;</a>
</div>
<p>Make sure only one callback list will be used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">deferred</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="nx">failDeferred</span><span class="p">.</span><span class="nx">cancel</span> <span class="p">).</span><span class="nx">fail</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">cancel</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-145" id="section-145">&#182;</a>
</div>
<p>Unexpose cancel</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">delete</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">cancel</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-146" id="section-146">&#182;</a>
</div>
<p>Call given func if any</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">func</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">deferred</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">deferred</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-147" id="section-147">&#182;</a>
</div>
<p>Deferred helper</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">when</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">firstParam</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">length</span> <span class="o">=</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">count</span> <span class="o">=</span> <span class="nx">length</span><span class="p">,</span>
      <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">length</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">firstParam</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">firstParam</span><span class="p">.</span><span class="nx">promise</span> <span class="p">)</span> <span class="o">?</span>
        <span class="nx">firstParam</span> <span class="o">:</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">();</span>
    <span class="kd">function</span> <span class="nx">resolveFunc</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">sliceDeferred</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">value</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="o">--</span><span class="nx">count</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-148" id="section-148">&#182;</a>
</div>
<p>Strange bug in FF4:
Values changed onto the arguments object sometimes end up as undefined values
outside the $.when method. Cloning the object into a fresh array solves the issue</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">sliceDeferred</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span><span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">promise</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">promise</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span> <span class="nx">resolveFunc</span><span class="p">(</span><span class="nx">i</span><span class="p">),</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">reject</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="o">--</span><span class="nx">count</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">count</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">deferred</span> <span class="o">!==</span> <span class="nx">firstParam</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">deferred</span><span class="p">,</span> <span class="nx">length</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">firstParam</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[]</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>



<span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">),</span>
    <span class="nx">documentElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span>
    <span class="nx">all</span><span class="p">,</span>
    <span class="nx">a</span><span class="p">,</span>
    <span class="nx">select</span><span class="p">,</span>
    <span class="nx">opt</span><span class="p">,</span>
    <span class="nx">input</span><span class="p">,</span>
    <span class="nx">marginDiv</span><span class="p">,</span>
    <span class="nx">support</span><span class="p">,</span>
    <span class="nx">fragment</span><span class="p">,</span>
    <span class="nx">body</span><span class="p">,</span>
    <span class="nx">testElementParent</span><span class="p">,</span>
    <span class="nx">testElement</span><span class="p">,</span>
    <span class="nx">testElementStyle</span><span class="p">,</span>
    <span class="nx">tds</span><span class="p">,</span>
    <span class="nx">events</span><span class="p">,</span>
    <span class="nx">eventName</span><span class="p">,</span>
    <span class="nx">i</span><span class="p">,</span>
    <span class="nx">isSupported</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-149" id="section-149">&#182;</a>
</div>
<p>Preliminary tests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;className&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">);</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;   &lt;link/&gt;&lt;table&gt;&lt;/table&gt;&lt;a href=&#39;/a&#39; style=&#39;top:1px;float:left;opacity:.55;&#39;&gt;a&lt;/a&gt;&lt;input type=&#39;checkbox&#39;/&gt;&quot;</span><span class="p">;</span>

  <span class="nx">all</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;*&quot;</span> <span class="p">);</span>
  <span class="nx">a</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;a&quot;</span> <span class="p">)[</span> <span class="mi">0</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-150" id="section-150">&#182;</a>
</div>
<p>Can't get basic test support</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">all</span> <span class="o">||</span> <span class="o">!</span><span class="nx">all</span><span class="p">.</span><span class="nx">length</span> <span class="o">||</span> <span class="o">!</span><span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{};</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-151" id="section-151">&#182;</a>
</div>
<p>First batch of supports tests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">select</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;select&quot;</span> <span class="p">);</span>
  <span class="nx">opt</span> <span class="o">=</span> <span class="nx">select</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;option&quot;</span><span class="p">)</span> <span class="p">);</span>
  <span class="nx">input</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;input&quot;</span> <span class="p">)[</span> <span class="mi">0</span> <span class="p">];</span>

  <span class="nx">support</span> <span class="o">=</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-152" id="section-152">&#182;</a>
</div>
<p>IE strips leading whitespace when .innerHTML is used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">leadingWhitespace</span><span class="o">:</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-153" id="section-153">&#182;</a>
</div>
<p>Make sure that tbody elements aren't automatically inserted
IE will insert them into empty tables</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">tbody</span><span class="o">:</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;tbody&quot;</span> <span class="p">).</span><span class="nx">length</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-154" id="section-154">&#182;</a>
</div>
<p>Make sure that link elements get serialized correctly by innerHTML
This requires a wrapper element in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">htmlSerialize</span><span class="o">:</span> <span class="o">!!</span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;link&quot;</span> <span class="p">).</span><span class="nx">length</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-155" id="section-155">&#182;</a>
</div>
<p>Get the style information from getAttribute
(IE uses .cssText instead)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">style</span><span class="o">:</span> <span class="sr">/top/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;style&quot;</span><span class="p">)</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-156" id="section-156">&#182;</a>
</div>
<p>Make sure that URLs aren't manipulated
(IE normalizes it by default)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">hrefNormalized</span><span class="o">:</span> <span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;href&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;/a&quot;</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-157" id="section-157">&#182;</a>
</div>
<p>Make sure that element opacity exists
(IE uses filter instead)
Use a regex to work around a WebKit issue. See #5145</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">opacity</span><span class="o">:</span> <span class="sr">/^0.55$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-158" id="section-158">&#182;</a>
</div>
<p>Verify style float existence
(IE uses styleFloat instead of cssFloat)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">cssFloat</span><span class="o">:</span> <span class="o">!!</span><span class="nx">a</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssFloat</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-159" id="section-159">&#182;</a>
</div>
<p>Make sure that if no value is specified for a checkbox
that it defaults to "on".
(WebKit defaults to "" instead)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">checkOn</span><span class="o">:</span> <span class="p">(</span> <span class="nx">input</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;on&quot;</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-160" id="section-160">&#182;</a>
</div>
<p>Make sure that a selected-by-default option has a working selected property.
(WebKit defaults to false instead of true, IE too, if it's in an optgroup)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">optSelected</span><span class="o">:</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">selected</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-161" id="section-161">&#182;</a>
</div>
<p>Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">getSetAttribute</span><span class="o">:</span> <span class="nx">div</span><span class="p">.</span><span class="nx">className</span> <span class="o">!==</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-162" id="section-162">&#182;</a>
</div>
<p>Will be defined later</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">submitBubbles</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">changeBubbles</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">focusinBubbles</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">deleteExpando</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">noCloneEvent</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">inlineBlockNeedsLayout</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">shrinkWrapBlocks</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">reliableMarginRight</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-163" id="section-163">&#182;</a>
</div>
<p>Make sure checked status is properly cloned</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">input</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nx">support</span><span class="p">.</span><span class="nx">noCloneChecked</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">checked</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-164" id="section-164">&#182;</a>
</div>
<p>Make sure that the options inside disabled selects aren't marked as disabled
(WebKit marks them as disabled)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">select</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="nx">support</span><span class="p">.</span><span class="nx">optDisabled</span> <span class="o">=</span> <span class="o">!</span><span class="nx">opt</span><span class="p">.</span><span class="nx">disabled</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-165" id="section-165">&#182;</a>
</div>
<p>Test to see if it's possible to delete an expando from an element
Fails in Internet Explorer</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">delete</span> <span class="nx">div</span><span class="p">.</span><span class="nx">test</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="o">&amp;&amp;</span> <span class="nx">div</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="o">&amp;&amp;</span> <span class="nx">div</span><span class="p">.</span><span class="nx">fireEvent</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">div</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;onclick&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-166" id="section-166">&#182;</a>
</div>
<p>Cloning a node shouldn't copy over any
bound event handlers (IE does this)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">support</span><span class="p">.</span><span class="nx">noCloneEvent</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">div</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">fireEvent</span><span class="p">(</span> <span class="s2">&quot;onclick&quot;</span> <span class="p">);</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-167" id="section-167">&#182;</a>
</div>
<p>Check if a radio maintains it's value
after being appended to the DOM</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">);</span>
  <span class="nx">input</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;t&quot;</span><span class="p">;</span>
  <span class="nx">input</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;radio&quot;</span><span class="p">);</span>
  <span class="nx">support</span><span class="p">.</span><span class="nx">radioValue</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;t&quot;</span><span class="p">;</span>

  <span class="nx">input</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;checked&quot;</span><span class="p">,</span> <span class="s2">&quot;checked&quot;</span><span class="p">);</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">input</span> <span class="p">);</span>
  <span class="nx">fragment</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span>
  <span class="nx">fragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-168" id="section-168">&#182;</a>
</div>
<p>WebKit doesn't clone checked state correctly in fragments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">checkClone</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">cloneNode</span><span class="p">(</span> <span class="kc">true</span> <span class="p">).</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>

  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-169" id="section-169">&#182;</a>
</div>
<p>Figure out if the W3C box model works as expected</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">paddingLeft</span> <span class="o">=</span> <span class="s2">&quot;1px&quot;</span><span class="p">;</span>

  <span class="nx">body</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;body&quot;</span> <span class="p">)[</span> <span class="mi">0</span> <span class="p">];</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-170" id="section-170">&#182;</a>
</div>
<p>We use our own, invisible, body unless the body is already present
in which case we use a div (#9239)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">testElement</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="nx">body</span> <span class="o">?</span> <span class="s2">&quot;div&quot;</span> <span class="o">:</span> <span class="s2">&quot;body&quot;</span> <span class="p">);</span>
  <span class="nx">testElementStyle</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">visibility</span><span class="o">:</span> <span class="s2">&quot;hidden&quot;</span><span class="p">,</span>
    <span class="nx">width</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">border</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">};</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">testElementStyle</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">position</span><span class="o">:</span> <span class="s2">&quot;absolute&quot;</span><span class="p">,</span>
      <span class="nx">left</span><span class="o">:</span> <span class="o">-</span><span class="mi">1000</span><span class="p">,</span>
      <span class="nx">top</span><span class="o">:</span> <span class="o">-</span><span class="mi">1000</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">testElementStyle</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">testElement</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">testElementStyle</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="nx">testElement</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">div</span> <span class="p">);</span>
  <span class="nx">testElementParent</span> <span class="o">=</span> <span class="nx">body</span> <span class="o">||</span> <span class="nx">documentElement</span><span class="p">;</span>
  <span class="nx">testElementParent</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">testElement</span><span class="p">,</span> <span class="nx">testElementParent</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-171" id="section-171">&#182;</a>
</div>
<p>Check if a disconnected checkbox will retain its checked
value of true after appended to the DOM (IE6/7)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">appendChecked</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>

  <span class="nx">support</span><span class="p">.</span><span class="nx">boxModel</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">===</span> <span class="mi">2</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;zoom&quot;</span> <span class="k">in</span> <span class="nx">div</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-172" id="section-172">&#182;</a>
</div>
<p>Check if natively block-level elements act like inline-block
elements when setting their display to 'inline' and giving
them layout
(IE &lt; 8 does this)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;inline&quot;</span><span class="p">;</span>
    <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nx">support</span><span class="p">.</span><span class="nx">inlineBlockNeedsLayout</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-173" id="section-173">&#182;</a>
</div>
<p>Check if elements with layout shrink-wrap their children
(IE 6 does this)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">div</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;div style=&#39;width:4px;&#39;&gt;&lt;/div&gt;&quot;</span><span class="p">;</span>
    <span class="nx">support</span><span class="p">.</span><span class="nx">shrinkWrapBlocks</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">!==</span> <span class="mi">2</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;table&gt;&lt;tr&gt;&lt;td style=&#39;padding:0;border:0;display:none&#39;&gt;&lt;/td&gt;&lt;td&gt;t&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span><span class="p">;</span>
  <span class="nx">tds</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;td&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-174" id="section-174">&#182;</a>
</div>
<p>Check if table cells still have offsetWidth/Height when they are set
to display:none and there are still other visible table cells in a
table row; if so, offsetWidth/Height are not reliable for use when
determining if an element has been hidden directly using
display:none (it is still safe to use offsets if a parent element is
hidden; don safety goggles and see bug #4512 for more information).
(only IE 8 fails this test)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">isSupported</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">tds</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">offsetHeight</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">);</span>

  <span class="nx">tds</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="nx">tds</span><span class="p">[</span> <span class="mi">1</span> <span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-175" id="section-175">&#182;</a>
</div>
<p>Check if empty table cells still have offsetWidth/Height
(IE &lt; 8 fail this test)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">support</span><span class="p">.</span><span class="nx">reliableHiddenOffsets</span> <span class="o">=</span> <span class="nx">isSupported</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">tds</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">offsetHeight</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-176" id="section-176">&#182;</a>
</div>
<p>Check if div with explicit width and no margin-right incorrectly
gets computed margin-right based on width of container. For more
info see bug #3333
Fails in WebKit before Feb 2011 nightlies
WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">marginDiv</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">);</span>
    <span class="nx">marginDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">;</span>
    <span class="nx">marginDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginRight</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">;</span>
    <span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">marginDiv</span> <span class="p">);</span>
    <span class="nx">support</span><span class="p">.</span><span class="nx">reliableMarginRight</span> <span class="o">=</span>
      <span class="p">(</span> <span class="nb">parseInt</span><span class="p">(</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span> <span class="nx">marginDiv</span><span class="p">,</span> <span class="kc">null</span> <span class="p">)</span> <span class="o">||</span> <span class="p">{</span> <span class="nx">marginRight</span><span class="o">:</span> <span class="mi">0</span> <span class="p">}</span> <span class="p">).</span><span class="nx">marginRight</span><span class="p">,</span> <span class="mi">10</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-177" id="section-177">&#182;</a>
</div>
<p>Remove the body element we added</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">testElement</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="nx">testElementParent</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">testElement</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-178" id="section-178">&#182;</a>
</div>
<p>Technique from Juriy Zaytsev
<a href='http://thinkweb2.com/projects/prototype/detecting-event-support-without-browser-sniffing/'>http://thinkweb2.com/projects/prototype/detecting-event-support-without-browser-sniffing/</a>
We only care about the case where non-standard event systems
are used, namely in IE. Short-circuiting here helps us to
avoid an eval call (in setAttribute) which can cause CSP
to go haywire. See: <a href='https://developer.mozilla.org/en/Security/CSP'>https://developer.mozilla.org/en/Security/CSP</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">{</span>
      <span class="nx">submit</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="nx">change</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="nx">focusin</span><span class="o">:</span> <span class="mi">1</span>
    <span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">eventName</span> <span class="o">=</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">;</span>
      <span class="nx">isSupported</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">eventName</span> <span class="k">in</span> <span class="nx">div</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isSupported</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">div</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="nx">eventName</span><span class="p">,</span> <span class="s2">&quot;return;&quot;</span> <span class="p">);</span>
        <span class="nx">isSupported</span> <span class="o">=</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">div</span><span class="p">[</span> <span class="nx">eventName</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">support</span><span class="p">[</span> <span class="nx">i</span> <span class="o">+</span> <span class="s2">&quot;Bubbles&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">isSupported</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-179" id="section-179">&#182;</a>
</div>
<p>Null connected elements to avoid leaks in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">testElement</span> <span class="o">=</span> <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">select</span> <span class="o">=</span> <span class="nx">opt</span> <span class="o">=</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">marginDiv</span> <span class="o">=</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">input</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">support</span><span class="p">;</span>
<span class="p">})();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-180" id="section-180">&#182;</a>
</div>
<p>Keep track of boxModel</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">boxModel</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">boxModel</span><span class="p">;</span>




<span class="kd">var</span> <span class="nx">rbrace</span> <span class="o">=</span> <span class="sr">/^(?:\{.*\}|\[.*\])$/</span><span class="p">,</span>
  <span class="nx">rmultiDash</span> <span class="o">=</span> <span class="sr">/([a-z])([A-Z])/g</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">cache</span><span class="o">:</span> <span class="p">{},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-181" id="section-181">&#182;</a>
</div>
<p>Please use with caution</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">uuid</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-182" id="section-182">&#182;</a>
</div>
<p>Unique for each copy of jQuery on the page
Non-digits removed to match rinlinejQuery</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">expando</span><span class="o">:</span> <span class="s2">&quot;jQuery&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/\D/g</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-183" id="section-183">&#182;</a>
</div>
<p>The following elements throw uncatchable exceptions if you
attempt to add expando properties to them.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">noData</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;embed&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-184" id="section-184">&#182;</a>
</div>
<p>Ban all objects except for Flash (which handle expandos)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;object&quot;</span><span class="o">:</span> <span class="s2">&quot;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000&quot;</span><span class="p">,</span>
    <span class="s2">&quot;applet&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>

  <span class="nx">hasData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">elem</span><span class="p">[</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">];</span>

    <span class="k">return</span> <span class="o">!!</span><span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isEmptyDataObject</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">pvt</span> <span class="cm">/* Internal Use Only */</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">internalKey</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span> <span class="nx">getByName</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="nx">thisCache</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-185" id="section-185">&#182;</a>
</div>
<p>We have to handle DOM nodes and JS objects differently because IE6-7
can't GC object references properly across the DOM-JS boundary</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">isNode</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-186" id="section-186">&#182;</a>
</div>
<p>Only DOM nodes need the global jQuery cache; JS object data is
attached directly to the object so GC can occur automatically</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">cache</span> <span class="o">=</span> <span class="nx">isNode</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-187" id="section-187">&#182;</a>
</div>
<p>Only defining an ID for JS objects if its cache already exists allows
the code to shortcut on the same path as a DOM node with no cache</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">id</span> <span class="o">=</span> <span class="nx">isNode</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-188" id="section-188">&#182;</a>
</div>
<p>Avoid doing any more work than we need to when trying to get data on an
object that has no data at all</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">id</span> <span class="o">||</span> <span class="p">(</span><span class="nx">pvt</span> <span class="o">&amp;&amp;</span> <span class="nx">id</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">][</span> <span class="nx">internalKey</span> <span class="p">]))</span> <span class="o">&amp;&amp;</span> <span class="nx">getByName</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">id</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-189" id="section-189">&#182;</a>
</div>
<p>Only DOM nodes need a new unique ID for each element since their data
ends up in the global cache</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">id</span> <span class="o">=</span> <span class="o">++</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">uuid</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">id</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-190" id="section-190">&#182;</a>
</div>
<p>TODO: This is a hack for 1.5 ONLY. Avoids exposing jQuery
metadata on plain JS objects when the object is serialized using
JSON.stringify</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">].</span><span class="nx">toJSON</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noop</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-191" id="section-191">&#182;</a>
</div>
<p>An object can be passed to jQuery.data instead of a key/value pair; this gets
shallow copied over onto the existing cache</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">pvt</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">][</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">][</span> <span class="nx">internalKey</span> <span class="p">],</span> <span class="nx">name</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">],</span> <span class="nx">name</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">thisCache</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-192" id="section-192">&#182;</a>
</div>
<p>Internal jQuery data is stored in a separate object inside the object's data
cache in order to avoid key collisions between internal data and user-defined
data</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">pvt</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">thisCache</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="p">}</span>

      <span class="nx">thisCache</span> <span class="o">=</span> <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-193" id="section-193">&#182;</a>
</div>
<p>TODO: This is a hack for 1.5 ONLY. It will be removed in 1.6. Users should
not attempt to inspect the internal events object using jQuery.data, as this
internal data object is undocumented and subject to change.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;events&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">thisCache</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">].</span><span class="nx">events</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">getByName</span> <span class="o">?</span> 

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-194" id="section-194">&#182;</a>
</div>
<p>Check for both converted-to-camel and non-converted data property names</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">:</span>
      <span class="nx">thisCache</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">removeData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">pvt</span> <span class="cm">/* Internal Use Only */</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">internalKey</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span> <span class="nx">isNode</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-195" id="section-195">&#182;</a>
</div>
<p>See jQuery.data for more information</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">cache</span> <span class="o">=</span> <span class="nx">isNode</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-196" id="section-196">&#182;</a>
</div>
<p>See jQuery.data for more information</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">id</span> <span class="o">=</span> <span class="nx">isNode</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-197" id="section-197">&#182;</a>
</div>
<p>If there is already no cache entry for this object, there is no
purpose in continuing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">thisCache</span> <span class="o">=</span> <span class="nx">pvt</span> <span class="o">?</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">][</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">thisCache</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">delete</span> <span class="nx">thisCache</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-198" id="section-198">&#182;</a>
</div>
<p>If there is no data left in the cache, we want to continue
and let the cache object itself get destroyed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isEmptyDataObject</span><span class="p">(</span><span class="nx">thisCache</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-199" id="section-199">&#182;</a>
</div>
<p>See jQuery.data for more information</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">pvt</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">][</span> <span class="nx">internalKey</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-200" id="section-200">&#182;</a>
</div>
<p>Don't destroy the parent cache unless the internal data object
had been the only thing left in it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isEmptyDataObject</span><span class="p">(</span><span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">internalCache</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">][</span> <span class="nx">internalKey</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-201" id="section-201">&#182;</a>
</div>
<p>Browsers that fail expando deletion also refuse to delete expandos on
the window, but it will allow it on all other JS objects; other browsers
don't care</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="o">||</span> <span class="nx">cache</span> <span class="o">!=</span> <span class="nb">window</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-202" id="section-202">&#182;</a>
</div>
<p>We destroyed the entire user cache at once because it's faster than
iterating through each key, but we need to continue to persist internal
data if it existed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">internalCache</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-203" id="section-203">&#182;</a>
</div>
<p>TODO: This is a hack for 1.5 ONLY. Avoids exposing jQuery
metadata on plain JS objects when the object is serialized using
JSON.stringify</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">].</span><span class="nx">toJSON</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noop</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">][</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">internalCache</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-204" id="section-204">&#182;</a>
</div>
<p>Otherwise, we need to eliminate the expando on the node to avoid
false lookups in the cache for entries that no longer exist</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">isNode</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-205" id="section-205">&#182;</a>
</div>
<p>IE does not allow us to delete expando properties from nodes,
nor does it have a removeAttribute function on Document nodes;
we must handle all of these cases</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">delete</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">];</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-206" id="section-206">&#182;</a>
</div>
<p>For internal use only.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">_data</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-207" id="section-207">&#182;</a>
</div>
<p>A method for determining if a DOM node can handle the data expando</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">acceptData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noData</span><span class="p">[</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="nx">match</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;classid&quot;</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">match</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">data</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">key</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">attr</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">attributes</span><span class="p">,</span> <span class="nx">name</span><span class="p">;</span>
          <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">name</span> <span class="o">=</span> <span class="nx">attr</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">name</span><span class="p">;</span>

            <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot;data-&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">);</span>

              <span class="nx">dataAttr</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">key</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">key</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">parts</span> <span class="o">=</span> <span class="nx">key</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
    <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">?</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">triggerHandler</span><span class="p">(</span><span class="s2">&quot;getData&quot;</span> <span class="o">+</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;!&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]]);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-208" id="section-208">&#182;</a>
</div>
<p>Try to fetch any internally stored data first</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">key</span> <span class="p">);</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">dataAttr</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">?</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">data</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">$this</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">),</span>
          <span class="nx">args</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">value</span> <span class="p">];</span>

        <span class="nx">$this</span><span class="p">.</span><span class="nx">triggerHandler</span><span class="p">(</span> <span class="s2">&quot;setData&quot;</span> <span class="o">+</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;!&quot;</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="nx">$this</span><span class="p">.</span><span class="nx">triggerHandler</span><span class="p">(</span> <span class="s2">&quot;changeData&quot;</span> <span class="o">+</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;!&quot;</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">removeData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">key</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">dataAttr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-209" id="section-209">&#182;</a>
</div>
<p>If nothing was found internally, try to fetch any
data from the HTML5 data-* attribute</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;data-&quot;</span> <span class="o">+</span> <span class="nx">key</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rmultiDash</span><span class="p">,</span> <span class="s2">&quot;$1-$2&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>

    <span class="nx">data</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;true&quot;</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span>
        <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;false&quot;</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span>
        <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;null&quot;</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span>
        <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nb">isNaN</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">?</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">rbrace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseJSON</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">data</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-210" id="section-210">&#182;</a>
</div>
<p>Make sure we set the data so it isn't changed later</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-211" id="section-211">&#182;</a>
</div>
<p>TODO: This is a hack for 1.5 ONLY to allow objects with a single toJSON
property to be considered empty objects; this property always exists in
order to make sure JSON.stringify does not expose internal metadata</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">isEmptyDataObject</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">!==</span> <span class="s2">&quot;toJSON&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>




<span class="kd">function</span> <span class="nx">handleQueueMarkDefer</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">src</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">deferDataKey</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;defer&quot;</span><span class="p">,</span>
    <span class="nx">queueDataKey</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queue&quot;</span><span class="p">,</span>
    <span class="nx">markDataKey</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;mark&quot;</span><span class="p">,</span>
    <span class="nx">defer</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">deferDataKey</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">defer</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span> <span class="nx">src</span> <span class="o">===</span> <span class="s2">&quot;queue&quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">queueDataKey</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span> <span class="nx">src</span> <span class="o">===</span> <span class="s2">&quot;mark&quot;</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">markDataKey</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-212" id="section-212">&#182;</a>
</div>
<p>Give room for hard-coded callbacks to fire first
and eventually mark/queue something else on the element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">setTimeout</span><span class="p">(</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">queueDataKey</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">markDataKey</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">deferDataKey</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="nx">defer</span><span class="p">.</span><span class="nx">resolve</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

  <span class="nx">_mark</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="p">(</span><span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;mark&quot;</span><span class="p">;</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span><span class="nx">type</span><span class="p">,</span><span class="kc">undefined</span><span class="p">,</span><span class="kc">true</span><span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">_unmark</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">force</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">force</span> <span class="o">!==</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
      <span class="nx">elem</span> <span class="o">=</span> <span class="nx">force</span><span class="p">;</span>
      <span class="nx">force</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;mark&quot;</span><span class="p">,</span>
        <span class="nx">count</span> <span class="o">=</span> <span class="nx">force</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="p">(</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span> <span class="o">||</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">count</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">count</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="nx">handleQueueMarkDefer</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="s2">&quot;mark&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">queue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="p">(</span><span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;queue&quot;</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-213" id="section-213">&#182;</a>
</div>
<p>Speed up dequeue by getting out quickly if this is just a lookup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">q</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">q</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">q</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">q</span> <span class="o">||</span> <span class="p">[];</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">dequeue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">queue</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">),</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span>
      <span class="nx">defer</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-214" id="section-214">&#182;</a>
</div>
<p>If the fx queue is dequeued, always remove the progress sentinel</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">===</span> <span class="s2">&quot;inprogress&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-215" id="section-215">&#182;</a>
</div>
<p>Add a progress sentinel to prevent the fx queue from being
automatically dequeued</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;fx&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">queue</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="s2">&quot;inprogress&quot;</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queue&quot;</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="nx">handleQueueMarkDefer</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="s2">&quot;queue&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">queue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">type</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">queue</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;fx&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">queue</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!==</span> <span class="s2">&quot;inprogress&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">dequeue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-216" id="section-216">&#182;</a>
</div>
<p>Based off of the plugin by Clint Helfers, with permission.
<a href='http://blindsignals.com/index.php/2009/07/jquery-delay/'>http://blindsignals.com/index.php/2009/07/jquery-delay/</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">delay</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">time</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">time</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span><span class="p">[</span><span class="nx">time</span><span class="p">]</span> <span class="o">||</span> <span class="nx">time</span> <span class="o">:</span> <span class="nx">time</span><span class="p">;</span>
    <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>
      <span class="p">},</span> <span class="nx">time</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  <span class="nx">clearQueue</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">(</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">,</span> <span class="p">[]</span> <span class="p">);</span>
  <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-217" id="section-217">&#182;</a>
</div>
<p>Get a promise resolved when queues of a certain type
are emptied (fx is the type by default)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">promise</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">object</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">object</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">||</span> <span class="s2">&quot;fx&quot;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">defer</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(),</span>
      <span class="nx">elements</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
      <span class="nx">count</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
      <span class="nx">deferDataKey</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;defer&quot;</span><span class="p">,</span>
      <span class="nx">queueDataKey</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;queue&quot;</span><span class="p">,</span>
      <span class="nx">markDataKey</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;mark&quot;</span><span class="p">,</span>
      <span class="nx">tmp</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">resolve</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="o">--</span><span class="nx">count</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">defer</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">elements</span><span class="p">,</span> <span class="p">[</span> <span class="nx">elements</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">while</span><span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elements</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">deferDataKey</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="o">||</span>
          <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elements</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">queueDataKey</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="o">||</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elements</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">markDataKey</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">elements</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">deferDataKey</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_Deferred</span><span class="p">(),</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">))</span> <span class="p">{</span>
        <span class="nx">count</span><span class="o">++</span><span class="p">;</span>
        <span class="nx">tmp</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span> <span class="nx">resolve</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">resolve</span><span class="p">();</span>
    <span class="k">return</span> <span class="nx">defer</span><span class="p">.</span><span class="nx">promise</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>




<span class="kd">var</span> <span class="nx">rclass</span> <span class="o">=</span> <span class="sr">/[\n\t\r]/g</span><span class="p">,</span>
  <span class="nx">rspace</span> <span class="o">=</span> <span class="sr">/\s+/</span><span class="p">,</span>
  <span class="nx">rreturn</span> <span class="o">=</span> <span class="sr">/\r/g</span><span class="p">,</span>
  <span class="nx">rtype</span> <span class="o">=</span> <span class="sr">/^(?:button|input)$/i</span><span class="p">,</span>
  <span class="nx">rfocusable</span> <span class="o">=</span> <span class="sr">/^(?:button|input|object|select|textarea)$/i</span><span class="p">,</span>
  <span class="nx">rclickable</span> <span class="o">=</span> <span class="sr">/^a(?:rea)?$/i</span><span class="p">,</span>
  <span class="nx">rboolean</span> <span class="o">=</span> <span class="sr">/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i</span><span class="p">,</span>
  <span class="nx">rinvalidChar</span> <span class="o">=</span> <span class="sr">/\:|^on/</span><span class="p">,</span>
  <span class="nx">formHook</span><span class="p">,</span> <span class="nx">boolHook</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">attr</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attr</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">removeAttr</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>
  
  <span class="nx">prop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prop</span> <span class="p">);</span>
  <span class="p">},</span>
  
  <span class="nx">removeProp</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-218" id="section-218">&#182;</a>
</div>
<p>try/catch handles cases where IE balks (such as removing a property on window)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">try</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="k">delete</span> <span class="k">this</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">addClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">classNames</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span>
      <span class="nx">setClass</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">cl</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">j</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">addClass</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">classNames</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="nx">rspace</span> <span class="p">);</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">&amp;&amp;</span> <span class="nx">classNames</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">setClass</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>

            <span class="k">for</span> <span class="p">(</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">cl</span> <span class="o">=</span> <span class="nx">classNames</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">c</span> <span class="o">&lt;</span> <span class="nx">cl</span><span class="p">;</span> <span class="nx">c</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="o">!~</span><span class="nx">setClass</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">classNames</span><span class="p">[</span> <span class="nx">c</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">setClass</span> <span class="o">+=</span> <span class="nx">classNames</span><span class="p">[</span> <span class="nx">c</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">setClass</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">removeClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">classNames</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">className</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">cl</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">j</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">removeClass</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">classNames</span> <span class="o">=</span> <span class="p">(</span><span class="nx">value</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span> <span class="nx">rspace</span> <span class="p">);</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">className</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rclass</span><span class="p">,</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
            <span class="k">for</span> <span class="p">(</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">cl</span> <span class="o">=</span> <span class="nx">classNames</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">c</span> <span class="o">&lt;</span> <span class="nx">cl</span><span class="p">;</span> <span class="nx">c</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">className</span> <span class="o">=</span> <span class="nx">className</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">classNames</span><span class="p">[</span> <span class="nx">c</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">className</span> <span class="p">);</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">toggleClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">stateVal</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">value</span><span class="p">,</span>
      <span class="nx">isBool</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">stateVal</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">toggleClass</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span><span class="p">,</span> <span class="nx">stateVal</span><span class="p">),</span> <span class="nx">stateVal</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-219" id="section-219">&#182;</a>
</div>
<p>toggle individual class names</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">className</span><span class="p">,</span>
          <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">),</span>
          <span class="nx">state</span> <span class="o">=</span> <span class="nx">stateVal</span><span class="p">,</span>
          <span class="nx">classNames</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="nx">rspace</span> <span class="p">);</span>

        <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">className</span> <span class="o">=</span> <span class="nx">classNames</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-220" id="section-220">&#182;</a>
</div>
<p>check each className given, space seperated list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">state</span> <span class="o">=</span> <span class="nx">isBool</span> <span class="o">?</span> <span class="nx">state</span> <span class="o">:</span> <span class="o">!</span><span class="nx">self</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span> <span class="nx">className</span> <span class="p">);</span>
          <span class="nx">self</span><span class="p">[</span> <span class="nx">state</span> <span class="o">?</span> <span class="s2">&quot;addClass&quot;</span> <span class="o">:</span> <span class="s2">&quot;removeClass&quot;</span> <span class="p">](</span> <span class="nx">className</span> <span class="p">);</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-221" id="section-221">&#182;</a>
</div>
<p>store className if set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;__className__&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="p">);</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-222" id="section-222">&#182;</a>
</div>
<p>toggle whole className</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">className</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;__className__&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">hasClass</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">className</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rclass</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">className</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">val</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hooks</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span>
      <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">typeof</span> <span class="nx">ret</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span> 

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-223" id="section-223">&#182;</a>
</div>
<p>handle most common string cases</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rreturn</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span> 

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-224" id="section-224">&#182;</a>
</div>
<p>handle cases where value is null/undef or number</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">ret</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">isFunction</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">val</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">isFunction</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-225" id="section-225">&#182;</a>
</div>
<p>Treat null/undefined as ""; convert numbers to string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">val</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="p">});</span>
      <span class="p">}</span>

      <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-226" id="section-226">&#182;</a>
</div>
<p>If set returns undefined, fall back to normal setting</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">hooks</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span><span class="p">)</span> <span class="o">||</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">valHooks</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">option</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-227" id="section-227">&#182;</a>
</div>
<p>attributes.value is undefined in Blackberry 4.7 but
uses .value. See #6932</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">attributes</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
        <span class="k">return</span> <span class="o">!</span><span class="nx">val</span> <span class="o">||</span> <span class="nx">val</span><span class="p">.</span><span class="nx">specified</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">select</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">value</span><span class="p">,</span>
          <span class="nx">index</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">,</span>
          <span class="nx">values</span> <span class="o">=</span> <span class="p">[],</span>
          <span class="nx">options</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span>
          <span class="nx">one</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;select-one&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-228" id="section-228">&#182;</a>
</div>
<p>Nothing was selected</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">index</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-229" id="section-229">&#182;</a>
</div>
<p>Loop through all the selected options</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">one</span> <span class="o">?</span> <span class="nx">index</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">one</span> <span class="o">?</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">max</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">option</span> <span class="o">=</span> <span class="nx">options</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-230" id="section-230">&#182;</a>
</div>
<p>Don't return options that are disabled or in a disabled optgroup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">option</span><span class="p">.</span><span class="nx">selected</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">optDisabled</span> <span class="o">?</span> <span class="o">!</span><span class="nx">option</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">:</span> <span class="nx">option</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
              <span class="p">(</span><span class="o">!</span><span class="nx">option</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">option</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="s2">&quot;optgroup&quot;</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-231" id="section-231">&#182;</a>
</div>
<p>Get the specific value for the option</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">value</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">option</span> <span class="p">).</span><span class="nx">val</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-232" id="section-232">&#182;</a>
</div>
<p>We don't need an array for one selects</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">one</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
            <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-233" id="section-233">&#182;</a>
</div>
<p>Multi-Selects return an array</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-234" id="section-234">&#182;</a>
</div>
<p>Fixes Bug #2551 -- select.val() broken in IE after form.reset()</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">one</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">options</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">options</span><span class="p">[</span> <span class="nx">index</span> <span class="p">]</span> <span class="p">).</span><span class="nx">val</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">values</span><span class="p">;</span>
      <span class="p">},</span>

      <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>

        <span class="nx">jQuery</span><span class="p">(</span><span class="nx">elem</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;option&quot;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">values</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">});</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">selectedIndex</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">values</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">attrFn</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">val</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">css</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">html</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">text</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">data</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">width</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">height</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">offset</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  
  <span class="nx">attrFix</span><span class="o">:</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-235" id="section-235">&#182;</a>
</div>
<p>Always normalize to ensure hook usage</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">tabindex</span><span class="o">:</span> <span class="s2">&quot;tabIndex&quot;</span>
  <span class="p">},</span>
  
  <span class="nx">attr</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">pass</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">nType</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">;</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-236" id="section-236">&#182;</a>
</div>
<p>don't get/set attributes on text, comment and attribute nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">8</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">pass</span> <span class="o">&amp;&amp;</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrFn</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)[</span> <span class="nx">name</span> <span class="p">](</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-237" id="section-237">&#182;</a>
</div>
<p>Fallback to prop when attributes are not supported</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="s2">&quot;getAttribute&quot;</span> <span class="k">in</span> <span class="nx">elem</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">,</span>
      <span class="nx">notxml</span> <span class="o">=</span> <span class="nx">nType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-238" id="section-238">&#182;</a>
</div>
<p>Normalize the name if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">notxml</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>

      <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">hooks</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-239" id="section-239">&#182;</a>
</div>
<p>Use boolHook for boolean attributes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">rboolean</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

          <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">boolHook</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-240" id="section-240">&#182;</a>
</div>
<p>Use formHook for forms and if the name contains certain characters</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">formHook</span> <span class="o">&amp;&amp;</span> <span class="nx">name</span> <span class="o">!==</span> <span class="s2">&quot;className&quot;</span> <span class="o">&amp;&amp;</span>
          <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;form&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">rinvalidChar</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

          <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">formHook</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
        <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="nx">notxml</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="nx">notxml</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-241" id="section-241">&#182;</a>
</div>
<p>Non-existent attributes return null, we normalize to undefined</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="kc">undefined</span> <span class="o">:</span>
        <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">removeAttr</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">propName</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
    
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">getSetAttribute</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-242" id="section-242">&#182;</a>
</div>
<p>Use removeAttribute in browsers that support it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttributeNode</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-243" id="section-243">&#182;</a>
</div>
<p>Set corresponding property to false for boolean attributes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">rboolean</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">propName</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">)</span> <span class="k">in</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">propName</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">attrHooks</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">type</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-244" id="section-244">&#182;</a>
</div>
<p>We can't allow the type property to be changed (since it causes problems in IE)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">rtype</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;type property can&#39;t be changed&quot;</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">radioValue</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-245" id="section-245">&#182;</a>
</div>
<p>Setting the type on a radio button after the value resets the value in IE6-9
Reset value to it's default in case type is set after value
This is for element creation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="nx">value</span> <span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">tabIndex</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-246" id="section-246">&#182;</a>
</div>
<p>elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set
<a href='http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/'>http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">attributeNode</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span><span class="s2">&quot;tabIndex&quot;</span><span class="p">);</span>

        <span class="k">return</span> <span class="nx">attributeNode</span> <span class="o">&amp;&amp;</span> <span class="nx">attributeNode</span><span class="p">.</span><span class="nx">specified</span> <span class="o">?</span>
          <span class="nb">parseInt</span><span class="p">(</span> <span class="nx">attributeNode</span><span class="p">.</span><span class="nx">value</span><span class="p">,</span> <span class="mi">10</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">rfocusable</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">rclickable</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">href</span> <span class="o">?</span>
            <span class="mi">0</span> <span class="o">:</span>
            <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-247" id="section-247">&#182;</a>
</div>
<p>Use the value property for back compat
Use the formHook for button elements in IE6/7 (#1954)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">value</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">formHook</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">formHook</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">elem</span> <span class="o">?</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span> <span class="o">:</span>
          <span class="kc">null</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">formHook</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;button&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">formHook</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
        <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-248" id="section-248">&#182;</a>
</div>
<p>Does not return so that setAttribute is also used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">propFix</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">tabindex</span><span class="o">:</span> <span class="s2">&quot;tabIndex&quot;</span><span class="p">,</span>
    <span class="nx">readonly</span><span class="o">:</span> <span class="s2">&quot;readOnly&quot;</span><span class="p">,</span>
    <span class="s2">&quot;for&quot;</span><span class="o">:</span> <span class="s2">&quot;htmlFor&quot;</span><span class="p">,</span>
    <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;className&quot;</span><span class="p">,</span>
    <span class="nx">maxlength</span><span class="o">:</span> <span class="s2">&quot;maxLength&quot;</span><span class="p">,</span>
    <span class="nx">cellspacing</span><span class="o">:</span> <span class="s2">&quot;cellSpacing&quot;</span><span class="p">,</span>
    <span class="nx">cellpadding</span><span class="o">:</span> <span class="s2">&quot;cellPadding&quot;</span><span class="p">,</span>
    <span class="nx">rowspan</span><span class="o">:</span> <span class="s2">&quot;rowSpan&quot;</span><span class="p">,</span>
    <span class="nx">colspan</span><span class="o">:</span> <span class="s2">&quot;colSpan&quot;</span><span class="p">,</span>
    <span class="nx">usemap</span><span class="o">:</span> <span class="s2">&quot;useMap&quot;</span><span class="p">,</span>
    <span class="nx">frameborder</span><span class="o">:</span> <span class="s2">&quot;frameBorder&quot;</span><span class="p">,</span>
    <span class="nx">contenteditable</span><span class="o">:</span> <span class="s2">&quot;contentEditable&quot;</span>
  <span class="p">},</span>
  
  <span class="nx">prop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">nType</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-249" id="section-249">&#182;</a>
</div>
<p>don't get/set properties on text, comment and attribute nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">8</span> <span class="o">||</span> <span class="nx">nType</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">,</span>
      <span class="nx">notxml</span> <span class="o">=</span> <span class="nx">nType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">notxml</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-250" id="section-250">&#182;</a>
</div>
<p>Fix name and attach hooks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
      <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  
  <span class="nx">propHooks</span><span class="o">:</span> <span class="p">{}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-251" id="section-251">&#182;</a>
</div>
<p>Hook for boolean attributes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">boolHook</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-252" id="section-252">&#182;</a>
</div>
<p>Align boolean attributes with corresponding properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">prop</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="o">?</span>
      <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">:</span>
      <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">propName</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-253" id="section-253">&#182;</a>
</div>
<p>Remove boolean attributes when set to false</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeAttr</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-254" id="section-254">&#182;</a>
</div>
<p>value is true since we know at this point it's type boolean and not false
Set boolean attributes to the same name and set the DOM property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">propName</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">propName</span> <span class="k">in</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-255" id="section-255">&#182;</a>
</div>
<p>Only set the IDL specifically if it already exists on the element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">propName</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-256" id="section-256">&#182;</a>
</div>
<p>IE6/7 do not support getting/setting some attributes with get/setAttribute</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">getSetAttribute</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-257" id="section-257">&#182;</a>
</div>
<p>propFix is more comprehensive and contains all fixes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrFix</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propFix</span><span class="p">;</span>
  

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-258" id="section-258">&#182;</a>
</div>
<p>Use this for any attribute on a form in IE6/7</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">formHook</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">.</span><span class="nx">button</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-259" id="section-259">&#182;</a>
</div>
<p>Return undefined if nodeValue is empty string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">ret</span> <span class="o">&amp;&amp;</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">nodeValue</span> <span class="o">!==</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">nodeValue</span> <span class="o">:</span>
        <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-260" id="section-260">&#182;</a>
</div>
<p>Check form objects in IE (multiple bugs related)
Only use nodeValue if the attribute node exists on the form</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">nodeValue</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-261" id="section-261">&#182;</a>
</div>
<p>Set width and height to auto instead of 0 on empty string( Bug #8150 )
This is for removals</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span> <span class="p">{</span>
      <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;auto&quot;</span> <span class="p">);</span>
          <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-262" id="section-262">&#182;</a>
</div>
<p>Some attributes require a special call on IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">hrefNormalized</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;href&quot;</span><span class="p">,</span> <span class="s2">&quot;src&quot;</span><span class="p">,</span> <span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">undefined</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrHooks</span><span class="p">.</span><span class="nx">style</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-263" id="section-263">&#182;</a>
</div>
<p>Return undefined in the case of empty string
Normalize to lowercase since IE uppercases css property names</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">||</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">value</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-264" id="section-264">&#182;</a>
</div>
<p>Safari mis-reports the default selected property of an option
Accessing the parent's selectedIndex property fixes it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">optSelected</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">propHooks</span><span class="p">.</span><span class="nx">selected</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">parent</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-265" id="section-265">&#182;</a>
</div>
<p>Make sure that it also works with optgroups, see #5701</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">parent</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-266" id="section-266">&#182;</a>
</div>
<p>Radios and checkboxes getter/setter</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">checkOn</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;radio&quot;</span><span class="p">,</span> <span class="s2">&quot;checkbox&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-267" id="section-267">&#182;</a>
</div>
<p>Handle the case where in Webkit "" is returned instead of "on" if a value isn't specified</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;on&quot;</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">}</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;radio&quot;</span><span class="p">,</span> <span class="s2">&quot;checkbox&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">valHooks</span><span class="p">[</span> <span class="k">this</span> <span class="p">],</span> <span class="p">{</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">elem</span><span class="p">).</span><span class="nx">val</span><span class="p">(),</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>




<span class="kd">var</span> <span class="nx">rnamespaces</span> <span class="o">=</span> <span class="sr">/\.(.*)$/</span><span class="p">,</span>
  <span class="nx">rformElems</span> <span class="o">=</span> <span class="sr">/^(?:textarea|input|select)$/i</span><span class="p">,</span>
  <span class="nx">rperiod</span> <span class="o">=</span> <span class="sr">/\./g</span><span class="p">,</span>
  <span class="nx">rspaces</span> <span class="o">=</span> <span class="sr">/ /g</span><span class="p">,</span>
  <span class="nx">rescape</span> <span class="o">=</span> <span class="sr">/[^\w\s.|`]/g</span><span class="p">,</span>
  <span class="nx">fcleanup</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">nm</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">nm</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rescape</span><span class="p">,</span> <span class="s2">&quot;\\$&amp;&quot;</span><span class="p">);</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-268" id="section-268">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>A number of helper functions used for managing events.
Many of the ideas behind this code originated from
Dean Edwards' addEvent library.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-269" id="section-269">&#182;</a>
</div>
<p>Bind an event to an element
Original by Dean Edwards</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">handler</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="nx">returnFalse</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handler</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-270" id="section-270">&#182;</a>
</div>
<p>Fixes bug #7229. Fix recommended by jdalton</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">handleObjIn</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">handler</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handleObjIn</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">;</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="nx">handleObjIn</span><span class="p">.</span><span class="nx">handler</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-271" id="section-271">&#182;</a>
</div>
<p>Make sure that the function being executed has a unique ID</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-272" id="section-272">&#182;</a>
</div>
<p>Init the element's event structure</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">elemData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-273" id="section-273">&#182;</a>
</div>
<p>If no elemData is found then we must be trying to bind to one of the
banned noData elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elemData</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span><span class="p">,</span>
      <span class="nx">eventHandle</span> <span class="o">=</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="nx">events</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span> <span class="o">=</span> <span class="nx">eventHandle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-274" id="section-274">&#182;</a>
</div>
<p>Discard the second event of a jQuery.event.trigger() and
when an event is called after a page has unloaded</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">return</span> <span class="k">typeof</span> <span class="nx">jQuery</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">e</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="o">!==</span> <span class="nx">e</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="o">?</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">eventHandle</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="o">:</span>
          <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-275" id="section-275">&#182;</a>
</div>
<p>Add elem as a property of the handle function
This is to prevent a memory leak with non-native events in IE.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">eventHandle</span><span class="p">.</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-276" id="section-276">&#182;</a>
</div>
<p>Handle multiple events separated by a space
jQuery(...).bind("mouseover mouseout", fn);</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">types</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">);</span>

    <span class="kd">var</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">handleObjIn</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">handleObjIn</span><span class="p">)</span> <span class="o">:</span>
        <span class="p">{</span> <span class="nx">handler</span><span class="o">:</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span> <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-277" id="section-277">&#182;</a>
</div>
<p>Namespaced event handlers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">namespaces</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">sort</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">namespaces</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">handleObj</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handleObj</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-278" id="section-278">&#182;</a>
</div>
<p>Get the current list of functions bound to this event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">handlers</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">],</span>
        <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-279" id="section-279">&#182;</a>
</div>
<p>Init the event handler queue</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handlers</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handlers</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-280" id="section-280">&#182;</a>
</div>
<p>Check for a special event handler
Only use addEventListener/attachEvent if the special
events handler returns false</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">setup</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">setup</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-281" id="section-281">&#182;</a>
</div>
<p>Bind the global event handler to the element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">eventHandle</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">.</span><span class="nx">add</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">special</span><span class="p">.</span><span class="nx">add</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">handleObj</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-282" id="section-282">&#182;</a>
</div>
<p>Add the function to the element's handler list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">handlers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">handleObj</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-283" id="section-283">&#182;</a>
</div>
<p>Keep track of which events have been used, for event optimization</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">global</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-284" id="section-284">&#182;</a>
</div>
<p>Nullify elem to prevent memory leaks in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">elem</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">global</span><span class="o">:</span> <span class="p">{},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-285" id="section-285">&#182;</a>
</div>
<p>Detach an event or set of events from an element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">pos</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-286" id="section-286">&#182;</a>
</div>
<p>don't do events on text and comment nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">handler</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="nx">returnFalse</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">all</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">namespace</span><span class="p">,</span> <span class="nx">special</span><span class="p">,</span> <span class="nx">eventType</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="nx">origType</span><span class="p">,</span>
      <span class="nx">elemData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">hasData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">),</span>
      <span class="nx">events</span> <span class="o">=</span> <span class="nx">elemData</span> <span class="o">&amp;&amp;</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elemData</span> <span class="o">||</span> <span class="o">!</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-287" id="section-287">&#182;</a>
</div>
<p>types is actually an event object here</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">types</span> <span class="o">&amp;&amp;</span> <span class="nx">types</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">handler</span><span class="p">;</span>
      <span class="nx">types</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-288" id="section-288">&#182;</a>
</div>
<p>Unbind all events for the element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">types</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">types</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">types</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;.&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">types</span> <span class="o">=</span> <span class="nx">types</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="nx">types</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-289" id="section-289">&#182;</a>
</div>
<p>Handle multiple events separated by a space
jQuery(...).unbind("mouseover mouseout", fn);</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">types</span> <span class="o">=</span> <span class="nx">types</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">origType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nx">handleObj</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="nx">all</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">namespaces</span> <span class="o">=</span> <span class="p">[];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">all</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-290" id="section-290">&#182;</a>
</div>
<p>Namespaced event handlers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">namespaces</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>

        <span class="nx">namespace</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(^|\\.)&quot;</span> <span class="o">+</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">sort</span><span class="p">(),</span> <span class="nx">fcleanup</span> <span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\.(?:.*\\.)?&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(\\.|$)&quot;</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">eventType</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">eventType</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">handler</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">eventType</span><span class="p">[</span> <span class="nx">j</span> <span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">all</span> <span class="o">||</span> <span class="nx">namespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">origType</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">,</span> <span class="nx">j</span> <span class="p">);</span>
            <span class="nx">eventType</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">j</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">pos</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">eventType</span><span class="p">[</span> <span class="nx">j</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">===</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-291" id="section-291">&#182;</a>
</div>
<p>remove the given handler for the given type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">all</span> <span class="o">||</span> <span class="nx">namespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">pos</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">eventType</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">j</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">.</span><span class="nx">remove</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">special</span><span class="p">.</span><span class="nx">remove</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">handleObj</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">pos</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-292" id="section-292">&#182;</a>
</div>
<p>remove generic event handler if no more handlers exist</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">pos</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">eventType</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">teardown</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">teardown</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">namespaces</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">ret</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">delete</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-293" id="section-293">&#182;</a>
</div>
<p>Remove the expando if it's no longer used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handle</span><span class="p">.</span><span class="nx">elem</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">delete</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span>
      <span class="k">delete</span> <span class="nx">elemData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">elemData</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-294" id="section-294">&#182;</a>
</div>
<p>Events that are safe to short-circuit if no handlers are attached.
Native DOM events should not be added, they may have inline handlers.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">customEvent</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;getData&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;setData&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;changeData&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>

  <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">onlyHandlers</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-295" id="section-295">&#182;</a>
</div>
<p>Event object or event type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">event</span><span class="p">,</span>
      <span class="nx">namespaces</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">exclusive</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;!&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-296" id="section-296">&#182;</a>
</div>
<p>Exclusive events trigger only for the exact event (no namespaces)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
      <span class="nx">exclusive</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-297" id="section-297">&#182;</a>
</div>
<p>Namespaced trigger; create a regexp to match event type in handle()</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">namespaces</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">namespaces</span><span class="p">.</span><span class="nx">sort</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">customEvent</span><span class="p">[</span> <span class="nx">type</span> <span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">global</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-298" id="section-298">&#182;</a>
</div>
<p>No jQuery handlers for this event type, and it can't have inline handlers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-299" id="section-299">&#182;</a>
</div>
<p>Caller can pass in an Event, Object, or just an event type string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">event</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">event</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-300" id="section-300">&#182;</a>
</div>
<p>jQuery.Event object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">event</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">?</span> <span class="nx">event</span> <span class="o">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-301" id="section-301">&#182;</a>
</div>
<p>Object literal</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">event</span> <span class="p">)</span> <span class="o">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-302" id="section-302">&#182;</a>
</div>
<p>Just the event type (string)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">type</span> <span class="p">);</span>

    <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">exclusive</span> <span class="o">=</span> <span class="nx">exclusive</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span> <span class="o">=</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">namespace_re</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(^|\\.)&quot;</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\.(?:.*\\.)?&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(\\.|$)&quot;</span><span class="p">);</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-303" id="section-303">&#182;</a>
</div>
<p>triggerHandler() and global events don't bubble or run the default action</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">onlyHandlers</span> <span class="o">||</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-304" id="section-304">&#182;</a>
</div>
<p>Handle a global trigger</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-305" id="section-305">&#182;</a>
</div>
<p>TODO: Stop taunting the data cache; remove global events and always attach to document</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-306" id="section-306">&#182;</a>
</div>
<p>internalKey variable is just used to make it easier to find
and potentially change this stuff later; currently it just
points to jQuery.expando</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">internalKey</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span>
          <span class="nx">internalCache</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">internalCache</span> <span class="o">&amp;&amp;</span> <span class="nx">internalCache</span><span class="p">.</span><span class="nx">events</span> <span class="o">&amp;&amp;</span> <span class="nx">internalCache</span><span class="p">.</span><span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">internalCache</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-307" id="section-307">&#182;</a>
</div>
<p>Don't do events on text and comment nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-308" id="section-308">&#182;</a>
</div>
<p>Clean up the event in case it is being reused</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">event</span><span class="p">.</span><span class="nx">result</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-309" id="section-309">&#182;</a>
</div>
<p>Clone any incoming data and prepend the event, creating the handler arg list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">:</span> <span class="p">[];</span>
    <span class="nx">data</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">event</span> <span class="p">);</span>

    <span class="kd">var</span> <span class="nx">cur</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-310" id="section-310">&#182;</a>
</div>
<p>IE doesn't like method names with a colon (#3533, #8272)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">ontype</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-311" id="section-311">&#182;</a>
</div>
<p>Fire event on the current element, then bubble up the DOM tree</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">do</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="s2">&quot;handle&quot;</span> <span class="p">);</span>

      <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-312" id="section-312">&#182;</a>
</div>
<p>Trigger an inline bound script</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">ontype</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">].</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">result</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-313" id="section-313">&#182;</a>
</div>
<p>Bubble up to document, then to window</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">||</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">cur</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">&amp;&amp;</span> <span class="nb">window</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isPropagationStopped</span><span class="p">()</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-314" id="section-314">&#182;</a>
</div>
<p>If nobody prevented the default action, do it now</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">isDefaultPrevented</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">old</span><span class="p">,</span>
        <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">{};</span>

      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">special</span><span class="p">.</span><span class="nx">_default</span> <span class="o">||</span> <span class="nx">special</span><span class="p">.</span><span class="nx">_default</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span> <span class="nx">event</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="o">!</span><span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;click&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span> <span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">acceptData</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-315" id="section-315">&#182;</a>
</div>
<p>Call a native DOM method on the target with the same name name as the event.
Can't use an .isFunction)() check here because IE6/7 fails that test.
IE&lt;9 dies on focus to hidden element (#1486), may want to revisit a try/catch.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">try</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">ontype</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-316" id="section-316">&#182;</a>
</div>
<p>Don't re-trigger an onFOO event when we call its FOO() method</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">old</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">];</span>

            <span class="k">if</span> <span class="p">(</span> <span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]();</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span> <span class="nx">ieError</span> <span class="p">)</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">[</span> <span class="nx">ontype</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">old</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">triggered</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">handle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">event</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fix</span><span class="p">(</span> <span class="nx">event</span> <span class="o">||</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-317" id="section-317">&#182;</a>
</div>
<p>Snapshot the handlers list since a called handler may add/remove events.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">handlers</span> <span class="o">=</span> <span class="p">((</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span> <span class="p">)</span> <span class="o">||</span> <span class="p">{})[</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span>
      <span class="nx">run_all</span> <span class="o">=</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">exclusive</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span><span class="p">,</span>
      <span class="nx">args</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">arguments</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-318" id="section-318">&#182;</a>
</div>
<p>Use the fix-ed Event rather than the (read-only) native event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">handlers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">handlers</span><span class="p">[</span> <span class="nx">j</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-319" id="section-319">&#182;</a>
</div>
<p>Triggered event must 1) be non-exclusive and have no namespace, or
2) have namespace(s) a subset or equal to those in the bound event.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">run_all</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">namespace_re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-320" id="section-320">&#182;</a>
</div>
<p>Pass in a reference to the handler function itself
So that we can later remove it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">event</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">;</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">;</span>

        <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">args</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">event</span><span class="p">.</span><span class="nx">result</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isImmediatePropagationStopped</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">result</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">props</span><span class="o">:</span> <span class="s2">&quot;altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span>

  <span class="nx">fix</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-321" id="section-321">&#182;</a>
</div>
<p>store a copy of the original event object
and "clone" to set read-only properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">originalEvent</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
    <span class="nx">event</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">originalEvent</span> <span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">prop</span><span class="p">;</span> <span class="nx">i</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">prop</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">[</span> <span class="o">--</span><span class="nx">i</span> <span class="p">];</span>
      <span class="nx">event</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">originalEvent</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">];</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-322" id="section-322">&#182;</a>
</div>
<p>Fix target property, if necessary</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-323" id="section-323">&#182;</a>
</div>
<p>Fixes #1925 where srcElement might not be defined either</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">srcElement</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-324" id="section-324">&#182;</a>
</div>
<p>check if target is a textnode (safari)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-325" id="section-325">&#182;</a>
</div>
<p>Add relatedTarget, if necessary</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">fromElement</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">fromElement</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">?</span> <span class="nx">event</span><span class="p">.</span><span class="nx">toElement</span> <span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">fromElement</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-326" id="section-326">&#182;</a>
</div>
<p>Calculate pageX/Y if missing and clientX/Y available</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">eventDocument</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span><span class="p">,</span>
        <span class="nx">doc</span> <span class="o">=</span> <span class="nx">eventDocument</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span>
        <span class="nx">body</span> <span class="o">=</span> <span class="nx">eventDocument</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>

      <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="p">(</span><span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="p">(</span><span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">scrollTop</span>  <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span>  <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">doc</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-327" id="section-327">&#182;</a>
</div>
<p>Add which for key events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">event</span><span class="p">.</span><span class="nx">charCode</span> <span class="o">:</span> <span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-328" id="section-328">&#182;</a>
</div>
<p>Add metaKey to non-Mac browsers (use ctrl for PC's and Meta for Macs)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">metaKey</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">ctrlKey</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-329" id="section-329">&#182;</a>
</div>
<p>Add which for click: 1 === left; 2 === middle; 3 === right
Note: button is not normalized, so don't use it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">which</span> <span class="o">=</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">2</span> <span class="o">?</span> <span class="mi">3</span> <span class="o">:</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">&amp;</span> <span class="mi">4</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">));</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-330" id="section-330">&#182;</a>
</div>
<p>Deprecated, use jQuery.guid instead</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">guid</span><span class="o">:</span> <span class="mi">1</span><span class="nx">E8</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-331" id="section-331">&#182;</a>
</div>
<p>Deprecated, use jQuery.proxy instead</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">proxy</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">proxy</span><span class="p">,</span>

  <span class="nx">special</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">ready</span><span class="o">:</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-332" id="section-332">&#182;</a>
</div>
<p>Make sure the ready event is setup</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">setup</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">bindReady</span><span class="p">,</span>
      <span class="nx">teardown</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noop</span>
    <span class="p">},</span>

    <span class="nx">live</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">handleObj</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span>
          <span class="nx">liveConvert</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">),</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="p">{</span><span class="nx">handler</span><span class="o">:</span> <span class="nx">liveHandler</span><span class="p">,</span> <span class="nx">guid</span><span class="o">:</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span><span class="p">})</span> <span class="p">);</span>
      <span class="p">},</span>

      <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">handleObj</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">liveConvert</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">),</span> <span class="nx">handleObj</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">beforeunload</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-333" id="section-333">&#182;</a>
</div>
<p>We only want to do this special case on windows</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">onbeforeunload</span> <span class="o">=</span> <span class="nx">eventHandle</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">},</span>

      <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">onbeforeunload</span> <span class="o">===</span> <span class="nx">eventHandle</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">onbeforeunload</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="o">?</span>
  <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span><span class="p">,</span> <span class="kc">false</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="o">:</span>
  <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">detachEvent</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span> <span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handle</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-334" id="section-334">&#182;</a>
</div>
<p>Allow instantiation without the 'new' keyword</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">props</span> <span class="p">);</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-335" id="section-335">&#182;</a>
</div>
<p>Event object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">src</span> <span class="o">&amp;&amp;</span> <span class="nx">src</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-336" id="section-336">&#182;</a>
</div>
<p>Events bubbling up the document may have been marked as prevented
by a handler lower down the tree; reflect the correct value.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">isDefaultPrevented</span> <span class="o">=</span> <span class="p">(</span><span class="nx">src</span><span class="p">.</span><span class="nx">defaultPrevented</span> <span class="o">||</span> <span class="nx">src</span><span class="p">.</span><span class="nx">returnValue</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span>
      <span class="nx">src</span><span class="p">.</span><span class="nx">getPreventDefault</span> <span class="o">&amp;&amp;</span> <span class="nx">src</span><span class="p">.</span><span class="nx">getPreventDefault</span><span class="p">())</span> <span class="o">?</span> <span class="nx">returnTrue</span> <span class="o">:</span> <span class="nx">returnFalse</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-337" id="section-337">&#182;</a>
</div>
<p>Event type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">src</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-338" id="section-338">&#182;</a>
</div>
<p>Put explicitly provided properties onto the event object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">props</span> <span class="p">);</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-339" id="section-339">&#182;</a>
</div>
<p>timeStamp is buggy for some events on Firefox(#3843)
So we won't rely on the native value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">this</span><span class="p">.</span><span class="nx">timeStamp</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-340" id="section-340">&#182;</a>
</div>
<p>Mark it as fixed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">this</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">returnFalse</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
<span class="kd">function</span> <span class="nx">returnTrue</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-341" id="section-341">&#182;</a>
</div>
<p>jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
<a href='http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html'>http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">Event</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">preventDefault</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isDefaultPrevented</span> <span class="o">=</span> <span class="nx">returnTrue</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-342" id="section-342">&#182;</a>
</div>
<p>if preventDefault exists run it on the original event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-343" id="section-343">&#182;</a>
</div>
<p>otherwise set the returnValue property of the original event to false (IE)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">returnValue</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">stopPropagation</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isPropagationStopped</span> <span class="o">=</span> <span class="nx">returnTrue</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-344" id="section-344">&#182;</a>
</div>
<p>if stopPropagation exists run it on the original event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-345" id="section-345">&#182;</a>
</div>
<p>otherwise set the cancelBubble property of the original event to true (IE)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">e</span><span class="p">.</span><span class="nx">cancelBubble</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">stopImmediatePropagation</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">isImmediatePropagationStopped</span> <span class="o">=</span> <span class="nx">returnTrue</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
  <span class="p">},</span>
  <span class="nx">isDefaultPrevented</span><span class="o">:</span> <span class="nx">returnFalse</span><span class="p">,</span>
  <span class="nx">isPropagationStopped</span><span class="o">:</span> <span class="nx">returnFalse</span><span class="p">,</span>
  <span class="nx">isImmediatePropagationStopped</span><span class="o">:</span> <span class="nx">returnFalse</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-346" id="section-346">&#182;</a>
</div>
<p>Checks if an event happened on an element within another element
Used in jQuery.event.special.mouseenter and mouseleave handlers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">var</span> <span class="nx">withinElement</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-347" id="section-347">&#182;</a>
</div>
<p>Check if mouse(over|out) are still within the same parent element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">related</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span><span class="p">,</span>
    <span class="nx">inside</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">eventType</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

  <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">related</span> <span class="o">!==</span> <span class="k">this</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">related</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">inside</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">related</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">inside</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>

      <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">eventType</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-348" id="section-348">&#182;</a>
</div>
<p>In case of event delegation, we only need to rename the event.type,
liveHandler will take care of the rest.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">delegate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-349" id="section-349">&#182;</a>
</div>
<p>Create mouseenter and mouseleave events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nx">mouseenter</span><span class="o">:</span> <span class="s2">&quot;mouseover&quot;</span><span class="p">,</span>
  <span class="nx">mouseleave</span><span class="o">:</span> <span class="s2">&quot;mouseout&quot;</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">fix</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">orig</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">fix</span><span class="p">,</span> <span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">selector</span> <span class="o">?</span> <span class="nx">delegate</span> <span class="o">:</span> <span class="nx">withinElement</span><span class="p">,</span> <span class="nx">orig</span> <span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">fix</span><span class="p">,</span> <span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">selector</span> <span class="o">?</span> <span class="nx">delegate</span> <span class="o">:</span> <span class="nx">withinElement</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-350" id="section-350">&#182;</a>
</div>
<p>submit delegation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">submitBubbles</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">submit</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">namespaces</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;form&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;click.specialSubmit&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span>
            <span class="nx">type</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;submit&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;image&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;submit&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">});</span>

        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;keypress.specialSubmit&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span>
            <span class="nx">type</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;text&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;password&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">13</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;submit&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">});</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">namespaces</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;.specialSubmit&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-351" id="section-351">&#182;</a>
</div>
<p>change delegation, happens here so we have bind.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">changeBubbles</span> <span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">changeFilters</span><span class="p">,</span>

  <span class="nx">getVal</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;select-multiple&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">selectedIndex</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">selected</span><span class="p">;</span>
        <span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span> <span class="o">:</span>
        <span class="s2">&quot;&quot;</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;select&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">val</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">testChange</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">testChange</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">val</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">readOnly</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;_change_data&quot;</span> <span class="p">);</span>
    <span class="nx">val</span> <span class="o">=</span> <span class="nx">getVal</span><span class="p">(</span><span class="nx">elem</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-352" id="section-352">&#182;</a>
</div>
<p>the current data will be also retrieved by beforeactivate</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;focusout&quot;</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;radio&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;_change_data&quot;</span><span class="p">,</span> <span class="nx">val</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">val</span> <span class="o">===</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;change&quot;</span><span class="p">;</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">liveFired</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">change</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">filters</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">focusout</span><span class="o">:</span> <span class="nx">testChange</span><span class="p">,</span>

      <span class="nx">beforedeactivate</span><span class="o">:</span> <span class="nx">testChange</span><span class="p">,</span>

      <span class="nx">click</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;select&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">testChange</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">e</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-353" id="section-353">&#182;</a>
</div>
<p>Change has to be called before submit
Keydown will be called before keypress, which is used in submit-event delegation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">keydown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">13</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;textarea&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span>
          <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">32</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span><span class="p">))</span> <span class="o">||</span>
          <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;select-multiple&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">testChange</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">e</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-354" id="section-354">&#182;</a>
</div>
<p>Beforeactivate happens also before the previous element is blurred
with this event you can't trigger a change event, but you can store
information</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">beforeactivate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;_change_data&quot;</span><span class="p">,</span> <span class="nx">getVal</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">namespaces</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;file&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">changeFilters</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;.specialChange&quot;</span><span class="p">,</span> <span class="nx">changeFilters</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">namespaces</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;.specialChange&quot;</span> <span class="p">);</span>

      <span class="k">return</span> <span class="nx">rformElems</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">changeFilters</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">.</span><span class="nx">change</span><span class="p">.</span><span class="nx">filters</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-355" id="section-355">&#182;</a>
</div>
<p>Handle when the input is .focus()'d</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">changeFilters</span><span class="p">.</span><span class="nx">focus</span> <span class="o">=</span> <span class="nx">changeFilters</span><span class="p">.</span><span class="nx">beforeactivate</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">trigger</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">args</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-356" id="section-356">&#182;</a>
</div>
<p>Piggyback on a donor event to simulate a different one.
Fake originalEvent to avoid donor's stopPropagation, but if the
simulated event prevents default then we do the same on the donor.
Don't pass args or remember liveFired; they apply to the donor event.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">args</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">);</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">liveFired</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">event</span> <span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isDefaultPrevented</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">args</span><span class="p">[</span> <span class="mi">0</span> <span class="p">].</span><span class="nx">preventDefault</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-357" id="section-357">&#182;</a>
</div>
<p>Create "bubbling" focus and blur events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">focusinBubbles</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span> <span class="nx">focus</span><span class="o">:</span> <span class="s2">&quot;focusin&quot;</span><span class="p">,</span> <span class="nx">blur</span><span class="o">:</span> <span class="s2">&quot;focusout&quot;</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">fix</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-358" id="section-358">&#182;</a>
</div>
<p>Attach a single capturing handler while someone wants focusin/focusout</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">attaches</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">[</span> <span class="nx">fix</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">setup</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">attaches</span><span class="o">++</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nx">teardown</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">--</span><span class="nx">attaches</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nb">document</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span> <span class="nx">orig</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="kd">function</span> <span class="nx">handler</span><span class="p">(</span> <span class="nx">donor</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-359" id="section-359">&#182;</a>
</div>
<p>Donor event is always a native one; fix it and switch its type.
Let focusin/out handler cancel the donor focus/blur event.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">fix</span><span class="p">(</span> <span class="nx">donor</span> <span class="p">);</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">fix</span><span class="p">;</span>
      <span class="nx">e</span><span class="p">.</span><span class="nx">originalEvent</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">e</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">e</span><span class="p">.</span><span class="nx">isDefaultPrevented</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">donor</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span><span class="s2">&quot;bind&quot;</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">handler</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-360" id="section-360">&#182;</a>
</div>
<p>Handle object literals</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">[</span> <span class="nx">name</span> <span class="p">](</span><span class="nx">key</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">type</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">fn</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">||</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;one&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">unbind</span><span class="p">(</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">handler</span> <span class="p">);</span>
        <span class="k">return</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
      <span class="p">};</span>
      <span class="nx">handler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">handler</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;unload&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">name</span> <span class="o">!==</span> <span class="s2">&quot;one&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">one</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="nx">data</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">unbind</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-361" id="section-361">&#182;</a>
</div>
<p>Handle object literals</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">type</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">type</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">delegate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">live</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">undelegate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span> <span class="s2">&quot;live&quot;</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">die</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">trigger</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">triggerHandler</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="kc">true</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-362" id="section-362">&#182;</a>
</div>
<p>Save reference to arguments for access in closure</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">,</span>
      <span class="nx">guid</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">,</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">toggler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-363" id="section-363">&#182;</a>
</div>
<p>Figure out which function to execute</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">lastToggle</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;lastToggle&quot;</span> <span class="o">+</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">%</span> <span class="nx">i</span><span class="p">;</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;lastToggle&quot;</span> <span class="o">+</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">guid</span><span class="p">,</span> <span class="nx">lastToggle</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-364" id="section-364">&#182;</a>
</div>
<p>Make sure that clicks stop</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-365" id="section-365">&#182;</a>
</div>
<p>and execute the function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">return</span> <span class="nx">args</span><span class="p">[</span> <span class="nx">lastToggle</span> <span class="p">].</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">)</span> <span class="o">||</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-366" id="section-366">&#182;</a>
</div>
<p>link all the functions, so any of them can unbind this click handler</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">toggler</span><span class="p">.</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">guid</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">args</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">].</span><span class="nx">guid</span> <span class="o">=</span> <span class="nx">guid</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span> <span class="nx">toggler</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">hover</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fnOver</span><span class="p">,</span> <span class="nx">fnOut</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">mouseenter</span><span class="p">(</span> <span class="nx">fnOver</span> <span class="p">).</span><span class="nx">mouseleave</span><span class="p">(</span> <span class="nx">fnOut</span> <span class="o">||</span> <span class="nx">fnOver</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">liveMap</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">focus</span><span class="o">:</span> <span class="s2">&quot;focusin&quot;</span><span class="p">,</span>
  <span class="nx">blur</span><span class="o">:</span> <span class="s2">&quot;focusout&quot;</span><span class="p">,</span>
  <span class="nx">mouseenter</span><span class="o">:</span> <span class="s2">&quot;mouseover&quot;</span><span class="p">,</span>
  <span class="nx">mouseleave</span><span class="o">:</span> <span class="s2">&quot;mouseout&quot;</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span><span class="s2">&quot;live&quot;</span><span class="p">,</span> <span class="s2">&quot;die&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">types</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">origSelector</span> <span class="cm">/* Internal Use Only */</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="nx">preType</span><span class="p">,</span>
      <span class="nx">selector</span> <span class="o">=</span> <span class="nx">origSelector</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span>
      <span class="nx">context</span> <span class="o">=</span> <span class="nx">origSelector</span> <span class="o">?</span> <span class="k">this</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">types</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">types</span><span class="p">.</span><span class="nx">preventDefault</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">types</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">context</span><span class="p">[</span> <span class="nx">name</span> <span class="p">](</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">types</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">selector</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;die&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">types</span> <span class="o">&amp;&amp;</span>
          <span class="nx">origSelector</span> <span class="o">&amp;&amp;</span> <span class="nx">origSelector</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;.&quot;</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nx">context</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span> <span class="nx">origSelector</span> <span class="p">);</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">||</span> <span class="nx">returnFalse</span><span class="p">;</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">types</span> <span class="o">=</span> <span class="p">(</span><span class="nx">types</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">);</span>

    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">types</span><span class="p">[</span> <span class="nx">i</span><span class="o">++</span> <span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">match</span> <span class="o">=</span> <span class="nx">rnamespaces</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">type</span> <span class="p">);</span>
      <span class="nx">namespaces</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="p">)</span>  <span class="p">{</span>
        <span class="nx">namespaces</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rnamespaces</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;hover&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">types</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="s2">&quot;mouseenter&quot;</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">,</span> <span class="s2">&quot;mouseleave&quot;</span> <span class="o">+</span> <span class="nx">namespaces</span> <span class="p">);</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">preType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">liveMap</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">types</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">liveMap</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">+</span> <span class="nx">namespaces</span> <span class="p">);</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="p">(</span><span class="nx">liveMap</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">type</span><span class="p">)</span> <span class="o">+</span> <span class="nx">namespaces</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;live&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-367" id="section-367">&#182;</a>
</div>
<p>bind live handler</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">context</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="s2">&quot;live.&quot;</span> <span class="o">+</span> <span class="nx">liveConvert</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">),</span>
            <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">selector</span><span class="o">:</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">handler</span><span class="o">:</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">origType</span><span class="o">:</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">origHandler</span><span class="o">:</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">preType</span><span class="o">:</span> <span class="nx">preType</span> <span class="p">}</span> <span class="p">);</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-368" id="section-368">&#182;</a>
</div>
<p>unbind live handler</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">context</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span> <span class="s2">&quot;live.&quot;</span> <span class="o">+</span> <span class="nx">liveConvert</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">),</span> <span class="nx">fn</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">liveHandler</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">maxLevel</span><span class="p">,</span> <span class="nx">related</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">close</span><span class="p">,</span> <span class="nx">namespace</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span>
    <span class="nx">elems</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">selectors</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">events</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;events&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-369" id="section-369">&#182;</a>
</div>
<p>Make sure we avoid non-left-click bubbling in Firefox (#3861) and disabled elements in IE (#6911)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">liveFired</span> <span class="o">===</span> <span class="k">this</span> <span class="o">||</span> <span class="o">!</span><span class="nx">events</span> <span class="o">||</span> <span class="o">!</span><span class="nx">events</span><span class="p">.</span><span class="nx">live</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">button</span> <span class="o">&amp;&amp;</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;click&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">namespace</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(^|\\.)&quot;</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">namespace</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\\.(?:.*\\.)?&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(\\.|$)&quot;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">event</span><span class="p">.</span><span class="nx">liveFired</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">live</span> <span class="o">=</span> <span class="nx">events</span><span class="p">.</span><span class="nx">live</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

  <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">live</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">live</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">origType</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rnamespaces</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">selectors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">live</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">j</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">match</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="p">).</span><span class="nx">closest</span><span class="p">(</span> <span class="nx">selectors</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="p">);</span>

  <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">close</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">live</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">live</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">close</span><span class="p">.</span><span class="nx">selector</span> <span class="o">===</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">namespace</span> <span class="o">||</span> <span class="nx">namespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">namespace</span> <span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">close</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">disabled</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span> <span class="o">=</span> <span class="nx">close</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>
        <span class="nx">related</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-370" id="section-370">&#182;</a>
</div>
<p>Those two events require additional checking</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">preType</span> <span class="o">===</span> <span class="s2">&quot;mouseenter&quot;</span> <span class="o">||</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">preType</span> <span class="o">===</span> <span class="s2">&quot;mouseleave&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">preType</span><span class="p">;</span>
          <span class="nx">related</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span> <span class="p">).</span><span class="nx">closest</span><span class="p">(</span> <span class="nx">handleObj</span><span class="p">.</span><span class="nx">selector</span> <span class="p">)[</span><span class="mi">0</span><span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-371" id="section-371">&#182;</a>
</div>
<p>Make sure not to accidentally match a child element with the same selector</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">related</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">related</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">related</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">related</span> <span class="o">||</span> <span class="nx">related</span> <span class="o">!==</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elems</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nx">elem</span><span class="o">:</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">handleObj</span><span class="o">:</span> <span class="nx">handleObj</span><span class="p">,</span> <span class="nx">level</span><span class="o">:</span> <span class="nx">close</span><span class="p">.</span><span class="nx">level</span> <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">match</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">maxLevel</span> <span class="o">&amp;&amp;</span> <span class="nx">match</span><span class="p">.</span><span class="nx">level</span> <span class="o">&gt;</span> <span class="nx">maxLevel</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">handleObj</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">;</span>

    <span class="nx">ret</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">handleObj</span><span class="p">.</span><span class="nx">origHandler</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">match</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isPropagationStopped</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">maxLevel</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">level</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">stop</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">event</span><span class="p">.</span><span class="nx">isImmediatePropagationStopped</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">stop</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">liveConvert</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="nx">type</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;*&quot;</span> <span class="o">?</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rperiod</span><span class="p">,</span> <span class="s2">&quot;`&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rspaces</span><span class="p">,</span> <span class="s2">&quot;&amp;&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">(</span><span class="s2">&quot;blur focus focusin focusout load resize scroll unload click dblclick &quot;</span> <span class="o">+</span>
  <span class="s2">&quot;mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave &quot;</span> <span class="o">+</span>
  <span class="s2">&quot;change select submit keydown keypress keyup error&quot;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-372" id="section-372">&#182;</a>
</div>
<p>Handle event binding</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fn</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
  <span class="p">};</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrFn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">attrFn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>




</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-373" id="section-373">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>!
Sizzle CSS Selector Engine
 Copyright 2011, The Dojo Foundation
 Released under the MIT, BSD, and GPL Licenses.
 More information: <a href='http://sizzlejs.com/'>http://sizzlejs.com/</a></p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

<span class="kd">var</span> <span class="nx">chunker</span> <span class="o">=</span> <span class="sr">/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|[&#39;&quot;][^&#39;&quot;]*[&#39;&quot;]|[^\[\]&#39;&quot;]+)+\]|\\.|[^ &gt;+~,(\[\\]+)+|[&gt;+~])(\s*,\s*)?((?:.|\r|\n)*)/g</span><span class="p">,</span>
  <span class="nx">done</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">toString</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span><span class="p">,</span>
  <span class="nx">hasDuplicate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">baseHasDuplicate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nx">rBackslash</span> <span class="o">=</span> <span class="sr">/\\/g</span><span class="p">,</span>
  <span class="nx">rNonWord</span> <span class="o">=</span> <span class="sr">/\W/</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-374" id="section-374">&#182;</a>
</div>
<p>Here we check if the JavaScript engine is using some sort of
optimization where it does not always call our comparision
function. If that is the case, discard the hasDuplicate value.
  Thus far that includes Google Chrome.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">].</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">baseHasDuplicate</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">Sizzle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">results</span> <span class="o">=</span> <span class="nx">results</span> <span class="o">||</span> <span class="p">[];</span>
  <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">origContext</span> <span class="o">=</span> <span class="nx">context</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
  <span class="p">}</span>
  
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">selector</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">set</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">extra</span><span class="p">,</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">pop</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span>
    <span class="nx">prune</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">contextXML</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span><span class="p">(</span> <span class="nx">context</span> <span class="p">),</span>
    <span class="nx">parts</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">soFar</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">;</span>
  

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-375" id="section-375">&#182;</a>
</div>
<p>Reset the position of the chunker regexp (start from head)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">do</span> <span class="p">{</span>
    <span class="nx">chunker</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
    <span class="nx">m</span> <span class="o">=</span> <span class="nx">chunker</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">soFar</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">m</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">soFar</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    
      <span class="nx">parts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>
    
      <span class="k">if</span> <span class="p">(</span> <span class="nx">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">extra</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">while</span> <span class="p">(</span> <span class="nx">m</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">origPOS</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">set</span> <span class="o">=</span> <span class="nx">posProcess</span><span class="p">(</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">context</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">set</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">?</span>
        <span class="p">[</span> <span class="nx">context</span> <span class="p">]</span> <span class="o">:</span>
        <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span> <span class="nx">context</span> <span class="p">);</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">selector</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">selector</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">selector</span> <span class="o">+=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
        <span class="p">}</span>
        
        <span class="nx">set</span> <span class="o">=</span> <span class="nx">posProcess</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">set</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-376" id="section-376">&#182;</a>
</div>
<p>Take a shortcut and set the context if the root selector is an ID
(but not if it'll be faster if the inner selector is an ID)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">seed</span> <span class="o">&amp;&amp;</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">contextXML</span> <span class="o">&amp;&amp;</span>
        <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">ID</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">ID</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">parts</span><span class="p">[</span><span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">contextXML</span> <span class="p">);</span>
      <span class="nx">context</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">expr</span> <span class="o">?</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">set</span> <span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">set</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">seed</span> <span class="o">?</span>
        <span class="p">{</span> <span class="nx">expr</span><span class="o">:</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">pop</span><span class="p">(),</span> <span class="nx">set</span><span class="o">:</span> <span class="nx">makeArray</span><span class="p">(</span><span class="nx">seed</span><span class="p">)</span> <span class="p">}</span> <span class="o">:</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">pop</span><span class="p">(),</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;~&quot;</span> <span class="o">||</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">?</span> <span class="nx">context</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">:</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">contextXML</span> <span class="p">);</span>

      <span class="nx">set</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">expr</span> <span class="o">?</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">set</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">set</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">checkSet</span> <span class="o">=</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="nx">set</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">prune</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">cur</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="nx">pop</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">cur</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">cur</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">pop</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">pop</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">pop</span> <span class="o">=</span> <span class="nx">context</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span> <span class="nx">cur</span> <span class="p">](</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">pop</span><span class="p">,</span> <span class="nx">contextXML</span> <span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">checkSet</span> <span class="o">=</span> <span class="nx">parts</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">checkSet</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">checkSet</span> <span class="o">=</span> <span class="nx">set</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">checkSet</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">cur</span> <span class="o">||</span> <span class="nx">selector</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">checkSet</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;[object Array]&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">prune</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">checkSet</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="kc">true</span> <span class="o">||</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">set</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">set</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">makeArray</span><span class="p">(</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">results</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">extra</span><span class="p">,</span> <span class="nx">origContext</span><span class="p">,</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">);</span>
    <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">uniqueSort</span><span class="p">(</span> <span class="nx">results</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">uniqueSort</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">sortOrder</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">hasDuplicate</span> <span class="o">=</span> <span class="nx">baseHasDuplicate</span><span class="p">;</span>
    <span class="nx">results</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span> <span class="nx">sortOrder</span> <span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">hasDuplicate</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">results</span><span class="p">[</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">results</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="nx">i</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">matches</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">set</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">set</span> <span class="p">);</span>
<span class="p">};</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">matchesSelector</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">expr</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="nx">node</span><span class="p">]</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">find</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">set</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">expr</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">order</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">match</span><span class="p">,</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">order</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    
    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">leftMatch</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">match</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">left</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span> <span class="nx">left</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;\\&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
        <span class="nx">set</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">[</span> <span class="nx">type</span> <span class="p">](</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">set</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">expr</span> <span class="o">=</span> <span class="nx">expr</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">[</span> <span class="nx">type</span> <span class="p">],</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">set</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">set</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">?</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="o">:</span>
      <span class="p">[];</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span> <span class="nx">set</span><span class="o">:</span> <span class="nx">set</span><span class="p">,</span> <span class="nx">expr</span><span class="o">:</span> <span class="nx">expr</span> <span class="p">};</span>
<span class="p">};</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">set</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="nx">not</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">anyFound</span><span class="p">,</span>
    <span class="nx">old</span> <span class="o">=</span> <span class="nx">expr</span><span class="p">,</span>
    <span class="nx">result</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">curLoop</span> <span class="o">=</span> <span class="nx">set</span><span class="p">,</span>
    <span class="nx">isXMLFilter</span> <span class="o">=</span> <span class="nx">set</span> <span class="o">&amp;&amp;</span> <span class="nx">set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span><span class="p">(</span> <span class="nx">set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>

  <span class="k">while</span> <span class="p">(</span> <span class="nx">expr</span> <span class="o">&amp;&amp;</span> <span class="nx">set</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">filter</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">leftMatch</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">))</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">found</span><span class="p">,</span> <span class="nx">item</span><span class="p">,</span>
          <span class="nx">filter</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">filter</span><span class="p">[</span> <span class="nx">type</span> <span class="p">],</span>
          <span class="nx">left</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

        <span class="nx">anyFound</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

        <span class="nx">match</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">left</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span> <span class="nx">left</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;\\&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">continue</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">curLoop</span> <span class="o">===</span> <span class="nx">result</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">result</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">preFilter</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">match</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">preFilter</span><span class="p">[</span> <span class="nx">type</span> <span class="p">](</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">curLoop</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">not</span><span class="p">,</span> <span class="nx">isXMLFilter</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">anyFound</span> <span class="o">=</span> <span class="nx">found</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">continue</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">(</span><span class="nx">item</span> <span class="o">=</span> <span class="nx">curLoop</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">item</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">found</span> <span class="o">=</span> <span class="nx">filter</span><span class="p">(</span> <span class="nx">item</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">curLoop</span> <span class="p">);</span>
              <span class="kd">var</span> <span class="nx">pass</span> <span class="o">=</span> <span class="nx">not</span> <span class="o">^</span> <span class="o">!!</span><span class="nx">found</span><span class="p">;</span>

              <span class="k">if</span> <span class="p">(</span> <span class="nx">inplace</span> <span class="o">&amp;&amp;</span> <span class="nx">found</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">pass</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">anyFound</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">curLoop</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
                <span class="p">}</span>

              <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">pass</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">item</span> <span class="p">);</span>
                <span class="nx">anyFound</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">found</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">inplace</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">curLoop</span> <span class="o">=</span> <span class="nx">result</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="nx">expr</span> <span class="o">=</span> <span class="nx">expr</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">[</span> <span class="nx">type</span> <span class="p">],</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">anyFound</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">[];</span>
          <span class="p">}</span>

          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-377" id="section-377">&#182;</a>
</div>
<p>Improper expression</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">expr</span> <span class="o">===</span> <span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">anyFound</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">old</span> <span class="o">=</span> <span class="nx">expr</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">curLoop</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">msg</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">throw</span> <span class="s2">&quot;Syntax error, unrecognized expression: &quot;</span> <span class="o">+</span> <span class="nx">msg</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">Expr</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">selectors</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">order</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;TAG&quot;</span> <span class="p">],</span>

  <span class="nx">match</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">ID</span><span class="o">:</span> <span class="sr">/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/</span><span class="p">,</span>
    <span class="nx">CLASS</span><span class="o">:</span> <span class="sr">/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/</span><span class="p">,</span>
    <span class="nx">NAME</span><span class="o">:</span> <span class="sr">/\[name=[&#39;&quot;]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)[&#39;&quot;]*\]/</span><span class="p">,</span>
    <span class="nx">ATTR</span><span class="o">:</span> <span class="sr">/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:([&#39;&quot;])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/</span><span class="p">,</span>
    <span class="nx">TAG</span><span class="o">:</span> <span class="sr">/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/</span><span class="p">,</span>
    <span class="nx">CHILD</span><span class="o">:</span> <span class="sr">/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/</span><span class="p">,</span>
    <span class="nx">POS</span><span class="o">:</span> <span class="sr">/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/</span><span class="p">,</span>
    <span class="nx">PSEUDO</span><span class="o">:</span> <span class="sr">/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\(([&#39;&quot;]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/</span>
  <span class="p">},</span>

  <span class="nx">leftMatch</span><span class="o">:</span> <span class="p">{},</span>

  <span class="nx">attrMap</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;class&quot;</span><span class="o">:</span> <span class="s2">&quot;className&quot;</span><span class="p">,</span>
    <span class="s2">&quot;for&quot;</span><span class="o">:</span> <span class="s2">&quot;htmlFor&quot;</span>
  <span class="p">},</span>

  <span class="nx">attrHandle</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">href</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;href&quot;</span> <span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">type</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;type&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">relative</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;+&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">checkSet</span><span class="p">,</span> <span class="nx">part</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">isPartStr</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">part</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="nx">isTag</span> <span class="o">=</span> <span class="nx">isPartStr</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rNonWord</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">part</span> <span class="p">),</span>
        <span class="nx">isPartStrNotTag</span> <span class="o">=</span> <span class="nx">isPartStr</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isTag</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">isTag</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">part</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">checkSet</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">previousSibling</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{}</span>

          <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">isPartStrNotTag</span> <span class="o">||</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">part</span> <span class="o">?</span>
            <span class="nx">elem</span> <span class="o">||</span> <span class="kc">false</span> <span class="o">:</span>
            <span class="nx">elem</span> <span class="o">===</span> <span class="nx">part</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">isPartStrNotTag</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="s2">&quot;&gt;&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">part</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span>
        <span class="nx">isPartStr</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">part</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">l</span> <span class="o">=</span> <span class="nx">checkSet</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">isPartStr</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rNonWord</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">part</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">part</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>

        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
            <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">part</span> <span class="o">?</span> <span class="nx">parent</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">isPartStr</span> <span class="o">?</span>
              <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">:</span>
              <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">===</span> <span class="nx">part</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">isPartStr</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="s2">&quot;&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">checkSet</span><span class="p">,</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">isXML</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">nodeCheck</span><span class="p">,</span>
        <span class="nx">doneName</span> <span class="o">=</span> <span class="nx">done</span><span class="o">++</span><span class="p">,</span>
        <span class="nx">checkFn</span> <span class="o">=</span> <span class="nx">dirCheck</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">part</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rNonWord</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">part</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">part</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
        <span class="nx">nodeCheck</span> <span class="o">=</span> <span class="nx">part</span><span class="p">;</span>
        <span class="nx">checkFn</span> <span class="o">=</span> <span class="nx">dirNodeCheck</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">checkFn</span><span class="p">(</span> <span class="s2">&quot;parentNode&quot;</span><span class="p">,</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">doneName</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">nodeCheck</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="s2">&quot;~&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">nodeCheck</span><span class="p">,</span>
        <span class="nx">doneName</span> <span class="o">=</span> <span class="nx">done</span><span class="o">++</span><span class="p">,</span>
        <span class="nx">checkFn</span> <span class="o">=</span> <span class="nx">dirCheck</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">part</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rNonWord</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">part</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">part</span> <span class="o">=</span> <span class="nx">part</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
        <span class="nx">nodeCheck</span> <span class="o">=</span> <span class="nx">part</span><span class="p">;</span>
        <span class="nx">checkFn</span> <span class="o">=</span> <span class="nx">dirNodeCheck</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">checkFn</span><span class="p">(</span> <span class="s2">&quot;previousSibling&quot;</span><span class="p">,</span> <span class="nx">part</span><span class="p">,</span> <span class="nx">doneName</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">nodeCheck</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">find</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">ID</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-378" id="section-378">&#182;</a>
</div>
<p>Check parentNode to catch when Blackberry 4.6 returns
nodes that are no longer in the document #6963</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">return</span> <span class="nx">m</span> <span class="o">&amp;&amp;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">?</span> <span class="p">[</span><span class="nx">m</span><span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">NAME</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[],</span>
          <span class="nx">results</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByName</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">TAG</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">preFilter</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">CLASS</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">curLoop</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">not</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">match</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">curLoop</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">not</span> <span class="o">^</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[\t\n\r]/g</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">inplace</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
            <span class="p">}</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">inplace</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">curLoop</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">ID</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">TAG</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">curLoop</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
    <span class="p">},</span>

    <span class="nx">CHILD</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;nth&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\+|\s*/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-379" id="section-379">&#182;</a>
</div>
<p>parse equations like 'even', 'odd', '5', '2n', '3n+2', '4n-1', '-n+6'</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">test</span> <span class="o">=</span> <span class="sr">/(-?)(\d*)(?:n([+\-]?\d*))?/</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span>
          <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;even&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;2n&quot;</span> <span class="o">||</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;odd&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;2n+1&quot;</span> <span class="o">||</span>
          <span class="o">!</span><span class="sr">/\D/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;0n+&quot;</span> <span class="o">+</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-380" id="section-380">&#182;</a>
</div>
<p>calculate the numbers (first)n+(last) including if they are negative</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">test</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="nx">test</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="mi">1</span><span class="p">))</span> <span class="o">-</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">test</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-381" id="section-381">&#182;</a>
</div>
<p>TODO: Move to normal caching system</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">done</span><span class="o">++</span><span class="p">;</span>

      <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">ATTR</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">curLoop</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">not</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
      
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isXML</span> <span class="o">&amp;&amp;</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrMap</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrMap</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-382" id="section-382">&#182;</a>
</div>
<p>Handle if an un-quoted value was used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">||</span> <span class="nx">match</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rBackslash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;~=&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">PSEUDO</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">curLoop</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">not</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;not&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-383" id="section-383">&#182;</a>
</div>
<p>If we're dealing with a complex expression, or a simple one</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">chunker</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="sr">/^\w/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">curLoop</span><span class="p">);</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nx">curLoop</span><span class="p">,</span> <span class="nx">inplace</span><span class="p">,</span> <span class="kc">true</span> <span class="o">^</span> <span class="nx">not</span><span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">inplace</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">result</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">ret</span> <span class="p">);</span>
          <span class="p">}</span>

          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">POS</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">CHILD</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">POS</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">match</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="kc">true</span> <span class="p">);</span>

      <span class="k">return</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  
  <span class="nx">filters</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">enabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;hidden&quot;</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">disabled</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">checked</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">checked</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span>
    
    <span class="nx">selected</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-384" id="section-384">&#182;</a>
</div>
<p>Accessing this property makes selected-by-default
options in Safari work properly</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">selectedIndex</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">selected</span> <span class="o">===</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">parent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">empty</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">has</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!!</span><span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nx">elem</span> <span class="p">).</span><span class="nx">length</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">header</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="sr">/h\d/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">attr</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;type&quot;</span> <span class="p">),</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-385" id="section-385">&#182;</a>
</div>
<p>IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc) 
use getAttribute instead to test this case</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;text&quot;</span> <span class="o">===</span> <span class="nx">type</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">attr</span> <span class="o">===</span> <span class="nx">type</span> <span class="o">||</span> <span class="nx">attr</span> <span class="o">===</span> <span class="kc">null</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">radio</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;radio&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">checkbox</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">file</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;file&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">password</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;password&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">submit</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;button&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;submit&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">image</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;image&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;button&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;reset&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">button</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;button&quot;</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;button&quot;</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">input</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="sr">/input|select|textarea|button/i</span><span class="p">).</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">focus</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">activeElement</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">setFilters</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">first</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">last</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">array</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">===</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">even</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">odd</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">lt</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">gt</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">nth</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span> <span class="o">===</span> <span class="nx">i</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">eq</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">0</span> <span class="o">===</span> <span class="nx">i</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nx">filter</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">PSEUDO</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">array</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nx">filter</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">filter</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">filter</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;contains&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">||</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">getText</span><span class="p">([</span> <span class="nx">elem</span> <span class="p">])</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;not&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">not</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">not</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">not</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">===</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">CHILD</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nx">node</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>

      <span class="k">switch</span> <span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s2">&quot;only&quot;</span><span class="o">:</span>
        <span class="k">case</span> <span class="s2">&quot;first&quot;</span><span class="o">:</span>
          <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">previousSibling</span><span class="p">)</span> <span class="p">)</span>  <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span> 
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> 
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;first&quot;</span> <span class="p">)</span> <span class="p">{</span> 
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span> 
          <span class="p">}</span>

          <span class="nx">node</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>

        <span class="k">case</span> <span class="s2">&quot;last&quot;</span><span class="o">:</span>
          <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)</span> <span class="p">)</span>  <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span> 
              <span class="k">return</span> <span class="kc">false</span><span class="p">;</span> 
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>

        <span class="k">case</span> <span class="s2">&quot;nth&quot;</span><span class="o">:</span>
          <span class="kd">var</span> <span class="nx">first</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="nx">last</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">first</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">last</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>
          
          <span class="kd">var</span> <span class="nx">doneName</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">parent</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
  
          <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">sizcache</span> <span class="o">!==</span> <span class="nx">doneName</span> <span class="o">||</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeIndex</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            
            <span class="k">for</span> <span class="p">(</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span> <span class="nx">node</span><span class="p">;</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">node</span><span class="p">.</span><span class="nx">nodeIndex</span> <span class="o">=</span> <span class="o">++</span><span class="nx">count</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span> 

            <span class="nx">parent</span><span class="p">.</span><span class="nx">sizcache</span> <span class="o">=</span> <span class="nx">doneName</span><span class="p">;</span>
          <span class="p">}</span>
          
          <span class="kd">var</span> <span class="nx">diff</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeIndex</span> <span class="o">-</span> <span class="nx">last</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">first</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">diff</span> <span class="o">===</span> <span class="mi">0</span><span class="p">;</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">(</span> <span class="nx">diff</span> <span class="o">%</span> <span class="nx">first</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">diff</span> <span class="o">/</span> <span class="nx">first</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">);</span>
          <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">ID</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">TAG</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">match</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">},</span>
    
    <span class="nx">CLASS</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">className</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">ATTR</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nx">result</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrHandle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">?</span>
          <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrHandle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">](</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">:</span>
          <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">?</span>
            <span class="nx">elem</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">:</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="nx">name</span> <span class="p">),</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="nx">result</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="nx">check</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>

      <span class="k">return</span> <span class="nx">result</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;!=&quot;</span> <span class="o">:</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span> <span class="o">===</span> <span class="nx">check</span> <span class="o">:</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;*=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">check</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">:</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;~=&quot;</span> <span class="o">?</span>
        <span class="p">(</span><span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">).</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">check</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">:</span>
        <span class="o">!</span><span class="nx">check</span> <span class="o">?</span>
        <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nx">result</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">:</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;!=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span> <span class="o">!==</span> <span class="nx">check</span> <span class="o">:</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;^=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">check</span><span class="p">)</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">:</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;$=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">check</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">===</span> <span class="nx">check</span> <span class="o">:</span>
        <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;|=&quot;</span> <span class="o">?</span>
        <span class="nx">value</span> <span class="o">===</span> <span class="nx">check</span> <span class="o">||</span> <span class="nx">value</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">check</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="nx">check</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">:</span>
        <span class="kc">false</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">POS</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">array</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="nx">filter</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">setFilters</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">filter</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">filter</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">origPOS</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">POS</span><span class="p">,</span>
  <span class="nx">fescape</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">all</span><span class="p">,</span> <span class="nx">num</span><span class="p">){</span>
    <span class="k">return</span> <span class="s2">&quot;\\&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">num</span> <span class="o">-</span> <span class="mi">0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">};</span>

<span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">source</span> <span class="o">+</span> <span class="p">(</span><span class="sr">/(?![^\[]*\])(?![^\(]*\))/</span><span class="p">.</span><span class="nx">source</span><span class="p">)</span> <span class="p">);</span>
  <span class="nx">Expr</span><span class="p">.</span><span class="nx">leftMatch</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="sr">/(^(?:.|\r|\n)*?)/</span><span class="p">.</span><span class="nx">source</span> <span class="o">+</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">source</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\\(\d+)/g</span><span class="p">,</span> <span class="nx">fescape</span><span class="p">)</span> <span class="p">);</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">makeArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">array</span><span class="p">,</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">array</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">array</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">results</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>
    <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="k">return</span> <span class="nx">array</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-386" id="section-386">&#182;</a>
</div>
<p>Perform a simple check to determine if the browser is capable of
converting a NodeList to an array using builtin methods.
Also verifies that the returned array holds DOM nodes
(which is not the case in the Blackberry browser)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">try</span> <span class="p">{</span>
  <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nodeType</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-387" id="section-387">&#182;</a>
</div>
<p>Provide a fallback method if it does not work</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">makeArray</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">array</span><span class="p">,</span> <span class="nx">results</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">results</span> <span class="o">||</span> <span class="p">[];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;[object Array]&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">array</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">sortOrder</span><span class="p">,</span> <span class="nx">siblingCheck</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">sortOrder</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">hasDuplicate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="o">||</span> <span class="o">!</span><span class="nx">b</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">4</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">};</span>

<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">sortOrder</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-388" id="section-388">&#182;</a>
</div>
<p>The nodes are identical, we can exit early</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">hasDuplicate</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-389" id="section-389">&#182;</a>
</div>
<p>Fallback to using sourceIndex (in IE) if it's available on both nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">sourceIndex</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">sourceIndex</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">sourceIndex</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">sourceIndex</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">al</span><span class="p">,</span> <span class="nx">bl</span><span class="p">,</span>
      <span class="nx">ap</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">bp</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">aup</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span>
      <span class="nx">bup</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span>
      <span class="nx">cur</span> <span class="o">=</span> <span class="nx">aup</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-390" id="section-390">&#182;</a>
</div>
<p>If the nodes are siblings (or identical) we can do a quick check</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">aup</span> <span class="o">===</span> <span class="nx">bup</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">siblingCheck</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-391" id="section-391">&#182;</a>
</div>
<p>If no parents were found then the nodes are disconnected</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">aup</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">bup</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-392" id="section-392">&#182;</a>
</div>
<p>Otherwise they're somewhere else in the tree so we need
to build up a full list of the parentNodes for comparison</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ap</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
      <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">cur</span> <span class="o">=</span> <span class="nx">bup</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">bp</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
      <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">al</span> <span class="o">=</span> <span class="nx">ap</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="nx">bl</span> <span class="o">=</span> <span class="nx">bp</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-393" id="section-393">&#182;</a>
</div>
<p>Start walking down the tree looking for a discrepancy</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">al</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">bl</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">ap</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!==</span> <span class="nx">bp</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">siblingCheck</span><span class="p">(</span> <span class="nx">ap</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">bp</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-394" id="section-394">&#182;</a>
</div>
<p>We ended someplace up the tree so do a sibling check</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">i</span> <span class="o">===</span> <span class="nx">al</span> <span class="o">?</span>
      <span class="nx">siblingCheck</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">bp</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="o">:</span>
      <span class="nx">siblingCheck</span><span class="p">(</span> <span class="nx">ap</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">b</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">siblingCheck</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">ret</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">cur</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">===</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-395" id="section-395">&#182;</a>
</div>
<p>Utility function for retreiving the text value of an array of DOM nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">getText</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-396" id="section-396">&#182;</a>
</div>
<p>Get the text from text nodes and CDATA nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeValue</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-397" id="section-397">&#182;</a>
</div>
<p>Traverse everything else, except comment nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">8</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span> <span class="o">+=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">getText</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-398" id="section-398">&#182;</a>
</div>
<p>Check to see if the browser returns elements by name when
querying by getElementById (and provide a workaround)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-399" id="section-399">&#182;</a>
</div>
<p>We're going to inject a fake input element with a specified name</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">),</span>
    <span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;script&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">getTime</span><span class="p">(),</span>
    <span class="nx">root</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>

  <span class="nx">form</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;a name=&#39;&quot;</span> <span class="o">+</span> <span class="nx">id</span> <span class="o">+</span> <span class="s2">&quot;&#39;/&gt;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-400" id="section-400">&#182;</a>
</div>
<p>Inject it into the root element, check its status, and remove it quickly</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">root</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">form</span><span class="p">,</span> <span class="nx">root</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-401" id="section-401">&#182;</a>
</div>
<p>The workaround has to do additional checks after a getElementById
Which slows things down for other browsers (hence the branching)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">id</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">ID</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>

        <span class="k">return</span> <span class="nx">m</span> <span class="o">?</span>
          <span class="nx">m</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">m</span><span class="p">.</span><span class="nx">getAttributeNode</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">m</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">).</span><span class="nx">nodeValue</span> <span class="o">===</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">?</span>
            <span class="p">[</span><span class="nx">m</span><span class="p">]</span> <span class="o">:</span>
            <span class="kc">undefined</span> <span class="o">:</span>
          <span class="p">[];</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="nx">Expr</span><span class="p">.</span><span class="nx">filter</span><span class="p">.</span><span class="nx">ID</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttributeNode</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">);</span>

      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodeValue</span> <span class="o">===</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="nx">root</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">form</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-402" id="section-402">&#182;</a>
</div>
<p>release memory in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">root</span> <span class="o">=</span> <span class="nx">form</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">})();</span>

<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-403" id="section-403">&#182;</a>
</div>
<p>Check to see if the browser returns only elements
when doing getElementsByTagName("*")</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-404" id="section-404">&#182;</a>
</div>
<p>Create a fake element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>
  <span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createComment</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-405" id="section-405">&#182;</a>
</div>
<p>Make sure no comments are found</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">TAG</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">results</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-406" id="section-406">&#182;</a>
</div>
<p>Filter out possible comments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">tmp</span> <span class="o">=</span> <span class="p">[];</span>

        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">tmp</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">results</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">results</span> <span class="o">=</span> <span class="nx">tmp</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">results</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-407" id="section-407">&#182;</a>
</div>
<p>Check to see if an attribute returns normalized href attributes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;a href=&#39;#&#39;&gt;&lt;/a&gt;&quot;</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">getAttribute</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span>
      <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;href&quot;</span><span class="p">)</span> <span class="o">!==</span> <span class="s2">&quot;#&quot;</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">Expr</span><span class="p">.</span><span class="nx">attrHandle</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;href&quot;</span><span class="p">,</span> <span class="mi">2</span> <span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-408" id="section-408">&#182;</a>
</div>
<p>release memory in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">})();</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span> <span class="p">)</span> <span class="p">{</span>
  <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">oldSizzle</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">,</span>
      <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">),</span>
      <span class="nx">id</span> <span class="o">=</span> <span class="s2">&quot;__sizzle__&quot;</span><span class="p">;</span>

    <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;p class=&#39;TEST&#39;&gt;&lt;/p&gt;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-409" id="section-409">&#182;</a>
</div>
<p>Safari can't handle uppercase or unicode characters when
in quirks mode.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span> <span class="o">&amp;&amp;</span> <span class="nx">div</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="s2">&quot;.TEST&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
  
    <span class="nx">Sizzle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">query</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">extra</span><span class="p">,</span> <span class="nx">seed</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-410" id="section-410">&#182;</a>
</div>
<p>Only use querySelectorAll on non-XML documents
(ID selectors don't work in non-HTML documents)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">seed</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-411" id="section-411">&#182;</a>
</div>
<p>See if we find a selector to speed up</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="sr">/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">query</span> <span class="p">);</span>
        
        <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-412" id="section-412">&#182;</a>
</div>
<p>Speed-up: Sizzle("TAG")</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="nx">query</span> <span class="p">),</span> <span class="nx">extra</span> <span class="p">);</span>
          

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-413" id="section-413">&#182;</a>
</div>
<p>Speed-up: Sizzle(".CLASS")</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">CLASS</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByClassName</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">),</span> <span class="nx">extra</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        
        <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-414" id="section-414">&#182;</a>
</div>
<p>Speed-up: Sizzle("body")
The body element only exists once, optimize finding it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">query</span> <span class="o">===</span> <span class="s2">&quot;body&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="p">[</span> <span class="nx">context</span><span class="p">.</span><span class="nx">body</span> <span class="p">],</span> <span class="nx">extra</span> <span class="p">);</span>
            

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-415" id="section-415">&#182;</a>
</div>
<p>Speed-up: Sizzle("#ID")</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span> <span class="o">&amp;&amp;</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-416" id="section-416">&#182;</a>
</div>
<p>Check parentNode to catch when Blackberry 4.6 returns
nodes that are no longer in the document #6963</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-417" id="section-417">&#182;</a>
</div>
<p>Handle the case where IE and Opera return items
by name instead of ID</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">id</span> <span class="o">===</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">],</span> <span class="nx">extra</span> <span class="p">);</span>
              <span class="p">}</span>
              
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="p">[],</span> <span class="nx">extra</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          
          <span class="k">try</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">query</span><span class="p">),</span> <span class="nx">extra</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">qsaError</span><span class="p">)</span> <span class="p">{}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-418" id="section-418">&#182;</a>
</div>
<p>qSA works strangely on Element-rooted queries
We can work around this by specifying an extra ID on the root
and working up from there (Thanks to Andrew Dupont for the technique)
IE 8 doesn't work on object elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">oldContext</span> <span class="o">=</span> <span class="nx">context</span><span class="p">,</span>
            <span class="nx">old</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span> <span class="s2">&quot;id&quot;</span> <span class="p">),</span>
            <span class="nx">nid</span> <span class="o">=</span> <span class="nx">old</span> <span class="o">||</span> <span class="nx">id</span><span class="p">,</span>
            <span class="nx">hasParent</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span>
            <span class="nx">relativeHierarchySelector</span> <span class="o">=</span> <span class="sr">/^\s*[+~]/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">query</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">context</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="nx">nid</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">nid</span> <span class="o">=</span> <span class="nx">nid</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="sr">/&#39;/g</span><span class="p">,</span> <span class="s2">&quot;\\$&amp;&quot;</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">relativeHierarchySelector</span> <span class="o">&amp;&amp;</span> <span class="nx">hasParent</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">try</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">relativeHierarchySelector</span> <span class="o">||</span> <span class="nx">hasParent</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">makeArray</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span> <span class="s2">&quot;[id=&#39;&quot;</span> <span class="o">+</span> <span class="nx">nid</span> <span class="o">+</span> <span class="s2">&quot;&#39;] &quot;</span> <span class="o">+</span> <span class="nx">query</span> <span class="p">),</span> <span class="nx">extra</span> <span class="p">);</span>
            <span class="p">}</span>

          <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">pseudoError</span><span class="p">)</span> <span class="p">{</span>
          <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">old</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">oldContext</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="s2">&quot;id&quot;</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    
      <span class="k">return</span> <span class="nx">oldSizzle</span><span class="p">(</span><span class="nx">query</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">extra</span><span class="p">,</span> <span class="nx">seed</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">prop</span> <span class="k">in</span> <span class="nx">oldSizzle</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">Sizzle</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">oldSizzle</span><span class="p">[</span> <span class="nx">prop</span> <span class="p">];</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-419" id="section-419">&#182;</a>
</div>
<p>release memory in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">div</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">})();</span>
<span class="p">}</span>

<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">html</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span>
    <span class="nx">matches</span> <span class="o">=</span> <span class="nx">html</span><span class="p">.</span><span class="nx">matchesSelector</span> <span class="o">||</span> <span class="nx">html</span><span class="p">.</span><span class="nx">mozMatchesSelector</span> <span class="o">||</span> <span class="nx">html</span><span class="p">.</span><span class="nx">webkitMatchesSelector</span> <span class="o">||</span> <span class="nx">html</span><span class="p">.</span><span class="nx">msMatchesSelector</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">matches</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-420" id="section-420">&#182;</a>
</div>
<p>Check to see if it's possible to do matchesSelector
on a disconnected node (IE 9 fails this)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">disconnectedMatch</span> <span class="o">=</span> <span class="o">!</span><span class="nx">matches</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;div&quot;</span> <span class="p">),</span> <span class="s2">&quot;div&quot;</span> <span class="p">),</span>
      <span class="nx">pseudoWorks</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

    <span class="k">try</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-421" id="section-421">&#182;</a>
</div>
<p>This should fail with an exception
Gecko does not error, returns false instead</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">matches</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span> <span class="s2">&quot;[test!=&#39;&#39;]:sizzle&quot;</span> <span class="p">);</span>
  
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">pseudoError</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">pseudoWorks</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">matchesSelector</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">expr</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-422" id="section-422">&#182;</a>
</div>
<p>Make sure that attribute selectors are quoted</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">expr</span> <span class="o">=</span> <span class="nx">expr</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\=\s*([^&#39;&quot;\]]*)\s*\]/g</span><span class="p">,</span> <span class="s2">&quot;=&#39;$1&#39;]&quot;</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span><span class="p">(</span> <span class="nx">node</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span> 
          <span class="k">if</span> <span class="p">(</span> <span class="nx">pseudoWorks</span> <span class="o">||</span> <span class="o">!</span><span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">PSEUDO</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="sr">/!=/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">expr</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">matches</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">expr</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-423" id="section-423">&#182;</a>
</div>
<p>IE 9's matchesSelector returns false on disconnected nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">||</span> <span class="o">!</span><span class="nx">disconnectedMatch</span> <span class="o">||</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-424" id="section-424">&#182;</a>
</div>
<p>As well, disconnected nodes are said to be in a document
fragment in IE 9, so check for that</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">node</span><span class="p">.</span><span class="nb">document</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">11</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="p">[</span><span class="nx">node</span><span class="p">]).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">})();</span>

<span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>

  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&lt;div class=&#39;test e&#39;&gt;&lt;/div&gt;&lt;div class=&#39;test&#39;&gt;&lt;/div&gt;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-425" id="section-425">&#182;</a>
</div>
<p>Opera can't find a second classname (in 9.6)
Also, make sure that getElementsByClassName actually exists</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByClassName</span> <span class="o">||</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-426" id="section-426">&#182;</a>
</div>
<p>Safari caches class attributes, doesn't catch changes (in 3.2)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s2">&quot;e&quot;</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">div</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">).</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="nx">Expr</span><span class="p">.</span><span class="nx">order</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;CLASS&quot;</span><span class="p">);</span>
  <span class="nx">Expr</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">CLASS</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByClassName</span> <span class="o">!==</span> <span class="s2">&quot;undefined&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">context</span><span class="p">.</span><span class="nx">getElementsByClassName</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-427" id="section-427">&#182;</a>
</div>
<p>release memory in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">div</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="p">})();</span>

<span class="kd">function</span> <span class="nx">dirNodeCheck</span><span class="p">(</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">doneName</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">nodeCheck</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">checkSet</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

      <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span><span class="nx">dir</span><span class="p">];</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">sizcache</span> <span class="o">===</span> <span class="nx">doneName</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">match</span> <span class="o">=</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">elem</span><span class="p">.</span><span class="nx">sizset</span><span class="p">];</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">){</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">sizcache</span> <span class="o">=</span> <span class="nx">doneName</span><span class="p">;</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">sizset</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">match</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span><span class="nx">dir</span><span class="p">];</span>
      <span class="p">}</span>

      <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">dirCheck</span><span class="p">(</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">doneName</span><span class="p">,</span> <span class="nx">checkSet</span><span class="p">,</span> <span class="nx">nodeCheck</span><span class="p">,</span> <span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">checkSet</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      
      <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span><span class="nx">dir</span><span class="p">];</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">sizcache</span> <span class="o">===</span> <span class="nx">doneName</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">match</span> <span class="o">=</span> <span class="nx">checkSet</span><span class="p">[</span><span class="nx">elem</span><span class="p">.</span><span class="nx">sizset</span><span class="p">];</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isXML</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">sizcache</span> <span class="o">=</span> <span class="nx">doneName</span><span class="p">;</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">sizset</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
          <span class="p">}</span>

          <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">cur</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">match</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>

          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="p">[</span><span class="nx">elem</span><span class="p">]</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">match</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span><span class="nx">dir</span><span class="p">];</span>
      <span class="p">}</span>

      <span class="nx">checkSet</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">contains</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">!==</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">contains</span> <span class="o">?</span> <span class="nx">a</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="kc">true</span><span class="p">);</span>
  <span class="p">};</span>

<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">compareDocumentPosition</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!!</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">compareDocumentPosition</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">16</span><span class="p">);</span>
  <span class="p">};</span>

<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-428" id="section-428">&#182;</a>
</div>
<p>documentElement is verified for cases where it doesn't yet exist
(such as loading iframes in IE - #4833) </p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">documentElement</span> <span class="o">=</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">elem</span> <span class="o">:</span> <span class="mi">0</span><span class="p">).</span><span class="nx">documentElement</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">documentElement</span> <span class="o">?</span> <span class="nx">documentElement</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">!==</span> <span class="s2">&quot;HTML&quot;</span> <span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">posProcess</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">match</span><span class="p">,</span>
    <span class="nx">tmpSet</span> <span class="o">=</span> <span class="p">[],</span>
    <span class="nx">later</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nx">root</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="p">[</span><span class="nx">context</span><span class="p">]</span> <span class="o">:</span> <span class="nx">context</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-429" id="section-429">&#182;</a>
</div>
<p>Position selectors must be done after the filter
And so must :not(positional) so we move all PSEUDOs to the end</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">PSEUDO</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">later</span> <span class="o">+=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">selector</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">PSEUDO</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">selector</span> <span class="o">=</span> <span class="nx">Expr</span><span class="p">.</span><span class="nx">relative</span><span class="p">[</span><span class="nx">selector</span><span class="p">]</span> <span class="o">?</span> <span class="nx">selector</span> <span class="o">+</span> <span class="s2">&quot;*&quot;</span> <span class="o">:</span> <span class="nx">selector</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">Sizzle</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">root</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">tmpSet</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">later</span><span class="p">,</span> <span class="nx">tmpSet</span> <span class="p">);</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-430" id="section-430">&#182;</a>
</div>
<p>EXPOSE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">selectors</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">[</span><span class="s2">&quot;:&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">uniqueSort</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">getText</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">isXML</span><span class="p">;</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">contains</span><span class="p">;</span>


<span class="p">})();</span>


<span class="kd">var</span> <span class="nx">runtil</span> <span class="o">=</span> <span class="sr">/Until$/</span><span class="p">,</span>
  <span class="nx">rparentsprev</span> <span class="o">=</span> <span class="sr">/^(?:parents|prevUntil|prevAll)/</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-431" id="section-431">&#182;</a>
</div>
<p>Note: This RegExp should be improved, or likely pulled from Sizzle</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rmultiselector</span> <span class="o">=</span> <span class="sr">/,/</span><span class="p">,</span>
  <span class="nx">isSimple</span> <span class="o">=</span> <span class="sr">/^.[^:#\[\.,]*$/</span><span class="p">,</span>
  <span class="nx">slice</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">slice</span><span class="p">,</span>
  <span class="nx">POS</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">match</span><span class="p">.</span><span class="nx">POS</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-432" id="section-432">&#182;</a>
</div>
<p>methods guaranteed to produce a unique set when starting from a unique set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">guaranteedUnique</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">children</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">contents</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">next</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">prev</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">find</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
      <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">self</span><span class="p">[</span> <span class="nx">i</span> <span class="p">],</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;find&quot;</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">),</span>
      <span class="nx">length</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">r</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">length</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">ret</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-433" id="section-433">&#182;</a>
</div>
<p>Make sure that the results are unique</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">n</span> <span class="o">&lt;</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">n</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">r</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span> <span class="o">===</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">n</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">ret</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">n</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">has</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">target</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">targets</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">target</span> <span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">targets</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">targets</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">not</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">winnow</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">false</span><span class="p">),</span> <span class="s2">&quot;not&quot;</span><span class="p">,</span> <span class="nx">selector</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">winnow</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">true</span><span class="p">),</span> <span class="s2">&quot;filter&quot;</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">is</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!!</span><span class="nx">selector</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="k">this</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">:</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">closest</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selectors</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">cur</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-434" id="section-434">&#182;</a>
</div>
<p>Array</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">selectors</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">selector</span><span class="p">,</span>
        <span class="nx">matches</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="nx">level</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">&amp;&amp;</span> <span class="nx">selectors</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">selectors</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">selector</span> <span class="o">=</span> <span class="nx">selectors</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">matches</span><span class="p">[</span> <span class="nx">selector</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">matches</span><span class="p">[</span> <span class="nx">selector</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">POS</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="o">?</span>
              <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="p">)</span> <span class="o">:</span>
              <span class="nx">selector</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span> <span class="o">!==</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">selector</span> <span class="k">in</span> <span class="nx">matches</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">match</span> <span class="o">=</span> <span class="nx">matches</span><span class="p">[</span> <span class="nx">selector</span> <span class="p">];</span>

            <span class="k">if</span> <span class="p">(</span> <span class="nx">match</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">?</span> <span class="nx">match</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">).</span><span class="nx">is</span><span class="p">(</span> <span class="nx">match</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span> <span class="nx">selector</span><span class="o">:</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">elem</span><span class="o">:</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">level</span><span class="o">:</span> <span class="nx">level</span> <span class="p">});</span>
            <span class="p">}</span>
          <span class="p">}</span>

          <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
          <span class="nx">level</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-435" id="section-435">&#182;</a>
</div>
<p>String</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">pos</span> <span class="o">=</span> <span class="nx">POS</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selectors</span> <span class="p">)</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">selectors</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selectors</span><span class="p">,</span> <span class="nx">context</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">context</span> <span class="p">)</span> <span class="o">:</span>
        <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">cur</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

      <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">pos</span> <span class="o">?</span> <span class="nx">pos</span><span class="p">.</span><span class="nx">index</span><span class="p">(</span><span class="nx">cur</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">matchesSelector</span><span class="p">(</span><span class="nx">cur</span><span class="p">,</span> <span class="nx">selectors</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
          <span class="k">break</span><span class="p">;</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">cur</span> <span class="o">||</span> <span class="o">!</span><span class="nx">cur</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">cur</span> <span class="o">===</span> <span class="nx">context</span> <span class="o">||</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">ret</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="s2">&quot;closest&quot;</span><span class="p">,</span> <span class="nx">selectors</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-436" id="section-436">&#182;</a>
</div>
<p>Determine the position of an element within
the matched set of elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">elem</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-437" id="section-437">&#182;</a>
</div>
<p>If it receives a string, the selector is used
If it receives nothing, the siblings are used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">elem</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">children</span><span class="p">()</span> <span class="p">);</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-438" id="section-438">&#182;</a>
</div>
<p>Locate the position of the desired element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-439" id="section-439">&#182;</a>
</div>
<p>If it receives a jQuery object, the first element is used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">set</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">context</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">selector</span> <span class="o">&amp;&amp;</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">selector</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">selector</span> <span class="p">),</span>
      <span class="nx">all</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(),</span> <span class="nx">set</span> <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">isDisconnected</span><span class="p">(</span> <span class="nx">set</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">isDisconnected</span><span class="p">(</span> <span class="nx">all</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">?</span>
      <span class="nx">all</span> <span class="o">:</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span> <span class="nx">all</span> <span class="p">)</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">andSelf</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">prevObject</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-440" id="section-440">&#182;</a>
</div>
<p>A painfully simple check to see if an element is disconnected
from a document (should be improved, where feasible).</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">isDisconnected</span><span class="p">(</span> <span class="nx">node</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="o">!</span><span class="nx">node</span> <span class="o">||</span> <span class="o">!</span><span class="nx">node</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">||</span> <span class="nx">node</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nx">parent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">11</span> <span class="o">?</span> <span class="nx">parent</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">parents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;parentNode&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">parentsUntil</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;parentNode&quot;</span><span class="p">,</span> <span class="nx">until</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">next</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nth</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;nextSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">prev</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nth</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;previousSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">nextAll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;nextSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">prevAll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;previousSibling&quot;</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">nextUntil</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;nextSibling&quot;</span><span class="p">,</span> <span class="nx">until</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">prevUntil</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dir</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;previousSibling&quot;</span><span class="p">,</span> <span class="nx">until</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">siblings</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">sibling</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">children</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">sibling</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">contents</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;iframe&quot;</span> <span class="p">)</span> <span class="o">?</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">contentDocument</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">contentWindow</span><span class="p">.</span><span class="nb">document</span> <span class="o">:</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">until</span><span class="p">,</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">until</span> <span class="p">),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-441" id="section-441">&#182;</a>
</div>
<p>The variable 'args' was introduced in
<a href='https://github.com/jquery/jquery/commit/52a0238'>https://github.com/jquery/jquery/commit/52a0238</a>
to work around a bug in Chrome 10 (Dev) and should be removed when the bug is fixed.
<a href='http://code.google.com/p/v8/issues/detail?id=1050'>http://code.google.com/p/v8/issues/detail?id=1050</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">args</span> <span class="o">=</span> <span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">runtil</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">selector</span> <span class="o">=</span> <span class="nx">until</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">selector</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">ret</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">ret</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">guaranteedUnique</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">unique</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">rmultiselector</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="nx">rparentsprev</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">args</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">filter</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">expr</span><span class="p">,</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">not</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">not</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">expr</span> <span class="o">=</span> <span class="s2">&quot;:not(&quot;</span> <span class="o">+</span> <span class="nx">expr</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">elems</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">matchesSelector</span><span class="p">(</span><span class="nx">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">expr</span><span class="p">)</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">elems</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[]</span> <span class="o">:</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">find</span><span class="p">.</span><span class="nx">matches</span><span class="p">(</span><span class="nx">expr</span><span class="p">,</span> <span class="nx">elems</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">dir</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">until</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">matched</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">cur</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">dir</span> <span class="p">];</span>

    <span class="k">while</span> <span class="p">(</span> <span class="nx">cur</span> <span class="o">&amp;&amp;</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">9</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">until</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">).</span><span class="nx">is</span><span class="p">(</span> <span class="nx">until</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">matched</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">cur</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">[</span><span class="nx">dir</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">matched</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">nth</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">cur</span><span class="p">,</span> <span class="nx">result</span><span class="p">,</span> <span class="nx">dir</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">result</span> <span class="o">=</span> <span class="nx">result</span> <span class="o">||</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">cur</span><span class="p">;</span> <span class="nx">cur</span> <span class="o">=</span> <span class="nx">cur</span><span class="p">[</span><span class="nx">dir</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">cur</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="o">++</span><span class="nx">num</span> <span class="o">===</span> <span class="nx">result</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">cur</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">sibling</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="k">for</span> <span class="p">(</span> <span class="p">;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">n</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">n</span> <span class="o">!==</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">r</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">n</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">r</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-442" id="section-442">&#182;</a>
</div>
<p>Implement the identical functionality for filter and not</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">winnow</span><span class="p">(</span> <span class="nx">elements</span><span class="p">,</span> <span class="nx">qualifier</span><span class="p">,</span> <span class="nx">keep</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-443" id="section-443">&#182;</a>
</div>
<p>Can't pass null or undefined to indexOf in Firefox 4
Set to 0 to skip string check</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">qualifier</span> <span class="o">=</span> <span class="nx">qualifier</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">qualifier</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">retVal</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">qualifier</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">retVal</span> <span class="o">===</span> <span class="nx">keep</span><span class="p">;</span>
    <span class="p">});</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">qualifier</span><span class="p">.</span><span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">===</span> <span class="nx">qualifier</span><span class="p">)</span> <span class="o">===</span> <span class="nx">keep</span><span class="p">;</span>
    <span class="p">});</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">qualifier</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">filtered</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">});</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">isSimple</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">qualifier</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">qualifier</span><span class="p">,</span> <span class="nx">filtered</span><span class="p">,</span> <span class="o">!</span><span class="nx">keep</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">qualifier</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">qualifier</span><span class="p">,</span> <span class="nx">filtered</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">elements</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">qualifier</span> <span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="nx">keep</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}</span>




<span class="kd">var</span> <span class="nx">rinlinejQuery</span> <span class="o">=</span> <span class="sr">/ jQuery\d+=&quot;(?:\d+|null)&quot;/g</span><span class="p">,</span>
  <span class="nx">rleadingWhitespace</span> <span class="o">=</span> <span class="sr">/^\s+/</span><span class="p">,</span>
  <span class="nx">rxhtmlTag</span> <span class="o">=</span> <span class="sr">/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^&gt;]*)\/&gt;/ig</span><span class="p">,</span>
  <span class="nx">rtagName</span> <span class="o">=</span> <span class="sr">/&lt;([\w:]+)/</span><span class="p">,</span>
  <span class="nx">rtbody</span> <span class="o">=</span> <span class="sr">/&lt;tbody/i</span><span class="p">,</span>
  <span class="nx">rhtml</span> <span class="o">=</span> <span class="sr">/&lt;|&amp;#?\w+;/</span><span class="p">,</span>
  <span class="nx">rnocache</span> <span class="o">=</span> <span class="sr">/&lt;(?:script|object|embed|option|style)/i</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-444" id="section-444">&#182;</a>
</div>
<p>checked="checked" or checked</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rchecked</span> <span class="o">=</span> <span class="sr">/checked\s*(?:[^=]|=\s*.checked.)/i</span><span class="p">,</span>
  <span class="nx">rscriptType</span> <span class="o">=</span> <span class="sr">/\/(java|ecma)script/i</span><span class="p">,</span>
  <span class="nx">rcleanScript</span> <span class="o">=</span> <span class="sr">/^\s*&lt;!(?:\[CDATA\[|\-\-)/</span><span class="p">,</span>
  <span class="nx">wrapMap</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">option</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;select multiple=&#39;multiple&#39;&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/select&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">legend</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;fieldset&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/fieldset&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">thead</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">tr</span><span class="o">:</span> <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/tbody&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">td</span><span class="o">:</span> <span class="p">[</span> <span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">col</span><span class="o">:</span> <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;&lt;table&gt;&lt;tbody&gt;&lt;/tbody&gt;&lt;colgroup&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/colgroup&gt;&lt;/table&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">area</span><span class="o">:</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&lt;map&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/map&gt;&quot;</span> <span class="p">],</span>
    <span class="nx">_default</span><span class="o">:</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">]</span>
  <span class="p">};</span>

<span class="nx">wrapMap</span><span class="p">.</span><span class="nx">optgroup</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">option</span><span class="p">;</span>
<span class="nx">wrapMap</span><span class="p">.</span><span class="nx">tbody</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">tfoot</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">colgroup</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">caption</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">thead</span><span class="p">;</span>
<span class="nx">wrapMap</span><span class="p">.</span><span class="nx">th</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">td</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-445" id="section-445">&#182;</a>
</div>
<p>IE can't serialize <link> and <script> tags normally</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">htmlSerialize</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">_default</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;div&lt;div&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;/div&gt;&quot;</span> <span class="p">];</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">text</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span> <span class="nx">text</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">text</span><span class="p">())</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">text</span> <span class="o">!==</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">text</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span> <span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span><span class="p">).</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">wrapAll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">html</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-446" id="section-446">&#182;</a>
</div>
<p>The elements to wrap the target around</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">wrap</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">html</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="p">).</span><span class="nx">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">clone</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">wrap</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">wrap</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

        <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">elem</span><span class="p">;</span>
      <span class="p">}).</span><span class="nx">append</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">wrapInner</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">wrapInner</span><span class="p">(</span> <span class="nx">html</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">),</span>
        <span class="nx">contents</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">contents</span><span class="p">();</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">contents</span><span class="p">.</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">wrap</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">html</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">wrapAll</span><span class="p">(</span> <span class="nx">html</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">unwrap</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">replaceWith</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">childNodes</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}).</span><span class="nx">end</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="nx">append</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">prepend</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">before</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">set</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">set</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">set</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">toArray</span><span class="p">()</span> <span class="p">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">set</span><span class="p">,</span> <span class="s2">&quot;before&quot;</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">after</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">set</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;after&quot;</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>
      <span class="nx">set</span><span class="p">.</span><span class="nx">push</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">set</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">toArray</span><span class="p">()</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">set</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-447" id="section-447">&#182;</a>
</div>
<p>keepData is for internal use only--do not document</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="nx">keepData</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">selector</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">]</span> <span class="p">).</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">keepData</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">);</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="p">[</span> <span class="nx">elem</span> <span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">empty</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-448" id="section-448">&#182;</a>
</div>
<p>Remove element nodes and prevent memory leaks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-449" id="section-449">&#182;</a>
</div>
<p>Remove any remaining nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">clone</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dataAndEvents</span> <span class="o">=</span> <span class="nx">dataAndEvents</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="nx">dataAndEvents</span><span class="p">;</span>
    <span class="nx">deepDataAndEvents</span> <span class="o">=</span> <span class="nx">deepDataAndEvents</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">dataAndEvents</span> <span class="o">:</span> <span class="nx">deepDataAndEvents</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">);</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">html</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span>
        <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rinlinejQuery</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span>
        <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-450" id="section-450">&#182;</a>
</div>
<p>See if we can take a shortcut and just use innerHTML</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rnocache</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">&amp;&amp;</span>
      <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">leadingWhitespace</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">))</span> <span class="o">&amp;&amp;</span>
      <span class="o">!</span><span class="nx">wrapMap</span><span class="p">[</span> <span class="p">(</span><span class="nx">rtagName</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">])[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

      <span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rxhtmlTag</span><span class="p">,</span> <span class="s2">&quot;&lt;$1&gt;&lt;/$2&gt;&quot;</span><span class="p">);</span>

      <span class="k">try</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-451" id="section-451">&#182;</a>
</div>
<p>Remove element nodes and prevent memory leaks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cleanData</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">)</span> <span class="p">);</span>
            <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-452" id="section-452">&#182;</a>
</div>
<p>If using innerHTML throws an exception, use the fallback method</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">())</span> <span class="p">);</span>
      <span class="p">});</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">replaceWith</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-453" id="section-453">&#182;</a>
</div>
<p>Make sure that the elements are removed from the DOM before they are inserted
this can help fix replacing a parent with child elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">old</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">();</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">replaceWith</span><span class="p">(</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">old</span> <span class="p">)</span> <span class="p">);</span>
        <span class="p">});</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">value</span> <span class="p">).</span><span class="nx">detach</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">next</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">,</span>
          <span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>

        <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">remove</span><span class="p">();</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">next</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">(</span><span class="nx">next</span><span class="p">).</span><span class="nx">before</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">(</span><span class="nx">parent</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">?</span> <span class="nx">value</span><span class="p">()</span> <span class="o">:</span> <span class="nx">value</span><span class="p">),</span> <span class="s2">&quot;replaceWith&quot;</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">:</span>
        <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">detach</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">selector</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">domManip</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">results</span><span class="p">,</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">parent</span><span class="p">,</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
      <span class="nx">scripts</span> <span class="o">=</span> <span class="p">[];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-454" id="section-454">&#182;</a>
</div>
<p>We can't cloneNode fragments that contain checked, in WebKit</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">checkClone</span> <span class="o">&amp;&amp;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">rchecked</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="kc">true</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">table</span> <span class="o">?</span> <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">()</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">);</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">domManip</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">parent</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-455" id="section-455">&#182;</a>
</div>
<p>If we're in a fragment, just use that instead of building a new one</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">results</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">fragment</span><span class="o">:</span> <span class="nx">parent</span> <span class="p">};</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">results</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">buildFragment</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">results</span><span class="p">.</span><span class="nx">fragment</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">fragment</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">first</span> <span class="o">=</span> <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">first</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">first</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">table</span> <span class="o">=</span> <span class="nx">table</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">first</span><span class="p">,</span> <span class="s2">&quot;tr&quot;</span> <span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">lastIndex</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span>
            <span class="nx">table</span> <span class="o">?</span>
              <span class="nx">root</span><span class="p">(</span><span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">first</span><span class="p">)</span> <span class="o">:</span>
              <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-456" id="section-456">&#182;</a>
</div>
<p>Make sure that we do not leak memory by inadvertently discarding
the original fragment (which might have attached data) instead of
using it; in addition, use the original fragment object for the last
item instead of first because it can end up being emptied incorrectly
in certain situations (Bug #8070).
Fragments from the fragment cache must always be cloned and never used
in place.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">results</span><span class="p">.</span><span class="nx">cacheable</span> <span class="o">||</span> <span class="p">(</span><span class="nx">l</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lastIndex</span><span class="p">)</span> <span class="o">?</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span> <span class="nx">fragment</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kc">true</span> <span class="p">)</span> <span class="o">:</span>
              <span class="nx">fragment</span>
          <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">scripts</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">scripts</span><span class="p">,</span> <span class="nx">evalScript</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">root</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">cur</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;table&quot;</span><span class="p">)</span> <span class="o">?</span>
    <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;tbody&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;tbody&quot;</span><span class="p">)))</span> <span class="o">:</span>
    <span class="nx">elem</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">dest</span> <span class="p">)</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">hasData</span><span class="p">(</span> <span class="nx">src</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">internalKey</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span>
    <span class="nx">oldData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">src</span> <span class="p">),</span>
    <span class="nx">curData</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">oldData</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-457" id="section-457">&#182;</a>
</div>
<p>Switch to use the internal data object, if it exists, for the next
stage of data copying</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">oldData</span> <span class="o">=</span> <span class="nx">oldData</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">])</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">events</span> <span class="o">=</span> <span class="nx">oldData</span><span class="p">.</span><span class="nx">events</span><span class="p">;</span>
        <span class="nx">curData</span> <span class="o">=</span> <span class="nx">curData</span><span class="p">[</span> <span class="nx">internalKey</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">oldData</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="nx">curData</span><span class="p">.</span><span class="nx">handle</span><span class="p">;</span>
      <span class="nx">curData</span><span class="p">.</span><span class="nx">events</span> <span class="o">=</span> <span class="p">{};</span>

      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span> <span class="nx">dest</span><span class="p">,</span> <span class="nx">type</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">namespace</span> <span class="o">?</span> <span class="s2">&quot;.&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">namespace</span><span class="p">,</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">],</span> <span class="nx">events</span><span class="p">[</span> <span class="nx">type</span> <span class="p">][</span> <span class="nx">i</span> <span class="p">].</span><span class="nx">data</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">cloneFixAttributes</span><span class="p">(</span> <span class="nx">src</span><span class="p">,</span> <span class="nx">dest</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">nodeName</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-458" id="section-458">&#182;</a>
</div>
<p>We do not need to do anything for non-Elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-459" id="section-459">&#182;</a>
</div>
<p>clearAttributes removes the attributes, which we don't want,
but also removes the attachEvent events, which we <em>do</em> want</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">clearAttributes</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">clearAttributes</span><span class="p">();</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-460" id="section-460">&#182;</a>
</div>
<p>mergeAttributes, in contrast, only merges back on the
original attributes, not the events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">mergeAttributes</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">mergeAttributes</span><span class="p">(</span> <span class="nx">src</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">nodeName</span> <span class="o">=</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-461" id="section-461">&#182;</a>
</div>
<p>IE6-8 fail to clone children inside object elements that use
the proprietary classid attribute value (rather than the type
attribute) to identify the type of content to display</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">outerHTML</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">outerHTML</span><span class="p">;</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">src</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="nx">src</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-462" id="section-462">&#182;</a>
</div>
<p>IE6-8 fails to persist the checked state of a cloned checkbox
or radio button. Worse, IE6-7 fail to give the cloned element
a checked appearance if the defaultChecked value isn't also set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">src</span><span class="p">.</span><span class="nx">checked</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">dest</span><span class="p">.</span><span class="nx">defaultChecked</span> <span class="o">=</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">checked</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-463" id="section-463">&#182;</a>
</div>
<p>IE6-7 get confused and end up setting the value of a cloned
checkbox/radio button to an empty string instead of "on"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">dest</span><span class="p">.</span><span class="nx">value</span> <span class="o">!==</span> <span class="nx">src</span><span class="p">.</span><span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">dest</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-464" id="section-464">&#182;</a>
</div>
<p>IE6-8 fails to return the selected option to the default selected
state when cloning options</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;option&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">selected</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">defaultSelected</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-465" id="section-465">&#182;</a>
</div>
<p>IE6-8 fails to set the defaultValue to the correct value when
cloning other types of input fields</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;input&quot;</span> <span class="o">||</span> <span class="nx">nodeName</span> <span class="o">===</span> <span class="s2">&quot;textarea&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dest</span><span class="p">.</span><span class="nx">defaultValue</span> <span class="o">=</span> <span class="nx">src</span><span class="p">.</span><span class="nx">defaultValue</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-466" id="section-466">&#182;</a>
</div>
<p>Event data gets referenced instead of copied if the expando
gets copied too</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">dest</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">);</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">buildFragment</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">nodes</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">cacheable</span><span class="p">,</span> <span class="nx">cacheresults</span><span class="p">,</span> <span class="nx">doc</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-467" id="section-467">&#182;</a>
</div>
<p>nodes may contain either an explicit document object,
a jQuery collection or context object.
If nodes[0] contains a valid object to assign to doc</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">nodes</span> <span class="o">&amp;&amp;</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">doc</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-468" id="section-468">&#182;</a>
</div>
<p>Ensure that an attr object doesn't incorrectly stand in as a document object
Chrome and Firefox seem to allow this to occur and will throw exception
Fixes #8950</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">doc</span><span class="p">.</span><span class="nx">createDocumentFragment</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">doc</span> <span class="o">=</span> <span class="nb">document</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-469" id="section-469">&#182;</a>
</div>
<p>Only cache "small" (1/2 KB) HTML strings that are associated with the main document
Cloning options loses the selected state, so don't cache them
IE 6 doesn't like it when you put <object> or <embed> elements in a fragment
Also, WebKit does not clone 'checked' attributes on cloneNode, so don't cache</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">args</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">512</span> <span class="o">&amp;&amp;</span> <span class="nx">doc</span> <span class="o">===</span> <span class="nb">document</span> <span class="o">&amp;&amp;</span>
    <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rnocache</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">checkClone</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rchecked</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>

    <span class="nx">cacheable</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

    <span class="nx">cacheresults</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fragments</span><span class="p">[</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">cacheresults</span> <span class="o">&amp;&amp;</span> <span class="nx">cacheresults</span> <span class="o">!==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">cacheresults</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">fragment</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">fragment</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">createDocumentFragment</span><span class="p">();</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">clean</span><span class="p">(</span> <span class="nx">args</span><span class="p">,</span> <span class="nx">doc</span><span class="p">,</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">cacheable</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fragments</span><span class="p">[</span> <span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">cacheresults</span> <span class="o">?</span> <span class="nx">fragment</span> <span class="o">:</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span> <span class="nx">fragment</span><span class="o">:</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">cacheable</span><span class="o">:</span> <span class="nx">cacheable</span> <span class="p">};</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fragments</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nx">appendTo</span><span class="o">:</span> <span class="s2">&quot;append&quot;</span><span class="p">,</span>
  <span class="nx">prependTo</span><span class="o">:</span> <span class="s2">&quot;prepend&quot;</span><span class="p">,</span>
  <span class="nx">insertBefore</span><span class="o">:</span> <span class="s2">&quot;before&quot;</span><span class="p">,</span>
  <span class="nx">insertAfter</span><span class="o">:</span> <span class="s2">&quot;after&quot;</span><span class="p">,</span>
  <span class="nx">replaceAll</span><span class="o">:</span> <span class="s2">&quot;replaceWith&quot;</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">original</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">insert</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">selector</span> <span class="p">),</span>
      <span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">parentNode</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">insert</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">insert</span><span class="p">[</span> <span class="nx">original</span> <span class="p">](</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">insert</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">elems</span> <span class="o">=</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">clone</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">).</span><span class="nx">get</span><span class="p">();</span>
        <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">insert</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)[</span> <span class="nx">original</span> <span class="p">](</span> <span class="nx">elems</span> <span class="p">);</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pushStack</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">insert</span><span class="p">.</span><span class="nx">selector</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;getElementsByTagName&quot;</span> <span class="k">in</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;*&quot;</span> <span class="p">);</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;querySelectorAll&quot;</span> <span class="k">in</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span> <span class="s2">&quot;*&quot;</span> <span class="p">);</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[];</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-470" id="section-470">&#182;</a>
</div>
<p>Used in clean, fixes the defaultChecked property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">fixDefaultChecked</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;checkbox&quot;</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;radio&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">defaultChecked</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">checked</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-471" id="section-471">&#182;</a>
</div>
<p>Finds all inputs and passes them to fixDefaultChecked</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">findInputs</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;input&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">fixDefaultChecked</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;getElementsByTagName&quot;</span> <span class="k">in</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">),</span> <span class="nx">fixDefaultChecked</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">clone</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">dataAndEvents</span><span class="p">,</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">clone</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">cloneNode</span><span class="p">(</span><span class="kc">true</span><span class="p">),</span>
        <span class="nx">srcElements</span><span class="p">,</span>
        <span class="nx">destElements</span><span class="p">,</span>
        <span class="nx">i</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">noCloneEvent</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">noCloneChecked</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">11</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isXMLDoc</span><span class="p">(</span><span class="nx">elem</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-472" id="section-472">&#182;</a>
</div>
<p>IE copies events bound via attachEvent when using cloneNode.
Calling detachEvent on the clone will also remove the events
from the original. In order to get around this, we use some
proprietary methods to clear the events. Thanks to MooTools
guys for this hotness.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

      <span class="nx">cloneFixAttributes</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">clone</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-473" id="section-473">&#182;</a>
</div>
<p>Using Sizzle here is crazy slow, so we use getElementsByTagName
instead</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">srcElements</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="nx">destElements</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">clone</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-474" id="section-474">&#182;</a>
</div>
<p>Weird iteration because IE will replace the length property
with an element if you are cloning the body and one of the
elements on the page has a name or id of "length"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="o">++</span><span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">cloneFixAttributes</span><span class="p">(</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">destElements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-475" id="section-475">&#182;</a>
</div>
<p>Copy the events from the original to the clone</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">dataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">clone</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">deepDataAndEvents</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">srcElements</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="nx">destElements</span> <span class="o">=</span> <span class="nx">getAll</span><span class="p">(</span> <span class="nx">clone</span> <span class="p">);</span>

        <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="o">++</span><span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">cloneCopyEvent</span><span class="p">(</span> <span class="nx">srcElements</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">destElements</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">srcElements</span> <span class="o">=</span> <span class="nx">destElements</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-476" id="section-476">&#182;</a>
</div>
<p>Return the cloned set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">clone</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">clean</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">fragment</span><span class="p">,</span> <span class="nx">scripts</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">checkScriptType</span><span class="p">;</span>

    <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-477" id="section-477">&#182;</a>
</div>
<p>!context.createElement fails in IE with an error but returns typeof 'object'</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createElement</span> <span class="o">===</span> <span class="s2">&quot;undefined&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nx">context</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">context</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">ownerDocument</span> <span class="o">||</span> <span class="nb">document</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">j</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-478" id="section-478">&#182;</a>
</div>
<p>Convert html string into DOM nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">elem</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">rhtml</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-479" id="section-479">&#182;</a>
</div>
<p>Fix "XHTML"-style tags in all browsers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rxhtmlTag</span><span class="p">,</span> <span class="s2">&quot;&lt;$1&gt;&lt;/$2&gt;&quot;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-480" id="section-480">&#182;</a>
</div>
<p>Trim whitespace, otherwise indexOf won't work as expected</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="kd">var</span> <span class="nx">tag</span> <span class="o">=</span> <span class="p">(</span><span class="nx">rtagName</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">])[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">(),</span>
            <span class="nx">wrap</span> <span class="o">=</span> <span class="nx">wrapMap</span><span class="p">[</span> <span class="nx">tag</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">wrapMap</span><span class="p">.</span><span class="nx">_default</span><span class="p">,</span>
            <span class="nx">depth</span> <span class="o">=</span> <span class="nx">wrap</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">div</span> <span class="o">=</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-481" id="section-481">&#182;</a>
</div>
<p>Go to html and back, then peel off extra wrappers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">wrap</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">elem</span> <span class="o">+</span> <span class="nx">wrap</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-482" id="section-482">&#182;</a>
</div>
<p>Move to the right depth</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">while</span> <span class="p">(</span> <span class="nx">depth</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">div</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">lastChild</span><span class="p">;</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-483" id="section-483">&#182;</a>
</div>
<p>Remove IE's autoinserted <tbody> from table fragments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">tbody</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-484" id="section-484">&#182;</a>
</div>
<p>String was a <table>, <em>may</em> have spurious <tbody></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="kd">var</span> <span class="nx">hasBody</span> <span class="o">=</span> <span class="nx">rtbody</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">elem</span><span class="p">),</span>
              <span class="nx">tbody</span> <span class="o">=</span> <span class="nx">tag</span> <span class="o">===</span> <span class="s2">&quot;table&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">hasBody</span> <span class="o">?</span>
                <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span> <span class="o">&amp;&amp;</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">childNodes</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-485" id="section-485">&#182;</a>
</div>
<p>String was a bare <thead> or <tfoot></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">wrap</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;&lt;table&gt;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">hasBody</span> <span class="o">?</span>
                  <span class="nx">div</span><span class="p">.</span><span class="nx">childNodes</span> <span class="o">:</span>
                  <span class="p">[];</span>

            <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">tbody</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">;</span> <span class="o">--</span><span class="nx">j</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">],</span> <span class="s2">&quot;tbody&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">].</span><span class="nx">childNodes</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">].</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">tbody</span><span class="p">[</span> <span class="nx">j</span> <span class="p">]</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-486" id="section-486">&#182;</a>
</div>
<p>IE completely kills leading whitespace when innerHTML is used</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">leadingWhitespace</span> <span class="o">&amp;&amp;</span> <span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">div</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">context</span><span class="p">.</span><span class="nx">createTextNode</span><span class="p">(</span> <span class="nx">rleadingWhitespace</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">elem</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="p">),</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
          <span class="p">}</span>

          <span class="nx">elem</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-487" id="section-487">&#182;</a>
</div>
<p>Resets defaultChecked for any radios and checkboxes
about to be appended to the DOM in IE 6/7 (#8060)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">len</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">appendChecked</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="p">(</span><span class="nx">len</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">findInputs</span><span class="p">(</span> <span class="nx">elem</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">findInputs</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">fragment</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">checkScriptType</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">rscriptType</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">type</span> <span class="p">);</span>
      <span class="p">};</span>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">scripts</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="s2">&quot;script&quot;</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">type</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">===</span> <span class="s2">&quot;text/javascript&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">scripts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">parentNode</span> <span class="o">?</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">jsTags</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;script&quot;</span> <span class="p">),</span> <span class="nx">checkScriptType</span> <span class="p">);</span>

            <span class="nx">ret</span><span class="p">.</span><span class="nx">splice</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="nx">ret</span><span class="p">,</span> <span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span> <span class="nx">jsTags</span> <span class="p">)</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">fragment</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">ret</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">cleanData</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elems</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">cache</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cache</span><span class="p">,</span> <span class="nx">internalKey</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span><span class="p">,</span> <span class="nx">special</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">special</span><span class="p">,</span>
      <span class="nx">deleteExpando</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">deleteExpando</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">elem</span><span class="p">;</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elems</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noData</span><span class="p">[</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">continue</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">id</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">id</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">data</span> <span class="o">=</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">][</span> <span class="nx">internalKey</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">data</span><span class="p">.</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">data</span><span class="p">.</span><span class="nx">events</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">special</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-488" id="section-488">&#182;</a>
</div>
<p>This is a shortcut to avoid jQuery.event.remove's overhead</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">removeEvent</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">data</span><span class="p">.</span><span class="nx">handle</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-489" id="section-489">&#182;</a>
</div>
<p>Null the DOM reference to avoid IE6/7/8 leak (#7054)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">data</span><span class="p">.</span><span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">data</span><span class="p">.</span><span class="nx">handle</span><span class="p">.</span><span class="nx">elem</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">deleteExpando</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">delete</span> <span class="nx">elem</span><span class="p">[</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">];</span>

        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">elem</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">delete</span> <span class="nx">cache</span><span class="p">[</span> <span class="nx">id</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">evalScript</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">src</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nx">url</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">src</span><span class="p">,</span>
      <span class="nx">async</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">dataType</span><span class="o">:</span> <span class="s2">&quot;script&quot;</span>
    <span class="p">});</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">globalEval</span><span class="p">(</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">text</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rcleanScript</span><span class="p">,</span> <span class="s2">&quot;/*$0*/&quot;</span> <span class="p">)</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>



<span class="kd">var</span> <span class="nx">ralpha</span> <span class="o">=</span> <span class="sr">/alpha\([^)]*\)/i</span><span class="p">,</span>
  <span class="nx">ropacity</span> <span class="o">=</span> <span class="sr">/opacity=([^)]*)/</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-490" id="section-490">&#182;</a>
</div>
<p>fixed for IE9, see #8346</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rupper</span> <span class="o">=</span> <span class="sr">/([A-Z]|^ms)/g</span><span class="p">,</span>
  <span class="nx">rnumpx</span> <span class="o">=</span> <span class="sr">/^-?\d+(?:px)?$/i</span><span class="p">,</span>
  <span class="nx">rnum</span> <span class="o">=</span> <span class="sr">/^-?\d/</span><span class="p">,</span>
  <span class="nx">rrelNum</span> <span class="o">=</span> <span class="sr">/^[+\-]=/</span><span class="p">,</span>
  <span class="nx">rrelNumFilter</span> <span class="o">=</span> <span class="sr">/[^+\-\.\de]+/g</span><span class="p">,</span>

  <span class="nx">cssShow</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">position</span><span class="o">:</span> <span class="s2">&quot;absolute&quot;</span><span class="p">,</span> <span class="nx">visibility</span><span class="o">:</span> <span class="s2">&quot;hidden&quot;</span><span class="p">,</span> <span class="nx">display</span><span class="o">:</span> <span class="s2">&quot;block&quot;</span> <span class="p">},</span>
  <span class="nx">cssWidth</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;Left&quot;</span><span class="p">,</span> <span class="s2">&quot;Right&quot;</span> <span class="p">],</span>
  <span class="nx">cssHeight</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;Top&quot;</span><span class="p">,</span> <span class="s2">&quot;Bottom&quot;</span> <span class="p">],</span>
  <span class="nx">curCSS</span><span class="p">,</span>

  <span class="nx">getComputedStyle</span><span class="p">,</span>
  <span class="nx">currentStyle</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">css</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-491" id="section-491">&#182;</a>
</div>
<p>Setting 'undefined' is a no-op</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">access</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">?</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">:</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-492" id="section-492">&#182;</a>
</div>
<p>Add in style property hooks for overriding the default
behavior of getting and setting a style property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">cssHooks</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">opacity</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-493" id="section-493">&#182;</a>
</div>
<p>We should always get a number back from opacity</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="s2">&quot;opacity&quot;</span> <span class="p">);</span>
          <span class="k">return</span> <span class="nx">ret</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span> <span class="s2">&quot;1&quot;</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">opacity</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-494" id="section-494">&#182;</a>
</div>
<p>Exclude the following css properties to add px</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">cssNumber</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;fillOpacity&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;fontWeight&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;lineHeight&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;opacity&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;orphans&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;widows&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;zIndex&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;zoom&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-495" id="section-495">&#182;</a>
</div>
<p>Add in properties whose names you wish to fix before
setting or getting the value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">cssProps</span><span class="o">:</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-496" id="section-496">&#182;</a>
</div>
<p>normalize float css property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="s2">&quot;float&quot;</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">cssFloat</span> <span class="o">?</span> <span class="s2">&quot;cssFloat&quot;</span> <span class="o">:</span> <span class="s2">&quot;styleFloat&quot;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-497" id="section-497">&#182;</a>
</div>
<p>Get and set the style property on a DOM Node</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">style</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-498" id="section-498">&#182;</a>
</div>
<p>Don't set styles on text and comment nodes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">8</span> <span class="o">||</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-499" id="section-499">&#182;</a>
</div>
<p>Make sure that we're working with the right name</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">origName</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">),</span>
      <span class="nx">style</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span> <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">];</span>

    <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssProps</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">origName</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-500" id="section-500">&#182;</a>
</div>
<p>Check if we're setting a value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">value</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-501" id="section-501">&#182;</a>
</div>
<p>Make sure that NaN and null values aren't set. See: #7116</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">isNaN</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-502" id="section-502">&#182;</a>
</div>
<p>convert relative number strings (+= or -=) to relative numbers. #7345</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">rrelNum</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="o">+</span><span class="nx">value</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rrelNumFilter</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-503" id="section-503">&#182;</a>
</div>
<p>Fixes bug #9237</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;number&quot;</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-504" id="section-504">&#182;</a>
</div>
<p>If a number was passed in, add 'px' to the (except for certain CSS properties)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssNumber</span><span class="p">[</span> <span class="nx">origName</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">value</span> <span class="o">+=</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-505" id="section-505">&#182;</a>
</div>
<p>If a hook was provided, use that value, otherwise just set the specified value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">hooks</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="s2">&quot;set&quot;</span> <span class="k">in</span> <span class="nx">hooks</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-506" id="section-506">&#182;</a>
</div>
<p>Wrapped to prevent IE from throwing errors when 'invalid' values are provided
Fixes bug #5509</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>
      <span class="p">}</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-507" id="section-507">&#182;</a>
</div>
<p>If a hook was provided get the non-computed value from there</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-508" id="section-508">&#182;</a>
</div>
<p>Otherwise just get the value from the style object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">css</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-509" id="section-509">&#182;</a>
</div>
<p>Make sure that we're working with the right name</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssProps</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-510" id="section-510">&#182;</a>
</div>
<p>cssFloat needs a special treatment</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;cssFloat&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;float&quot;</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-511" id="section-511">&#182;</a>
</div>
<p>If a hook was provided get the computed value from there</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;get&quot;</span> <span class="k">in</span> <span class="nx">hooks</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">))</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-512" id="section-512">&#182;</a>
</div>
<p>Otherwise, if a way to get the computed value exists, use that</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">curCSS</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-513" id="section-513">&#182;</a>
</div>
<p>A method for quickly swapping in/out CSS properties to get correct calculations</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">swap</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">old</span> <span class="o">=</span> <span class="p">{};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-514" id="section-514">&#182;</a>
</div>
<p>Remember the old values, and insert the new ones</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">old</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">options</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-515" id="section-515">&#182;</a>
</div>
<p>Revert the old values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">old</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-516" id="section-516">&#182;</a>
</div>
<p>DEPRECATED, Use jQuery.css() instead</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">curCSS</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="s2">&quot;width&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">val</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">!==</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">getWH</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">swap</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">cssShow</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">val</span> <span class="o">=</span> <span class="nx">getWH</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">);</span>
          <span class="p">});</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nx">val</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">rnumpx</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-517" id="section-517">&#182;</a>
</div>
<p>ignore negative width and height values #1599</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">value</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">value</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
        <span class="p">}</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">opacity</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">.</span><span class="nx">opacity</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-518" id="section-518">&#182;</a>
</div>
<p>IE uses filters for opacity</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">ropacity</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="p">(</span><span class="nx">computed</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">.</span><span class="nx">filter</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">filter</span><span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">?</span>
        <span class="p">(</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nb">RegExp</span><span class="p">.</span><span class="nx">$1</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">100</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span>
        <span class="nx">computed</span> <span class="o">?</span> <span class="s2">&quot;1&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">},</span>

    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">style</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span>
        <span class="nx">currentStyle</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-519" id="section-519">&#182;</a>
</div>
<p>IE has trouble with opacity if it does not have layout
Force it by setting the zoom level</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">style</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-520" id="section-520">&#182;</a>
</div>
<p>Set the alpha filter to set the opacity</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">opacity</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nb">isNaN</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">?</span>
        <span class="s2">&quot;&quot;</span> <span class="o">:</span>
        <span class="s2">&quot;alpha(opacity=&quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span>
        <span class="nx">filter</span> <span class="o">=</span> <span class="nx">currentStyle</span> <span class="o">&amp;&amp;</span> <span class="nx">currentStyle</span><span class="p">.</span><span class="nx">filter</span> <span class="o">||</span> <span class="nx">style</span><span class="p">.</span><span class="nx">filter</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

      <span class="nx">style</span><span class="p">.</span><span class="nx">filter</span> <span class="o">=</span> <span class="nx">ralpha</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">filter</span> <span class="p">)</span> <span class="o">?</span>
        <span class="nx">filter</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">ralpha</span><span class="p">,</span> <span class="nx">opacity</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">filter</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">opacity</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-521" id="section-521">&#182;</a>
</div>
<p>This hook cannot be added until DOM ready because the support test
for it is not run until after DOM ready</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">reliableMarginRight</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssHooks</span><span class="p">.</span><span class="nx">marginRight</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-522" id="section-522">&#182;</a>
</div>
<p>WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
Work around by temporarily setting element display to inline-block</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="kd">var</span> <span class="nx">ret</span><span class="p">;</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">swap</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="p">{</span> <span class="s2">&quot;display&quot;</span><span class="o">:</span> <span class="s2">&quot;inline-block&quot;</span> <span class="p">},</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">computed</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">ret</span> <span class="o">=</span> <span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;margin-right&quot;</span><span class="p">,</span> <span class="s2">&quot;marginRight&quot;</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">marginRight</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span> <span class="o">&amp;&amp;</span> <span class="nb">document</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">getComputedStyle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span><span class="p">,</span> <span class="nx">defaultView</span><span class="p">,</span> <span class="nx">computedStyle</span><span class="p">;</span>

    <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rupper</span><span class="p">,</span> <span class="s2">&quot;-$1&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="nx">defaultView</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="nx">computedStyle</span> <span class="o">=</span> <span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">null</span> <span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">computedStyle</span><span class="p">.</span><span class="nx">getPropertyValue</span><span class="p">(</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">ret</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">currentStyle</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">currentStyle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">left</span><span class="p">,</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span>
      <span class="nx">rsLeft</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">runtimeStyle</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">runtimeStyle</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span>
      <span class="nx">style</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-523" id="section-523">&#182;</a>
</div>
<p>From the awesome hack by Dean Edwards
<a href='http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291'>http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-524" id="section-524">&#182;</a>
</div>
<p>If we're not dealing with a regular pixel number
but a number that has a weird ending, we need to convert it to pixels</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">rnumpx</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">rnum</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-525" id="section-525">&#182;</a>
</div>
<p>Remember the original values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">left</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-526" id="section-526">&#182;</a>
</div>
<p>Put in the new values to get a computed value out</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">rsLeft</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">runtimeStyle</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;fontSize&quot;</span> <span class="o">?</span> <span class="s2">&quot;1em&quot;</span> <span class="o">:</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">||</span> <span class="mi">0</span><span class="p">);</span>
      <span class="nx">ret</span> <span class="o">=</span> <span class="nx">style</span><span class="p">.</span><span class="nx">pixelLeft</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-527" id="section-527">&#182;</a>
</div>
<p>Revert the changed values</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">rsLeft</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">runtimeStyle</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">rsLeft</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">ret</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">?</span> <span class="s2">&quot;auto&quot;</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="nx">curCSS</span> <span class="o">=</span> <span class="nx">getComputedStyle</span> <span class="o">||</span> <span class="nx">currentStyle</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">getWH</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-528" id="section-528">&#182;</a>
</div>
<p>Start with offset property</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="o">?</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetWidth</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">,</span>
    <span class="nx">which</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="o">?</span> <span class="nx">cssWidth</span> <span class="o">:</span> <span class="nx">cssHeight</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">!==</span> <span class="s2">&quot;border&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">which</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">val</span> <span class="o">-=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;padding&quot;</span> <span class="o">+</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">===</span> <span class="s2">&quot;margin&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">val</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">extra</span> <span class="o">+</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">val</span> <span class="o">-=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span> <span class="o">+</span> <span class="k">this</span> <span class="o">+</span> <span class="s2">&quot;Width&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">val</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-529" id="section-529">&#182;</a>
</div>
<p>Fall back to computed then uncomputed css if necessary</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">val</span> <span class="o">=</span> <span class="nx">curCSS</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">name</span> <span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">val</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-530" id="section-530">&#182;</a>
</div>
<p>Normalize "", auto, and prepare for extra</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">val</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-531" id="section-531">&#182;</a>
</div>
<p>Add padding, border, margin</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">which</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">val</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;padding&quot;</span> <span class="o">+</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">!==</span> <span class="s2">&quot;padding&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;border&quot;</span> <span class="o">+</span> <span class="k">this</span> <span class="o">+</span> <span class="s2">&quot;Width&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">extra</span> <span class="o">===</span> <span class="s2">&quot;margin&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">val</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">extra</span> <span class="o">+</span> <span class="k">this</span> <span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">val</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">hidden</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetWidth</span><span class="p">,</span>
      <span class="nx">height</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">(</span><span class="nx">width</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">height</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">reliableHiddenOffsets</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">))</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">visible</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">hidden</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">}</span>




<span class="kd">var</span> <span class="nx">r20</span> <span class="o">=</span> <span class="sr">/%20/g</span><span class="p">,</span>
  <span class="nx">rbracket</span> <span class="o">=</span> <span class="sr">/\[\]$/</span><span class="p">,</span>
  <span class="nx">rCRLF</span> <span class="o">=</span> <span class="sr">/\r?\n/g</span><span class="p">,</span>
  <span class="nx">rhash</span> <span class="o">=</span> <span class="sr">/#.*$/</span><span class="p">,</span>
  <span class="nx">rheaders</span> <span class="o">=</span> <span class="sr">/^(.*?):[ \t]*([^\r\n]*)\r?$/mg</span><span class="p">,</span> <span class="c1">// IE leaves an \r character at EOL</span>
  <span class="nx">rinput</span> <span class="o">=</span> <span class="sr">/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="7653---8125---8152--local-protocol-detection">
  <h1>
    <a href="#7653---8125---8152--local-protocol-detection" class="pilcrow">&#182;</a>
    7653, #8125, #8152: local protocol detection
  </h1>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">rlocalProtocol</span> <span class="o">=</span> <span class="sr">/^(?:about|app|app\-storage|.+\-extension|file|widget):$/</span><span class="p">,</span>
  <span class="nx">rnoContent</span> <span class="o">=</span> <span class="sr">/^(?:GET|HEAD)$/</span><span class="p">,</span>
  <span class="nx">rprotocol</span> <span class="o">=</span> <span class="sr">/^\/\//</span><span class="p">,</span>
  <span class="nx">rquery</span> <span class="o">=</span> <span class="sr">/\?/</span><span class="p">,</span>
  <span class="nx">rscript</span> <span class="o">=</span> <span class="sr">/&lt;script\b[^&lt;]*(?:(?!&lt;\/script&gt;)&lt;[^&lt;]*)*&lt;\/script&gt;/gi</span><span class="p">,</span>
  <span class="nx">rselectTextarea</span> <span class="o">=</span> <span class="sr">/^(?:select|textarea)/i</span><span class="p">,</span>
  <span class="nx">rspacesAjax</span> <span class="o">=</span> <span class="sr">/\s+/</span><span class="p">,</span>
  <span class="nx">rts</span> <span class="o">=</span> <span class="sr">/([?&amp;])_=[^&amp;]*/</span><span class="p">,</span>
  <span class="nx">rurl</span> <span class="o">=</span> <span class="sr">/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-533" id="section-533">&#182;</a>
</div>
<p>Keep a copy of the old load method</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">_load</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">load</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-534" id="section-534">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Prefilters
1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
2) These are called:
   - BEFORE asking for a transport
   - AFTER param serialization (s.data is a string if s.processData is true)
3) key is the dataType
4) the catchall symbol "<em>" can be used
5) execution will start with transport dataType and THEN continue down to "</em>" if needed</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">prefilters</span> <span class="o">=</span> <span class="p">{},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-535" id="section-535">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Transports bindings
1) key is the dataType
2) the catchall symbol "<em>" can be used
3) selection will start with transport dataType and THEN go to "</em>" if needed</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">transports</span> <span class="o">=</span> <span class="p">{},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-536" id="section-536">&#182;</a>
</div>
<p>Document location</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ajaxLocation</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-537" id="section-537">&#182;</a>
</div>
<p>Document location segments</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ajaxLocParts</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="8138--ie-may-throw-an-exception-when-accessing">
  <h1>
    <a href="#8138--ie-may-throw-an-exception-when-accessing" class="pilcrow">&#182;</a>
    8138, IE may throw an exception when accessing
  </h1>
</div>


<p>a field from window.location if document.domain has been set</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">try</span> <span class="p">{</span>
  <span class="nx">ajaxLocation</span> <span class="o">=</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-539" id="section-539">&#182;</a>
</div>
<p>Use the href attribute of an A element
since IE will modify it given document.location</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ajaxLocation</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;a&quot;</span> <span class="p">);</span>
  <span class="nx">ajaxLocation</span><span class="p">.</span><span class="nx">href</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="nx">ajaxLocation</span> <span class="o">=</span> <span class="nx">ajaxLocation</span><span class="p">.</span><span class="nx">href</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-540" id="section-540">&#182;</a>
</div>
<p>Segment location into parts</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">ajaxLocParts</span> <span class="o">=</span> <span class="nx">rurl</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">ajaxLocation</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">)</span> <span class="o">||</span> <span class="p">[];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-541" id="section-541">&#182;</a>
</div>
<p>Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">addToPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">structure</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-542" id="section-542">&#182;</a>
</div>
<p>dataTypeExpression is optional and defaults to "*"</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">dataTypeExpression</span><span class="p">,</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">{</span>

    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">dataTypeExpression</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">func</span> <span class="o">=</span> <span class="nx">dataTypeExpression</span><span class="p">;</span>
      <span class="nx">dataTypeExpression</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">func</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">dataTypes</span> <span class="o">=</span> <span class="nx">dataTypeExpression</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span> <span class="nx">rspacesAjax</span> <span class="p">),</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">length</span> <span class="o">=</span> <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
        <span class="nx">dataType</span><span class="p">,</span>
        <span class="nx">list</span><span class="p">,</span>
        <span class="nx">placeBefore</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-543" id="section-543">&#182;</a>
</div>
<p>For each dataType in the dataTypeExpression</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span><span class="p">(;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">dataType</span> <span class="o">=</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-544" id="section-544">&#182;</a>
</div>
<p>We control if we're asked to add before
any existing element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">placeBefore</span> <span class="o">=</span> <span class="sr">/^\+/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">dataType</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">placeBefore</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">dataType</span> <span class="o">=</span> <span class="nx">dataType</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span> <span class="mi">1</span> <span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;*&quot;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">list</span> <span class="o">=</span> <span class="nx">structure</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">structure</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">||</span> <span class="p">[];</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-545" id="section-545">&#182;</a>
</div>
<p>then we add to the structure accordingly</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">list</span><span class="p">[</span> <span class="nx">placeBefore</span> <span class="o">?</span> <span class="s2">&quot;unshift&quot;</span> <span class="o">:</span> <span class="s2">&quot;push&quot;</span> <span class="p">](</span> <span class="nx">func</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-546" id="section-546">&#182;</a>
</div>
<p>Base inspection function for prefilters and transports</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">structure</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">originalOptions</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span>
    <span class="nx">dataType</span> <span class="cm">/* internal */</span><span class="p">,</span> <span class="nx">inspected</span> <span class="cm">/* internal */</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nx">dataType</span> <span class="o">=</span> <span class="nx">dataType</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
  <span class="nx">inspected</span> <span class="o">=</span> <span class="nx">inspected</span> <span class="o">||</span> <span class="p">{};</span>

  <span class="nx">inspected</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span> <span class="nx">structure</span><span class="p">[</span> <span class="nx">dataType</span> <span class="p">],</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">length</span> <span class="o">=</span> <span class="nx">list</span> <span class="o">?</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">executeOnly</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">structure</span> <span class="o">===</span> <span class="nx">prefilters</span> <span class="p">),</span>
    <span class="nx">selection</span><span class="p">;</span>

  <span class="k">for</span><span class="p">(;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">executeOnly</span> <span class="o">||</span> <span class="o">!</span><span class="nx">selection</span> <span class="p">);</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">selection</span> <span class="o">=</span> <span class="nx">list</span><span class="p">[</span> <span class="nx">i</span> <span class="p">](</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">originalOptions</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-547" id="section-547">&#182;</a>
</div>
<p>If we got redirected to another dataType
we try there if executing only and not done already</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">selection</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">executeOnly</span> <span class="o">||</span> <span class="nx">inspected</span><span class="p">[</span> <span class="nx">selection</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">selection</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">selection</span> <span class="p">);</span>
        <span class="nx">selection</span> <span class="o">=</span> <span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span>
            <span class="nx">structure</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">originalOptions</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">selection</span><span class="p">,</span> <span class="nx">inspected</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-548" id="section-548">&#182;</a>
</div>
<p>If we're only executing or nothing was selected
we try the catchall dataType if not done already</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">executeOnly</span> <span class="o">||</span> <span class="o">!</span><span class="nx">selection</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">inspected</span><span class="p">[</span> <span class="s2">&quot;*&quot;</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">selection</span> <span class="o">=</span> <span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span>
        <span class="nx">structure</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">originalOptions</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="nx">inspected</span> <span class="p">);</span>
  <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-549" id="section-549">&#182;</a>
</div>
<p>unnecessary when only executing (prefilters)
but it'll be ignored by the caller in that case</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">return</span> <span class="nx">selection</span><span class="p">;</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">load</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">url</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">_load</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">_load</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-550" id="section-550">&#182;</a>
</div>
<p>Don't do a request if no elements are being requested</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">off</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">off</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">selector</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="nx">off</span><span class="p">,</span> <span class="nx">url</span><span class="p">.</span><span class="nx">length</span> <span class="p">);</span>
      <span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">off</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-551" id="section-551">&#182;</a>
</div>
<p>Default to a GET request</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-552" id="section-552">&#182;</a>
</div>
<p>If the second parameter was provided</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">params</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-553" id="section-553">&#182;</a>
</div>
<p>If it's a function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">params</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-554" id="section-554">&#182;</a>
</div>
<p>We assume that it's the callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">callback</span> <span class="o">=</span> <span class="nx">params</span><span class="p">;</span>
        <span class="nx">params</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-555" id="section-555">&#182;</a>
</div>
<p>Otherwise, build a param string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">params</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">params</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span> <span class="nx">params</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">traditional</span> <span class="p">);</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;POST&quot;</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-556" id="section-556">&#182;</a>
</div>
<p>Request the remote document</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span><span class="p">,</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">type</span><span class="p">,</span>
      <span class="nx">dataType</span><span class="o">:</span> <span class="s2">&quot;html&quot;</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">params</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-557" id="section-557">&#182;</a>
</div>
<p>Complete callback (responseText is used internally)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">complete</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">responseText</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-558" id="section-558">&#182;</a>
</div>
<p>Store the response as specified by the jqXHR object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">responseText</span> <span class="o">=</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-559" id="section-559">&#182;</a>
</div>
<p>If successful, inject the HTML into all the matched elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">isResolved</span><span class="p">()</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap" id="4825--get-the-actual-response-in-case">
  <h1>
    <a href="#4825--get-the-actual-response-in-case" class="pilcrow">&#182;</a>
    4825: Get the actual response in case
  </h1>
</div>


<p>a dataFilter is present in ajaxSettings</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">r</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">responseText</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
          <span class="p">});</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-561" id="section-561">&#182;</a>
</div>
<p>See if a selector was specified</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">self</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span> <span class="nx">selector</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-562" id="section-562">&#182;</a>
</div>
<p>Create a dummy div to hold the results</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">jQuery</span><span class="p">(</span><span class="s2">&quot;&lt;div&gt;&quot;</span><span class="p">)</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-563" id="section-563">&#182;</a>
</div>
<p>inject the contents of the document in, removing the scripts
to avoid any 'Permission Denied' errors in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">responseText</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">rscript</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-564" id="section-564">&#182;</a>
</div>
<p>Locate the specified elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="o">:</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-565" id="section-565">&#182;</a>
</div>
<p>If not, just inject the full result</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">responseText</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">callback</span><span class="p">,</span> <span class="p">[</span> <span class="nx">responseText</span><span class="p">,</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">]</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">serialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">serializeArray</span><span class="p">()</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">serializeArray</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">makeArray</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span> <span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">disabled</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">checked</span> <span class="o">||</span> <span class="nx">rselectTextarea</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">)</span> <span class="o">||</span>
          <span class="nx">rinput</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">){</span>
      <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">).</span><span class="nx">val</span><span class="p">();</span>

      <span class="k">return</span> <span class="nx">val</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span>
        <span class="kc">null</span> <span class="o">:</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="o">?</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span> <span class="nx">val</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">i</span> <span class="p">){</span>
            <span class="k">return</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">val</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rCRLF</span><span class="p">,</span> <span class="s2">&quot;\r\n&quot;</span> <span class="p">)</span> <span class="p">};</span>
          <span class="p">})</span> <span class="o">:</span>
          <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="o">:</span> <span class="nx">val</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rCRLF</span><span class="p">,</span> <span class="s2">&quot;\r\n&quot;</span> <span class="p">)</span> <span class="p">};</span>
    <span class="p">}).</span><span class="nx">get</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-566" id="section-566">&#182;</a>
</div>
<p>Attach a bunch of functions for handling common AJAX events</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="s2">&quot;ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend&quot;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">),</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">o</span> <span class="p">){</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">o</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">f</span> <span class="p">){</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span> <span class="nx">o</span><span class="p">,</span> <span class="nx">f</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">[</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">method</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-567" id="section-567">&#182;</a>
</div>
<p>shift arguments if data argument was omitted</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span> <span class="o">||</span> <span class="nx">callback</span><span class="p">;</span>
      <span class="nx">callback</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nx">type</span><span class="o">:</span> <span class="nx">method</span><span class="p">,</span>
      <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">,</span>
      <span class="nx">success</span><span class="o">:</span> <span class="nx">callback</span><span class="p">,</span>
      <span class="nx">dataType</span><span class="o">:</span> <span class="nx">type</span>
    <span class="p">});</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>

  <span class="nx">getScript</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="s2">&quot;script&quot;</span> <span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">getJSON</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-568" id="section-568">&#182;</a>
</div>
<p>Creates a full fledged settings object into target
with both ajaxSettings and settings fields.
If target is omitted, writes into ajaxSettings.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ajaxSetup</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">settings</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">settings</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-569" id="section-569">&#182;</a>
</div>
<p>Only one parameter, we extend ajaxSettings</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">settings</span> <span class="o">=</span> <span class="nx">target</span><span class="p">;</span>
      <span class="nx">target</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">,</span> <span class="nx">settings</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-570" id="section-570">&#182;</a>
</div>
<p>target was provided, we extend into it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">,</span> <span class="nx">settings</span> <span class="p">);</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-571" id="section-571">&#182;</a>
</div>
<p>Flatten fields we don't want deep extended</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span><span class="p">(</span> <span class="kd">var</span> <span class="nx">field</span> <span class="k">in</span> <span class="p">{</span> <span class="nx">context</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">url</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">field</span> <span class="k">in</span> <span class="nx">settings</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">target</span><span class="p">[</span> <span class="nx">field</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">settings</span><span class="p">[</span> <span class="nx">field</span> <span class="p">];</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="nx">field</span> <span class="k">in</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">target</span><span class="p">[</span> <span class="nx">field</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">[</span> <span class="nx">field</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">ajaxSettings</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">url</span><span class="o">:</span> <span class="nx">ajaxLocation</span><span class="p">,</span>
    <span class="nx">isLocal</span><span class="o">:</span> <span class="nx">rlocalProtocol</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">),</span>
    <span class="nx">global</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;GET&quot;</span><span class="p">,</span>
    <span class="nx">contentType</span><span class="o">:</span> <span class="s2">&quot;application/x-www-form-urlencoded&quot;</span><span class="p">,</span>
    <span class="nx">processData</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">async</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-572" id="section-572">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>timeout: 0,
data: null,
dataType: null,
username: null,
password: null,
cache: null,
traditional: false,
headers: {},</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">accepts</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">xml</span><span class="o">:</span> <span class="s2">&quot;application/xml, text/xml&quot;</span><span class="p">,</span>
      <span class="nx">html</span><span class="o">:</span> <span class="s2">&quot;text/html&quot;</span><span class="p">,</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s2">&quot;text/plain&quot;</span><span class="p">,</span>
      <span class="nx">json</span><span class="o">:</span> <span class="s2">&quot;application/json, text/javascript&quot;</span><span class="p">,</span>
      <span class="s2">&quot;*&quot;</span><span class="o">:</span> <span class="s2">&quot;*/*&quot;</span>
    <span class="p">},</span>

    <span class="nx">contents</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">xml</span><span class="o">:</span> <span class="sr">/xml/</span><span class="p">,</span>
      <span class="nx">html</span><span class="o">:</span> <span class="sr">/html/</span><span class="p">,</span>
      <span class="nx">json</span><span class="o">:</span> <span class="sr">/json/</span>
    <span class="p">},</span>

    <span class="nx">responseFields</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">xml</span><span class="o">:</span> <span class="s2">&quot;responseXML&quot;</span><span class="p">,</span>
      <span class="nx">text</span><span class="o">:</span> <span class="s2">&quot;responseText&quot;</span>
    <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-573" id="section-573">&#182;</a>
</div>
<p>List of data converters
1) key format is "source_type destination_type" (a single space in-between)
2) the catchall symbol "*" can be used for source_type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">converters</span><span class="o">:</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-574" id="section-574">&#182;</a>
</div>
<p>Convert anything to text</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="s2">&quot;* text&quot;</span><span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nb">String</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-575" id="section-575">&#182;</a>
</div>
<p>Text to html (true = no transformation)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="s2">&quot;text html&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-576" id="section-576">&#182;</a>
</div>
<p>Evaluate text as a json expression</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="s2">&quot;text json&quot;</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseJSON</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-577" id="section-577">&#182;</a>
</div>
<p>Parse text as xml</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="s2">&quot;text xml&quot;</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">parseXML</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">ajaxPrefilter</span><span class="o">:</span> <span class="nx">addToPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">prefilters</span> <span class="p">),</span>
  <span class="nx">ajaxTransport</span><span class="o">:</span> <span class="nx">addToPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">transports</span> <span class="p">),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-578" id="section-578">&#182;</a>
</div>
<p>Main method</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ajax</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-579" id="section-579">&#182;</a>
</div>
<p>If url is an object, simulate pre-1.5 signature</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">url</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">options</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span>
      <span class="nx">url</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-580" id="section-580">&#182;</a>
</div>
<p>Force options to be an object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>

    <span class="kd">var</span> <span class="c1">// Create the final options object</span>
      <span class="nx">s</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSetup</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">options</span> <span class="p">),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-581" id="section-581">&#182;</a>
</div>
<p>Callbacks context</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">callbackContext</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">context</span> <span class="o">||</span> <span class="nx">s</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-582" id="section-582">&#182;</a>
</div>
<p>Context for global events
It's the callbackContext if one was provided in the options
and if it's a DOM node or a jQuery collection</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">globalEventContext</span> <span class="o">=</span> <span class="nx">callbackContext</span> <span class="o">!==</span> <span class="nx">s</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span> <span class="nx">callbackContext</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">||</span> <span class="nx">callbackContext</span> <span class="k">instanceof</span> <span class="nx">jQuery</span> <span class="p">)</span> <span class="o">?</span>
            <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">callbackContext</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-583" id="section-583">&#182;</a>
</div>
<p>Deferreds</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">Deferred</span><span class="p">(),</span>
      <span class="nx">completeDeferred</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_Deferred</span><span class="p">(),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-584" id="section-584">&#182;</a>
</div>
<p>Status-dependent callbacks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">statusCode</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">||</span> <span class="p">{},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-585" id="section-585">&#182;</a>
</div>
<p>ifModified key</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">ifModifiedKey</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-586" id="section-586">&#182;</a>
</div>
<p>Headers (they are sent all at once)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">requestHeaders</span> <span class="o">=</span> <span class="p">{},</span>
      <span class="nx">requestHeadersNames</span> <span class="o">=</span> <span class="p">{},</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-587" id="section-587">&#182;</a>
</div>
<p>Response headers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">responseHeadersString</span><span class="p">,</span>
      <span class="nx">responseHeaders</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-588" id="section-588">&#182;</a>
</div>
<p>transport</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">transport</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-589" id="section-589">&#182;</a>
</div>
<p>timeout handle</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">timeoutTimer</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-590" id="section-590">&#182;</a>
</div>
<p>Cross-domain detection vars</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">parts</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-591" id="section-591">&#182;</a>
</div>
<p>The jqXHR state</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-592" id="section-592">&#182;</a>
</div>
<p>To know if global events are to be dispatched</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">fireGlobals</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-593" id="section-593">&#182;</a>
</div>
<p>Loop variable</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">i</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-594" id="section-594">&#182;</a>
</div>
<p>Fake xhr</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jqXHR</span> <span class="o">=</span> <span class="p">{</span>

        <span class="nx">readyState</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-595" id="section-595">&#182;</a>
</div>
<p>Caches the header</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">setRequestHeader</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">state</span> <span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">lname</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
            <span class="nx">name</span> <span class="o">=</span> <span class="nx">requestHeadersNames</span><span class="p">[</span> <span class="nx">lname</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">requestHeadersNames</span><span class="p">[</span> <span class="nx">lname</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">name</span><span class="p">;</span>
            <span class="nx">requestHeaders</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-596" id="section-596">&#182;</a>
</div>
<p>Raw string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">getAllResponseHeaders</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">responseHeadersString</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-597" id="section-597">&#182;</a>
</div>
<p>Builds headers hashtable if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">getResponseHeader</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">match</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">responseHeaders</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">responseHeaders</span> <span class="o">=</span> <span class="p">{};</span>
              <span class="k">while</span><span class="p">(</span> <span class="p">(</span> <span class="nx">match</span> <span class="o">=</span> <span class="nx">rheaders</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">responseHeadersString</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">responseHeaders</span><span class="p">[</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span> <span class="mi">2</span> <span class="p">];</span>
              <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">match</span> <span class="o">=</span> <span class="nx">responseHeaders</span><span class="p">[</span> <span class="nx">key</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">];</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">match</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">match</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-598" id="section-598">&#182;</a>
</div>
<p>Overrides response content-type header</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">overrideMimeType</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">type</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">state</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">s</span><span class="p">.</span><span class="nx">mimeType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-599" id="section-599">&#182;</a>
</div>
<p>Cancel the request</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">abort</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">statusText</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">statusText</span> <span class="o">=</span> <span class="nx">statusText</span> <span class="o">||</span> <span class="s2">&quot;abort&quot;</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">transport</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">transport</span><span class="p">.</span><span class="nx">abort</span><span class="p">(</span> <span class="nx">statusText</span> <span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">done</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">statusText</span> <span class="p">);</span>
          <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-600" id="section-600">&#182;</a>
</div>
<p>Callback for when everything is done
It is defined here because jslint complains if it is declared
at the end of the function (which would be more logical and readable)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">function</span> <span class="nx">done</span><span class="p">(</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">responses</span><span class="p">,</span> <span class="nx">headers</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-601" id="section-601">&#182;</a>
</div>
<p>Called once</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-602" id="section-602">&#182;</a>
</div>
<p>State is "done" now</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">state</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-603" id="section-603">&#182;</a>
</div>
<p>Clear timeout if it exists</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">timeoutTimer</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span> <span class="nx">timeoutTimer</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-604" id="section-604">&#182;</a>
</div>
<p>Dereference transport for early garbage collection
(no matter how long the jqXHR object will be used)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">transport</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-605" id="section-605">&#182;</a>
</div>
<p>Cache response headers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">responseHeadersString</span> <span class="o">=</span> <span class="nx">headers</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-606" id="section-606">&#182;</a>
</div>
<p>Set readyState</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">=</span> <span class="nx">status</span> <span class="o">?</span> <span class="mi">4</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>

      <span class="kd">var</span> <span class="nx">isSuccess</span><span class="p">,</span>
        <span class="nx">success</span><span class="p">,</span>
        <span class="nx">error</span><span class="p">,</span>
        <span class="nx">response</span> <span class="o">=</span> <span class="nx">responses</span> <span class="o">?</span> <span class="nx">ajaxHandleResponses</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">responses</span> <span class="p">)</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span>
        <span class="nx">lastModified</span><span class="p">,</span>
        <span class="nx">etag</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-607" id="section-607">&#182;</a>
</div>
<p>If successful, handle type chaining</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">||</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">304</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-608" id="section-608">&#182;</a>
</div>
<p>Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">ifModified</span> <span class="p">)</span> <span class="p">{</span>

          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">lastModified</span> <span class="o">=</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span> <span class="s2">&quot;Last-Modified&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">lastModified</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">lastModified</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">etag</span> <span class="o">=</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span> <span class="s2">&quot;Etag&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">etag</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">etag</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-609" id="section-609">&#182;</a>
</div>
<p>If not modified</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">304</span> <span class="p">)</span> <span class="p">{</span>

          <span class="nx">statusText</span> <span class="o">=</span> <span class="s2">&quot;notmodified&quot;</span><span class="p">;</span>
          <span class="nx">isSuccess</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-610" id="section-610">&#182;</a>
</div>
<p>If we have data</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

          <span class="k">try</span> <span class="p">{</span>
            <span class="nx">success</span> <span class="o">=</span> <span class="nx">ajaxConvert</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">response</span> <span class="p">);</span>
            <span class="nx">statusText</span> <span class="o">=</span> <span class="s2">&quot;success&quot;</span><span class="p">;</span>
            <span class="nx">isSuccess</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-611" id="section-611">&#182;</a>
</div>
<p>We have a parsererror</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">statusText</span> <span class="o">=</span> <span class="s2">&quot;parsererror&quot;</span><span class="p">;</span>
            <span class="nx">error</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-612" id="section-612">&#182;</a>
</div>
<p>We extract error from statusText
then normalize statusText and status for non-aborts</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">error</span> <span class="o">=</span> <span class="nx">statusText</span><span class="p">;</span>
        <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="nx">statusText</span> <span class="o">||</span> <span class="nx">status</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">statusText</span> <span class="o">=</span> <span class="s2">&quot;error&quot;</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">status</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-613" id="section-613">&#182;</a>
</div>
<p>Set data for the fake xhr object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="nx">status</span><span class="p">;</span>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">statusText</span> <span class="o">=</span> <span class="nx">statusText</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-614" id="section-614">&#182;</a>
</div>
<p>Success/Error</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">isSuccess</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">deferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="p">[</span> <span class="nx">success</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">deferred</span><span class="p">.</span><span class="nx">rejectWith</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">error</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-615" id="section-615">&#182;</a>
</div>
<p>Status-dependent callbacks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">(</span> <span class="nx">statusCode</span> <span class="p">);</span>
      <span class="nx">statusCode</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">globalEventContext</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajax&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">isSuccess</span> <span class="o">?</span> <span class="s2">&quot;Success&quot;</span> <span class="o">:</span> <span class="s2">&quot;Error&quot;</span> <span class="p">),</span>
            <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">isSuccess</span> <span class="o">?</span> <span class="nx">success</span> <span class="o">:</span> <span class="nx">error</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-616" id="section-616">&#182;</a>
</div>
<p>Complete</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">completeDeferred</span><span class="p">.</span><span class="nx">resolveWith</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">statusText</span> <span class="p">]</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">globalEventContext</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajaxComplete&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span><span class="p">]</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-617" id="section-617">&#182;</a>
</div>
<p>Handle the global AJAX counter</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="o">--</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">active</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajaxStop&quot;</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-618" id="section-618">&#182;</a>
</div>
<p>Attach deferreds</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">(</span> <span class="nx">jqXHR</span> <span class="p">);</span>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">success</span> <span class="o">=</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">fail</span><span class="p">;</span>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">complete</span> <span class="o">=</span> <span class="nx">completeDeferred</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-619" id="section-619">&#182;</a>
</div>
<p>Status-dependent callbacks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">map</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">map</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">tmp</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span><span class="p">(</span> <span class="nx">tmp</span> <span class="k">in</span> <span class="nx">map</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">statusCode</span><span class="p">[</span> <span class="nx">tmp</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">statusCode</span><span class="p">[</span><span class="nx">tmp</span><span class="p">],</span> <span class="nx">map</span><span class="p">[</span><span class="nx">tmp</span><span class="p">]</span> <span class="p">];</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">map</span><span class="p">[</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">status</span> <span class="p">];</span>
          <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="nx">tmp</span><span class="p">,</span> <span class="nx">tmp</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-620" id="section-620">&#182;</a>
</div>
<p>Remove hash character (#7531: and string promotion)
Add protocol if not provided (#5866: IE7 issue with protocol-less urls)
We also use the url parameter if available</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span> <span class="nx">url</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rhash</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rprotocol</span><span class="p">,</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;//&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-621" id="section-621">&#182;</a>
</div>
<p>Extract dataTypes list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataType</span> <span class="o">||</span> <span class="s2">&quot;*&quot;</span> <span class="p">).</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span> <span class="nx">rspacesAjax</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-622" id="section-622">&#182;</a>
</div>
<p>Determine if a cross-domain request is in order</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="o">==</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">parts</span> <span class="o">=</span> <span class="nx">rurl</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">);</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="o">=</span> <span class="o">!!</span><span class="p">(</span> <span class="nx">parts</span> <span class="o">&amp;&amp;</span>
        <span class="p">(</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">!=</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">!=</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">2</span> <span class="p">]</span> <span class="o">||</span>
          <span class="p">(</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;http:&quot;</span> <span class="o">?</span> <span class="mi">80</span> <span class="o">:</span> <span class="mi">443</span> <span class="p">)</span> <span class="p">)</span> <span class="o">!=</span>
            <span class="p">(</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">3</span> <span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">ajaxLocParts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;http:&quot;</span> <span class="o">?</span> <span class="mi">80</span> <span class="o">:</span> <span class="mi">443</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span>
      <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-623" id="section-623">&#182;</a>
</div>
<p>Convert data if not already a string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">processData</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">param</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">traditional</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-624" id="section-624">&#182;</a>
</div>
<p>Apply prefilters</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">prefilters</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-625" id="section-625">&#182;</a>
</div>
<p>If request was aborted inside a prefiler, stop there</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-626" id="section-626">&#182;</a>
</div>
<p>We can fire global events as of now if asked to</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">fireGlobals</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">global</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-627" id="section-627">&#182;</a>
</div>
<p>Uppercase the type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">type</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-628" id="section-628">&#182;</a>
</div>
<p>Determine if request has content</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">hasContent</span> <span class="o">=</span> <span class="o">!</span><span class="nx">rnoContent</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">type</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-629" id="section-629">&#182;</a>
</div>
<p>Watch for a new set of requests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">active</span><span class="o">++</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajaxStart&quot;</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-630" id="section-630">&#182;</a>
</div>
<p>More options handling for requests with no content</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">s</span><span class="p">.</span><span class="nx">hasContent</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-631" id="section-631">&#182;</a>
</div>
<p>If data is available, append data to url</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">+=</span> <span class="p">(</span> <span class="nx">rquery</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&amp;&quot;</span> <span class="o">:</span> <span class="s2">&quot;?&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-632" id="section-632">&#182;</a>
</div>
<p>Get ifModifiedKey before adding the anti-cache parameter</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">ifModifiedKey</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-633" id="section-633">&#182;</a>
</div>
<p>Add anti-cache in url if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">cache</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>

        <span class="kd">var</span> <span class="nx">ts</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-634" id="section-634">&#182;</a>
</div>
<p>try replacing _= if it is there</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">ret</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">rts</span><span class="p">,</span> <span class="s2">&quot;$1_=&quot;</span> <span class="o">+</span> <span class="nx">ts</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-635" id="section-635">&#182;</a>
</div>
<p>if nothing was replaced, add timestamp to the end</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">ret</span> <span class="o">+</span> <span class="p">(</span> <span class="p">(</span><span class="nx">ret</span> <span class="o">===</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">?</span> <span class="p">(</span> <span class="nx">rquery</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&amp;&quot;</span> <span class="o">:</span> <span class="s2">&quot;?&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;_=&quot;</span> <span class="o">+</span> <span class="nx">ts</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-636" id="section-636">&#182;</a>
</div>
<p>Set the correct header, if data is being sent</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">hasContent</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">contentType</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">contentType</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="s2">&quot;Content-Type&quot;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">contentType</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-637" id="section-637">&#182;</a>
</div>
<p>Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">ifModified</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ifModifiedKey</span> <span class="o">=</span> <span class="nx">ifModifiedKey</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">lastModified</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="s2">&quot;If-Modified-Since&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">lastModified</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">etag</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="s2">&quot;If-None-Match&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">etag</span><span class="p">[</span> <span class="nx">ifModifiedKey</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-638" id="section-638">&#182;</a>
</div>
<p>Set the Accepts header for the server, depending on the dataType</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span>
      <span class="s2">&quot;Accept&quot;</span><span class="p">,</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">accepts</span><span class="p">[</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">?</span>
        <span class="nx">s</span><span class="p">.</span><span class="nx">accepts</span><span class="p">[</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">!==</span> <span class="s2">&quot;*&quot;</span> <span class="o">?</span> <span class="s2">&quot;, */*; q=0.01&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">:</span>
        <span class="nx">s</span><span class="p">.</span><span class="nx">accepts</span><span class="p">[</span> <span class="s2">&quot;*&quot;</span> <span class="p">]</span>
    <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-639" id="section-639">&#182;</a>
</div>
<p>Check for headers option</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">s</span><span class="p">.</span><span class="nx">headers</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-640" id="section-640">&#182;</a>
</div>
<p>Allow custom headers/mimetypes and early abort</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">beforeSend</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">beforeSend</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">callbackContext</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span> <span class="p">)</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">||</span> <span class="nx">state</span> <span class="o">===</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-641" id="section-641">&#182;</a>
</div>
<p>Abort if not done already</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-642" id="section-642">&#182;</a>
</div>
<p>Install callbacks on deferreds</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">{</span> <span class="nx">success</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">error</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">complete</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">[</span> <span class="nx">i</span> <span class="p">](</span> <span class="nx">s</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-643" id="section-643">&#182;</a>
</div>
<p>Get transport</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">transport</span> <span class="o">=</span> <span class="nx">inspectPrefiltersOrTransports</span><span class="p">(</span> <span class="nx">transports</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-644" id="section-644">&#182;</a>
</div>
<p>If no transport, we auto-abort</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">transport</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">done</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;No Transport&quot;</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-645" id="section-645">&#182;</a>
</div>
<p>Send global event</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">fireGlobals</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">globalEventContext</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span> <span class="s2">&quot;ajaxSend&quot;</span><span class="p">,</span> <span class="p">[</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">s</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-646" id="section-646">&#182;</a>
</div>
<p>Timeout</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">async</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">timeoutTimer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){</span>
          <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">abort</span><span class="p">(</span> <span class="s2">&quot;timeout&quot;</span> <span class="p">);</span>
        <span class="p">},</span> <span class="nx">s</span><span class="p">.</span><span class="nx">timeout</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">state</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">transport</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span> <span class="nx">requestHeaders</span><span class="p">,</span> <span class="nx">done</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-647" id="section-647">&#182;</a>
</div>
<p>Propagate exception as error if not done</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">done</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">e</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-648" id="section-648">&#182;</a>
</div>
<p>Simply rethrow otherwise</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">e</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="nx">jqXHR</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-649" id="section-649">&#182;</a>
</div>
<p>Serialize an array of form elements or a set of
key/values into a query string</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">param</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">traditional</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="p">[],</span>
      <span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-650" id="section-650">&#182;</a>
</div>
<p>If value is a function, invoke it and return its value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">value</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">value</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">value</span><span class="p">()</span> <span class="o">:</span> <span class="nx">value</span><span class="p">;</span>
        <span class="nx">s</span><span class="p">[</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span> <span class="p">]</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span> <span class="nx">key</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nb">encodeURIComponent</span><span class="p">(</span> <span class="nx">value</span> <span class="p">);</span>
      <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-651" id="section-651">&#182;</a>
</div>
<p>Set traditional to true for jQuery &lt;= 1.3.2 behavior.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">traditional</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">traditional</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">traditional</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-652" id="section-652">&#182;</a>
</div>
<p>If an array was passed in, assume that it is an array of form elements.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">a</span> <span class="p">)</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">a</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isPlainObject</span><span class="p">(</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-653" id="section-653">&#182;</a>
</div>
<p>Serialize the form elements</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">a</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">add</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">value</span> <span class="p">);</span>
      <span class="p">});</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-654" id="section-654">&#182;</a>
</div>
<p>If traditional, encode the "old" way (the way 1.3.2 or older
did it), otherwise encode params recursively.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">prefix</span> <span class="k">in</span> <span class="nx">a</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">a</span><span class="p">[</span> <span class="nx">prefix</span> <span class="p">],</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-655" id="section-655">&#182;</a>
</div>
<p>Return the resulting serialization</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span> <span class="s2">&quot;&amp;&quot;</span> <span class="p">).</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">r20</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-656" id="section-656">&#182;</a>
</div>
<p>Serialize array item.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">obj</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">v</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">traditional</span> <span class="o">||</span> <span class="nx">rbracket</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">prefix</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-657" id="section-657">&#182;</a>
</div>
<p>Treat each array item as a scalar.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">add</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">v</span> <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-658" id="section-658">&#182;</a>
</div>
<p>If array item is non-scalar (array or object), encode its
numeric index to resolve deserialization ambiguity issues.
Note that rack (as of 1.0.0) can't currently deserialize
nested arrays properly, and attempting to do so may cause
a server error. Possible fixes are to modify rack's
deserialization algorithm or to provide an option or flag
to force array serialization to be shallow.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">v</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="o">?</span> <span class="nx">i</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>

  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">traditional</span> <span class="o">&amp;&amp;</span> <span class="nx">obj</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">obj</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-659" id="section-659">&#182;</a>
</div>
<p>Serialize object item.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">obj</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">buildParams</span><span class="p">(</span> <span class="nx">prefix</span> <span class="o">+</span> <span class="s2">&quot;[&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">,</span> <span class="nx">obj</span><span class="p">[</span> <span class="nx">name</span> <span class="p">],</span> <span class="nx">traditional</span><span class="p">,</span> <span class="nx">add</span> <span class="p">);</span>
    <span class="p">}</span>

  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-660" id="section-660">&#182;</a>
</div>
<p>Serialize scalar item.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">add</span><span class="p">(</span> <span class="nx">prefix</span><span class="p">,</span> <span class="nx">obj</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-661" id="section-661">&#182;</a>
</div>
<p>This is still on the jQuery object... for now
Want to move this to jQuery.ajax some day</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-662" id="section-662">&#182;</a>
</div>
<p>Counter for holding the number of active queries</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">active</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-663" id="section-663">&#182;</a>
</div>
<p>Last-Modified header cache for next request</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">lastModified</span><span class="o">:</span> <span class="p">{},</span>
  <span class="nx">etag</span><span class="o">:</span> <span class="p">{}</span>

<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-664" id="section-664">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Handles responses to an ajax request:
- sets all responseXXX fields accordingly
- finds the right dataType (mediates between content-type and expected dataType)
- returns the corresponding response</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">ajaxHandleResponses</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">jqXHR</span><span class="p">,</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">contents</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">contents</span><span class="p">,</span>
    <span class="nx">dataTypes</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">,</span>
    <span class="nx">responseFields</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">responseFields</span><span class="p">,</span>
    <span class="nx">ct</span><span class="p">,</span>
    <span class="nx">type</span><span class="p">,</span>
    <span class="nx">finalDataType</span><span class="p">,</span>
    <span class="nx">firstDataType</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-665" id="section-665">&#182;</a>
</div>
<p>Fill responseXXX fields</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">for</span><span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">responseFields</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jqXHR</span><span class="p">[</span> <span class="nx">responseFields</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">responses</span><span class="p">[</span> <span class="nx">type</span> <span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-666" id="section-666">&#182;</a>
</div>
<p>Remove auto dataType and get content-type in the process</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">while</span><span class="p">(</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">ct</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">ct</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">mimeType</span> <span class="o">||</span> <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">getResponseHeader</span><span class="p">(</span> <span class="s2">&quot;content-type&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-667" id="section-667">&#182;</a>
</div>
<p>Check if we're dealing with a known content-type</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">ct</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">contents</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">contents</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">contents</span><span class="p">[</span> <span class="nx">type</span> <span class="p">].</span><span class="nx">test</span><span class="p">(</span> <span class="nx">ct</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">type</span> <span class="p">);</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-668" id="section-668">&#182;</a>
</div>
<p>Check to see if we have a response for the expected dataType</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="k">in</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">finalDataType</span> <span class="o">=</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-669" id="section-669">&#182;</a>
</div>
<p>Try convertible dataTypes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span><span class="p">[</span> <span class="nx">type</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">dataTypes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">finalDataType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">firstDataType</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">firstDataType</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-670" id="section-670">&#182;</a>
</div>
<p>Or just use first one</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">finalDataType</span> <span class="o">=</span> <span class="nx">finalDataType</span> <span class="o">||</span> <span class="nx">firstDataType</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-671" id="section-671">&#182;</a>
</div>
<p>If we found a dataType
We add the dataType to the list if needed
and return the corresponding response</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">finalDataType</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">finalDataType</span> <span class="o">!==</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span> <span class="nx">finalDataType</span> <span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">responses</span><span class="p">[</span> <span class="nx">finalDataType</span> <span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-672" id="section-672">&#182;</a>
</div>
<p>Chain conversions given the request and the original response</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">ajaxConvert</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">response</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-673" id="section-673">&#182;</a>
</div>
<p>Apply the dataFilter if provided</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataFilter</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">response</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataFilter</span><span class="p">(</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataType</span> <span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">dataTypes</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">,</span>
    <span class="nx">converters</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="nx">i</span><span class="p">,</span>
    <span class="nx">key</span><span class="p">,</span>
    <span class="nx">length</span> <span class="o">=</span> <span class="nx">dataTypes</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
    <span class="nx">tmp</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-674" id="section-674">&#182;</a>
</div>
<p>Current and previous dataTypes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">current</span> <span class="o">=</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">],</span>
    <span class="nx">prev</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-675" id="section-675">&#182;</a>
</div>
<p>Conversion expression</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">conversion</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-676" id="section-676">&#182;</a>
</div>
<p>Conversion function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">conv</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-677" id="section-677">&#182;</a>
</div>
<p>Conversion functions (transitive conversion)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">conv1</span><span class="p">,</span>
    <span class="nx">conv2</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-678" id="section-678">&#182;</a>
</div>
<p>For each dataType in the chain</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">for</span><span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-679" id="section-679">&#182;</a>
</div>
<p>Create converters map
with lowercased keys</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">===</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span><span class="p">(</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span> <span class="k">typeof</span> <span class="nx">key</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">converters</span><span class="p">[</span> <span class="nx">key</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span><span class="p">[</span> <span class="nx">key</span> <span class="p">];</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-680" id="section-680">&#182;</a>
</div>
<p>Get the dataTypes</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">prev</span> <span class="o">=</span> <span class="nx">current</span><span class="p">;</span>
    <span class="nx">current</span> <span class="o">=</span> <span class="nx">dataTypes</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-681" id="section-681">&#182;</a>
</div>
<p>If current is auto dataType, update it to prev</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span><span class="p">(</span> <span class="nx">current</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">current</span> <span class="o">=</span> <span class="nx">prev</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-682" id="section-682">&#182;</a>
</div>
<p>If no auto and dataTypes are actually different</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">prev</span> <span class="o">!==</span> <span class="s2">&quot;*&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">prev</span> <span class="o">!==</span> <span class="nx">current</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-683" id="section-683">&#182;</a>
</div>
<p>Get the converter</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">conversion</span> <span class="o">=</span> <span class="nx">prev</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">current</span><span class="p">;</span>
      <span class="nx">conv</span> <span class="o">=</span> <span class="nx">converters</span><span class="p">[</span> <span class="nx">conversion</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">converters</span><span class="p">[</span> <span class="s2">&quot;* &quot;</span> <span class="o">+</span> <span class="nx">current</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-684" id="section-684">&#182;</a>
</div>
<p>If there is no direct converter, search transitively</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">conv</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">conv2</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
        <span class="k">for</span><span class="p">(</span> <span class="nx">conv1</span> <span class="k">in</span> <span class="nx">converters</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">tmp</span> <span class="o">=</span> <span class="nx">conv1</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span> <span class="s2">&quot; &quot;</span> <span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">tmp</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">===</span> <span class="nx">prev</span> <span class="o">||</span> <span class="nx">tmp</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;*&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">conv2</span> <span class="o">=</span> <span class="nx">converters</span><span class="p">[</span> <span class="nx">tmp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">current</span> <span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">conv2</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">conv1</span> <span class="o">=</span> <span class="nx">converters</span><span class="p">[</span> <span class="nx">conv1</span> <span class="p">];</span>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">conv1</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">conv</span> <span class="o">=</span> <span class="nx">conv2</span><span class="p">;</span>
              <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">conv2</span> <span class="o">===</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">conv</span> <span class="o">=</span> <span class="nx">conv1</span><span class="p">;</span>
              <span class="p">}</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-685" id="section-685">&#182;</a>
</div>
<p>If we found no converter, dispatch an error</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span> <span class="nx">conv</span> <span class="o">||</span> <span class="nx">conv2</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="s2">&quot;No conversion from &quot;</span> <span class="o">+</span> <span class="nx">conversion</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span><span class="s2">&quot; to &quot;</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-686" id="section-686">&#182;</a>
</div>
<p>If found converter is not an equivalence</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">conv</span> <span class="o">!==</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-687" id="section-687">&#182;</a>
</div>
<p>Convert with 1 or 2 converters accordingly</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">response</span> <span class="o">=</span> <span class="nx">conv</span> <span class="o">?</span> <span class="nx">conv</span><span class="p">(</span> <span class="nx">response</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">conv2</span><span class="p">(</span> <span class="nx">conv1</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">response</span><span class="p">;</span>
<span class="p">}</span>




<span class="kd">var</span> <span class="nx">jsc</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
  <span class="nx">jsre</span> <span class="o">=</span> <span class="sr">/(\=)\?(&amp;|$)|\?\?/i</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-688" id="section-688">&#182;</a>
</div>
<p>Default jsonp settings</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSetup</span><span class="p">({</span>
  <span class="nx">jsonp</span><span class="o">:</span> <span class="s2">&quot;callback&quot;</span><span class="p">,</span>
  <span class="nx">jsonpCallback</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expando</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span> <span class="o">+</span> <span class="p">(</span> <span class="nx">jsc</span><span class="o">++</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-689" id="section-689">&#182;</a>
</div>
<p>Detect, normalize options and install callbacks for jsonp requests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxPrefilter</span><span class="p">(</span> <span class="s2">&quot;json jsonp&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">originalSettings</span><span class="p">,</span> <span class="nx">jqXHR</span> <span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">inspectData</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">contentType</span> <span class="o">===</span> <span class="s2">&quot;application/x-www-form-urlencoded&quot;</span> <span class="o">&amp;&amp;</span>
    <span class="p">(</span> <span class="k">typeof</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;jsonp&quot;</span> <span class="o">||</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">jsonp</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">jsre</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="p">)</span> <span class="o">||</span>
        <span class="nx">inspectData</span> <span class="o">&amp;&amp;</span> <span class="nx">jsre</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">responseContainer</span><span class="p">,</span>
      <span class="nx">jsonpCallback</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span> <span class="o">=</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span><span class="p">()</span> <span class="o">:</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonpCallback</span><span class="p">,</span>
      <span class="nx">previous</span> <span class="o">=</span> <span class="nb">window</span><span class="p">[</span> <span class="nx">jsonpCallback</span> <span class="p">],</span>
      <span class="nx">url</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span>
      <span class="nx">data</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span><span class="p">,</span>
      <span class="nx">replace</span> <span class="o">=</span> <span class="s2">&quot;$1&quot;</span> <span class="o">+</span> <span class="nx">jsonpCallback</span> <span class="o">+</span> <span class="s2">&quot;$2&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonp</span> <span class="o">!==</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">jsre</span><span class="p">,</span> <span class="nx">replace</span> <span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">===</span> <span class="nx">url</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">inspectData</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span> <span class="nx">jsre</span><span class="p">,</span> <span class="nx">replace</span> <span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">===</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-690" id="section-690">&#182;</a>
</div>
<p>Add callback manually</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">url</span> <span class="o">+=</span> <span class="p">(</span><span class="sr">/\?/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">url</span> <span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;&amp;&quot;</span> <span class="o">:</span> <span class="s2">&quot;?&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">s</span><span class="p">.</span><span class="nx">jsonp</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">+</span> <span class="nx">jsonpCallback</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">s</span><span class="p">.</span><span class="nx">url</span> <span class="o">=</span> <span class="nx">url</span><span class="p">;</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-691" id="section-691">&#182;</a>
</div>
<p>Install callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nb">window</span><span class="p">[</span> <span class="nx">jsonpCallback</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">response</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">responseContainer</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">response</span> <span class="p">];</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-692" id="section-692">&#182;</a>
</div>
<p>Clean-up function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jqXHR</span><span class="p">.</span><span class="nx">always</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-693" id="section-693">&#182;</a>
</div>
<p>Set callback back to previous value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nb">window</span><span class="p">[</span> <span class="nx">jsonpCallback</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">previous</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-694" id="section-694">&#182;</a>
</div>
<p>Call if it was a function and we have a response</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">responseContainer</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">previous</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nb">window</span><span class="p">[</span> <span class="nx">jsonpCallback</span> <span class="p">](</span> <span class="nx">responseContainer</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-695" id="section-695">&#182;</a>
</div>
<p>Use data converter to retrieve json after script execution</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">converters</span><span class="p">[</span><span class="s2">&quot;script json&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">responseContainer</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span> <span class="nx">jsonpCallback</span> <span class="o">+</span> <span class="s2">&quot; was not called&quot;</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">responseContainer</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-696" id="section-696">&#182;</a>
</div>
<p>force json dataType</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">s</span><span class="p">.</span><span class="nx">dataTypes</span><span class="p">[</span> <span class="mi">0</span> <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-697" id="section-697">&#182;</a>
</div>
<p>Delegate to script</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="s2">&quot;script&quot;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>





</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-698" id="section-698">&#182;</a>
</div>
<p>Install script dataType</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSetup</span><span class="p">({</span>
  <span class="nx">accepts</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">script</span><span class="o">:</span> <span class="s2">&quot;text/javascript, application/javascript, application/ecmascript, application/x-ecmascript&quot;</span>
  <span class="p">},</span>
  <span class="nx">contents</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">script</span><span class="o">:</span> <span class="sr">/javascript|ecmascript/</span>
  <span class="p">},</span>
  <span class="nx">converters</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;text script&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">text</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">globalEval</span><span class="p">(</span> <span class="nx">text</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">text</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-699" id="section-699">&#182;</a>
</div>
<p>Handle cache's special case and global</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxPrefilter</span><span class="p">(</span> <span class="s2">&quot;script&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">s</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">cache</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">cache</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;GET&quot;</span><span class="p">;</span>
    <span class="nx">s</span><span class="p">.</span><span class="nx">global</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-700" id="section-700">&#182;</a>
</div>
<p>Bind script tag hack transport</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxTransport</span><span class="p">(</span> <span class="s2">&quot;script&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-701" id="section-701">&#182;</a>
</div>
<p>This transport only deals with cross domain requests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">script</span><span class="p">,</span>
      <span class="nx">head</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">head</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span> <span class="s2">&quot;head&quot;</span> <span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">{</span>

      <span class="nx">send</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>

        <span class="nx">script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;script&quot;</span> <span class="p">);</span>

        <span class="nx">script</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="s2">&quot;async&quot;</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">scriptCharset</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">script</span><span class="p">.</span><span class="nx">charset</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">scriptCharset</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">script</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-702" id="section-702">&#182;</a>
</div>
<p>Attach handlers for all browsers</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">script</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">isAbort</span> <span class="o">||</span> <span class="o">!</span><span class="nx">script</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">||</span> <span class="sr">/loaded|complete/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">script</span><span class="p">.</span><span class="nx">readyState</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-703" id="section-703">&#182;</a>
</div>
<p>Handle memory leak in IE</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">script</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-704" id="section-704">&#182;</a>
</div>
<p>Remove the script</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">head</span> <span class="o">&amp;&amp;</span> <span class="nx">script</span><span class="p">.</span><span class="nx">parentNode</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">head</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">script</span> <span class="p">);</span>
            <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-705" id="section-705">&#182;</a>
</div>
<p>Dereference the script</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">script</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-706" id="section-706">&#182;</a>
</div>
<p>Callback if not abort</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">callback</span><span class="p">(</span> <span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;success&quot;</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">};</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-707" id="section-707">&#182;</a>
</div>
<p>Use insertBefore instead of appendChild  to circumvent an IE6 bug.
This arises when a base node is used (#2709 and #4378).</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">head</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">script</span><span class="p">,</span> <span class="nx">head</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
      <span class="p">},</span>

      <span class="nx">abort</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">script</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">script</span><span class="p">.</span><span class="nx">onload</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
<span class="p">});</span>




<span class="kd">var</span> <span class="c1">// #5280: Internet Explorer will keep connections alive if we don&#39;t abort on unload</span>
  <span class="nx">xhrOnUnloadAbort</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span> <span class="o">?</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-708" id="section-708">&#182;</a>
</div>
<p>Abort all pending requests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">xhrCallbacks</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">xhrCallbacks</span><span class="p">[</span> <span class="nx">key</span> <span class="p">](</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">xhrId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nx">xhrCallbacks</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-709" id="section-709">&#182;</a>
</div>
<p>Functions to create xhrs</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">createStandardXHR</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">XMLHttpRequest</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">createActiveXHR</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span><span class="p">(</span> <span class="s2">&quot;Microsoft.XMLHTTP&quot;</span> <span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-710" id="section-710">&#182;</a>
</div>
<p>Create the request object
(This is still attached to ajaxSettings for backward compatibility)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">xhr</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span> <span class="o">?</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-711" id="section-711">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Microsoft failed to properly
implement the XMLHttpRequest in IE7 (can't request local files),
so we use the ActiveXObject when it is available
Additionally XMLHttpRequest can be disabled in IE7/IE8 so
we need a fallback.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">isLocal</span> <span class="o">&amp;&amp;</span> <span class="nx">createStandardXHR</span><span class="p">()</span> <span class="o">||</span> <span class="nx">createActiveXHR</span><span class="p">();</span>
  <span class="p">}</span> <span class="o">:</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-712" id="section-712">&#182;</a>
</div>
<p>For all other browsers, use the standard XMLHttpRequest object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">createStandardXHR</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-713" id="section-713">&#182;</a>
</div>
<p>Determine support properties</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">xhr</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">ajax</span><span class="o">:</span> <span class="o">!!</span><span class="nx">xhr</span><span class="p">,</span>
    <span class="nx">cors</span><span class="o">:</span> <span class="o">!!</span><span class="nx">xhr</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="s2">&quot;withCredentials&quot;</span> <span class="k">in</span> <span class="nx">xhr</span> <span class="p">)</span>
  <span class="p">});</span>
<span class="p">})(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxSettings</span><span class="p">.</span><span class="nx">xhr</span><span class="p">()</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-714" id="section-714">&#182;</a>
</div>
<p>Create transport if the browser can provide an xhr</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">ajax</span> <span class="p">)</span> <span class="p">{</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajaxTransport</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">s</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-715" id="section-715">&#182;</a>
</div>
<p>Cross domain only allowed if supported through XMLHttpRequest</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">cors</span> <span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">callback</span><span class="p">;</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">send</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">headers</span><span class="p">,</span> <span class="nx">complete</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-716" id="section-716">&#182;</a>
</div>
<p>Get a new xhr</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">xhr</span><span class="p">(),</span>
            <span class="nx">handle</span><span class="p">,</span>
            <span class="nx">i</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-717" id="section-717">&#182;</a>
</div>
<p>Open the socket
Passing null username, generates a login popup on Opera (#2865)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">username</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">async</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">username</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">password</span> <span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">xhr</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">async</span> <span class="p">);</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-718" id="section-718">&#182;</a>
</div>
<p>Apply custom fields if provided</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">xhrFields</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">s</span><span class="p">.</span><span class="nx">xhrFields</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">xhr</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">xhrFields</span><span class="p">[</span> <span class="nx">i</span> <span class="p">];</span>
            <span class="p">}</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-719" id="section-719">&#182;</a>
</div>
<p>Override mime type if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">mimeType</span> <span class="o">&amp;&amp;</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">overrideMimeType</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">xhr</span><span class="p">.</span><span class="nx">overrideMimeType</span><span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">mimeType</span> <span class="p">);</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-720" id="section-720">&#182;</a>
</div>
<p>X-Requested-With header
For cross-domain requests, seeing as conditions for a preflight are
akin to a jigsaw puzzle, we simply never set it to be sure.
(it can always be set on a per-request basis or even using ajaxSetup)
For same-domain requests, won't change header if already provided.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">headers</span><span class="p">[</span><span class="s2">&quot;X-Requested-With&quot;</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">headers</span><span class="p">[</span> <span class="s2">&quot;X-Requested-With&quot;</span> <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;XMLHttpRequest&quot;</span><span class="p">;</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-721" id="section-721">&#182;</a>
</div>
<p>Need an extra try/catch for cross domain requests in Firefox 3</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">try</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">headers</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">xhr</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">headers</span><span class="p">[</span> <span class="nx">i</span> <span class="p">]</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">_</span> <span class="p">)</span> <span class="p">{}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-722" id="section-722">&#182;</a>
</div>
<p>Do send the request
This may raise an exception which is actually
handled in jQuery.ajax (so no try/catch here)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span> <span class="p">(</span> <span class="nx">s</span><span class="p">.</span><span class="nx">hasContent</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">data</span> <span class="p">)</span> <span class="o">||</span> <span class="kc">null</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-723" id="section-723">&#182;</a>
</div>
<p>Listener</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">callback</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>

            <span class="kd">var</span> <span class="nx">status</span><span class="p">,</span>
              <span class="nx">statusText</span><span class="p">,</span>
              <span class="nx">responseHeaders</span><span class="p">,</span>
              <span class="nx">responses</span><span class="p">,</span>
              <span class="nx">xml</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-724" id="section-724">&#182;</a>
</div>
<p>Firefox throws exceptions when accessing properties
of an xhr when a network error occured
<a href='http://helpful.knobs-dials.com/index.php/Component_returned_failure_code'>http://helpful.knobs-dials.com/index.php/Component_returned_failure_code</a>:<em>0x80040111</em>(NS_ERROR_NOT_AVAILABLE)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">try</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-725" id="section-725">&#182;</a>
</div>
<p>Was never called and is aborted or complete</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">isAbort</span> <span class="o">||</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-726" id="section-726">&#182;</a>
</div>
<p>Only called once</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="nx">callback</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-727" id="section-727">&#182;</a>
</div>
<p>Do not keep as active anymore</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">handle</span> <span class="p">)</span> <span class="p">{</span>
                  <span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noop</span><span class="p">;</span>
                  <span class="k">if</span> <span class="p">(</span> <span class="nx">xhrOnUnloadAbort</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="k">delete</span> <span class="nx">xhrCallbacks</span><span class="p">[</span> <span class="nx">handle</span> <span class="p">];</span>
                  <span class="p">}</span>
                <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-728" id="section-728">&#182;</a>
</div>
<p>If it's an abort</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-729" id="section-729">&#182;</a>
</div>
<p>Abort it manually if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                  <span class="k">if</span> <span class="p">(</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">!==</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">xhr</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
                  <span class="p">}</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                  <span class="nx">status</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">status</span><span class="p">;</span>
                  <span class="nx">responseHeaders</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">getAllResponseHeaders</span><span class="p">();</span>
                  <span class="nx">responses</span> <span class="o">=</span> <span class="p">{};</span>
                  <span class="nx">xml</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-730" id="section-730">&#182;</a>
</div>
<p>Construct response list</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                  <span class="k">if</span> <span class="p">(</span> <span class="nx">xml</span> <span class="o">&amp;&amp;</span> <span class="nx">xml</span><span class="p">.</span><span class="nx">documentElement</span> <span class="cm">/* #4958 */</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">responses</span><span class="p">.</span><span class="nx">xml</span> <span class="o">=</span> <span class="nx">xml</span><span class="p">;</span>
                  <span class="p">}</span>
                  <span class="nx">responses</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-731" id="section-731">&#182;</a>
</div>
<p>Firefox throws an exception when accessing
statusText for faulty cross-domain requests</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                  <span class="k">try</span> <span class="p">{</span>
                    <span class="nx">statusText</span> <span class="o">=</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">statusText</span><span class="p">;</span>
                  <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">e</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-732" id="section-732">&#182;</a>
</div>
<p>We normalize with Webkit giving an empty statusText</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                    <span class="nx">statusText</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
                  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-733" id="section-733">&#182;</a>
</div>
<p>Filter status for non standard behaviors</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-734" id="section-734">&#182;</a>
</div>
<p>If the request is local and we have data: assume a success
(success with no data won't get notified, that's the best we
can do given current implementations)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">status</span> <span class="o">&amp;&amp;</span> <span class="nx">s</span><span class="p">.</span><span class="nx">isLocal</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">s</span><span class="p">.</span><span class="nx">crossDomain</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">status</span> <span class="o">=</span> <span class="nx">responses</span><span class="p">.</span><span class="nx">text</span> <span class="o">?</span> <span class="mi">200</span> <span class="o">:</span> <span class="mi">404</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-735" id="section-735">&#182;</a>
</div>
<p>IE - #1450: sometimes returns 1223 when it should be 204</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
                  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">1223</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">status</span> <span class="o">=</span> <span class="mi">204</span><span class="p">;</span>
                  <span class="p">}</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span> <span class="k">catch</span><span class="p">(</span> <span class="nx">firefoxAccessException</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">isAbort</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">complete</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">firefoxAccessException</span> <span class="p">);</span>
              <span class="p">}</span>
            <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-736" id="section-736">&#182;</a>
</div>
<p>Call complete if needed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">responses</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">complete</span><span class="p">(</span> <span class="nx">status</span><span class="p">,</span> <span class="nx">statusText</span><span class="p">,</span> <span class="nx">responses</span><span class="p">,</span> <span class="nx">responseHeaders</span> <span class="p">);</span>
            <span class="p">}</span>
          <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-737" id="section-737">&#182;</a>
</div>
<p>if we're in sync mode or it's in cache
and has been retrieved directly (IE6 &amp; IE7)
we need to manually fire the callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">s</span><span class="p">.</span><span class="nx">async</span> <span class="o">||</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">===</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">callback</span><span class="p">();</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">handle</span> <span class="o">=</span> <span class="o">++</span><span class="nx">xhrId</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">xhrOnUnloadAbort</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-738" id="section-738">&#182;</a>
</div>
<p>Create the active xhrs callbacks list if needed
and attach the unload handler</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">xhrCallbacks</span> <span class="p">)</span> <span class="p">{</span>
                <span class="nx">xhrCallbacks</span> <span class="o">=</span> <span class="p">{};</span>
                <span class="nx">jQuery</span><span class="p">(</span> <span class="nb">window</span> <span class="p">).</span><span class="nx">unload</span><span class="p">(</span> <span class="nx">xhrOnUnloadAbort</span> <span class="p">);</span>
              <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-739" id="section-739">&#182;</a>
</div>
<p>Add to list of active xhrs callbacks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="nx">xhrCallbacks</span><span class="p">[</span> <span class="nx">handle</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">xhr</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="nx">callback</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">},</span>

        <span class="nx">abort</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">callback</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">}</span>




<span class="kd">var</span> <span class="nx">elemdisplay</span> <span class="o">=</span> <span class="p">{},</span>
  <span class="nx">iframe</span><span class="p">,</span> <span class="nx">iframeDoc</span><span class="p">,</span>
  <span class="nx">rfxtypes</span> <span class="o">=</span> <span class="sr">/^(?:toggle|show|hide)$/</span><span class="p">,</span>
  <span class="nx">rfxnum</span> <span class="o">=</span> <span class="sr">/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i</span><span class="p">,</span>
  <span class="nx">timerId</span><span class="p">,</span>
  <span class="nx">fxAttrs</span> <span class="o">=</span> <span class="p">[</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-740" id="section-740">&#182;</a>
</div>
<p>height animations</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">[</span> <span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="s2">&quot;marginTop&quot;</span><span class="p">,</span> <span class="s2">&quot;marginBottom&quot;</span><span class="p">,</span> <span class="s2">&quot;paddingTop&quot;</span><span class="p">,</span> <span class="s2">&quot;paddingBottom&quot;</span> <span class="p">],</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-741" id="section-741">&#182;</a>
</div>
<p>width animations</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">[</span> <span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="s2">&quot;marginLeft&quot;</span><span class="p">,</span> <span class="s2">&quot;marginRight&quot;</span><span class="p">,</span> <span class="s2">&quot;paddingLeft&quot;</span><span class="p">,</span> <span class="s2">&quot;paddingRight&quot;</span> <span class="p">],</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-742" id="section-742">&#182;</a>
</div>
<p>opacity animations</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">[</span> <span class="s2">&quot;opacity&quot;</span> <span class="p">]</span>
  <span class="p">],</span>
  <span class="nx">fxNow</span><span class="p">,</span>
  <span class="nx">requestAnimationFrame</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">webkitRequestAnimationFrame</span> <span class="o">||</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">mozRequestAnimationFrame</span> <span class="o">||</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">oRequestAnimationFrame</span><span class="p">;</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">display</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">speed</span> <span class="o">||</span> <span class="nx">speed</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span> <span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;show&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">display</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-743" id="section-743">&#182;</a>
</div>
<p>Reset the inline display of this element to learn if it is
being hidden by cascaded rules or not</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">display</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
          <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-744" id="section-744">&#182;</a>
</div>
<p>Set elements which have been overridden with display: none
in a stylesheet to whatever the default browser style is
for such an element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span><span class="p">,</span> <span class="nx">defaultDisplay</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">));</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-745" id="section-745">&#182;</a>
</div>
<p>Set the display of most of the elements in a second loop
to avoid the constant reflow</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">display</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span><span class="p">;</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="o">||</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;olddisplay&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">speed</span> <span class="o">||</span> <span class="nx">speed</span> <span class="o">===</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span> <span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;hide&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">display</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="s2">&quot;display&quot;</span> <span class="p">);</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">display</span> <span class="o">!==</span> <span class="s2">&quot;none&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="s2">&quot;olddisplay&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_data</span><span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="s2">&quot;olddisplay&quot;</span><span class="p">,</span> <span class="nx">display</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-746" id="section-746">&#182;</a>
</div>
<p>Set the display of the elements in a second loop
to avoid the constant reflow</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">style</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-747" id="section-747">&#182;</a>
</div>
<p>Save the old toggle function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">_toggle</span><span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">toggle</span><span class="p">,</span>

  <span class="nx">toggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">fn2</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">bool</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">fn</span> <span class="o">===</span> <span class="s2">&quot;boolean&quot;</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">fn2</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_toggle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span> <span class="p">);</span>

    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">fn</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="nx">bool</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">state</span> <span class="o">=</span> <span class="nx">bool</span> <span class="o">?</span> <span class="nx">fn</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;:hidden&quot;</span><span class="p">);</span>
        <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">)[</span> <span class="nx">state</span> <span class="o">?</span> <span class="s2">&quot;show&quot;</span> <span class="o">:</span> <span class="s2">&quot;hide&quot;</span> <span class="p">]();</span>
      <span class="p">});</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span><span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;toggle&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">fn2</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">fadeTo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="s2">&quot;:hidden&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">show</span><span class="p">().</span><span class="nx">end</span><span class="p">()</span>
          <span class="p">.</span><span class="nx">animate</span><span class="p">({</span><span class="nx">opacity</span><span class="o">:</span> <span class="nx">to</span><span class="p">},</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">animate</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">optall</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">speed</span><span class="p">(</span><span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isEmptyObject</span><span class="p">(</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">optall</span><span class="p">.</span><span class="nx">complete</span><span class="p">,</span> <span class="p">[</span> <span class="kc">false</span> <span class="p">]</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-748" id="section-748">&#182;</a>
</div>
<p>Do not change referenced properties as per-property easing will be lost</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">prop</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">prop</span> <span class="p">);</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">[</span> <span class="nx">optall</span><span class="p">.</span><span class="nx">queue</span> <span class="o">===</span> <span class="kc">false</span> <span class="o">?</span> <span class="s2">&quot;each&quot;</span> <span class="o">:</span> <span class="s2">&quot;queue&quot;</span> <span class="p">](</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-749" id="section-749">&#182;</a>
</div>
<p>XXX 'this' does not always have a nodeName when running the
test suite</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">optall</span><span class="p">.</span><span class="nx">queue</span> <span class="o">===</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_mark</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="kd">var</span> <span class="nx">opt</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="p">{},</span> <span class="nx">optall</span> <span class="p">),</span>
        <span class="nx">isElement</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">hidden</span> <span class="o">=</span> <span class="nx">isElement</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="s2">&quot;:hidden&quot;</span><span class="p">),</span>
        <span class="nx">name</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span>
        <span class="nx">display</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span>
        <span class="nx">parts</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">unit</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-750" id="section-750">&#182;</a>
</div>
<p>will store per property easing and be used to determine when an animation is complete</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">opt</span><span class="p">.</span><span class="nx">animatedProperties</span> <span class="o">=</span> <span class="p">{};</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-751" id="section-751">&#182;</a>
</div>
<p>property name normalization</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">name</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">camelCase</span><span class="p">(</span> <span class="nx">p</span> <span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">p</span> <span class="o">!==</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">prop</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">[</span> <span class="nx">p</span> <span class="p">];</span>
          <span class="k">delete</span> <span class="nx">prop</span><span class="p">[</span> <span class="nx">p</span> <span class="p">];</span>
        <span class="p">}</span>

        <span class="nx">val</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">[</span> <span class="nx">name</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-752" id="section-752">&#182;</a>
</div>
<p>easing resolution: per property > opt.specialEasing > opt.easing > 'swing' (default)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">opt</span><span class="p">.</span><span class="nx">animatedProperties</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">[</span> <span class="mi">1</span> <span class="p">];</span>
          <span class="nx">val</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">opt</span><span class="p">.</span><span class="nx">animatedProperties</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">specialEasing</span> <span class="o">&amp;&amp;</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">specialEasing</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">easing</span> <span class="o">||</span> <span class="s1">&#39;swing&#39;</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">===</span> <span class="s2">&quot;hide&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">hidden</span> <span class="o">||</span> <span class="nx">val</span> <span class="o">===</span> <span class="s2">&quot;show&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">hidden</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">complete</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">isElement</span> <span class="o">&amp;&amp;</span> <span class="p">(</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;height&quot;</span> <span class="o">||</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-753" id="section-753">&#182;</a>
</div>
<p>Make sure that nothing sneaks out
Record all 3 overflow attributes because IE does not
change the overflow attribute when overflowX and
overflowY are set to the same value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="nx">opt</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">=</span> <span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">overflow</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">overflowX</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">overflowY</span> <span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-754" id="section-754">&#182;</a>
</div>
<p>Set display property to inline-block for height/width
animations on inline elements that are having width/height
animated</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;inline&quot;</span> <span class="o">&amp;&amp;</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span> <span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">inlineBlockNeedsLayout</span> <span class="p">)</span> <span class="p">{</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;inline-block&quot;</span><span class="p">;</span>

            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">display</span> <span class="o">=</span> <span class="nx">defaultDisplay</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">nodeName</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-755" id="section-755">&#182;</a>
</div>
<p>inline-level elements accept inline-block;
block-level elements need to be inline with layout</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
              <span class="k">if</span> <span class="p">(</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;inline&quot;</span> <span class="p">)</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;inline-block&quot;</span><span class="p">;</span>

              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s2">&quot;inline&quot;</span><span class="p">;</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">=</span> <span class="s2">&quot;hidden&quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">opt</span><span class="p">,</span> <span class="nx">p</span> <span class="p">);</span>
        <span class="nx">val</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">[</span> <span class="nx">p</span> <span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">rfxtypes</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">e</span><span class="p">[</span> <span class="nx">val</span> <span class="o">===</span> <span class="s2">&quot;toggle&quot;</span> <span class="o">?</span> <span class="nx">hidden</span> <span class="o">?</span> <span class="s2">&quot;show&quot;</span> <span class="o">:</span> <span class="s2">&quot;hide&quot;</span> <span class="o">:</span> <span class="nx">val</span> <span class="p">]();</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">parts</span> <span class="o">=</span> <span class="nx">rfxnum</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span> <span class="nx">val</span> <span class="p">);</span>
          <span class="nx">start</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">cur</span><span class="p">();</span>

          <span class="k">if</span> <span class="p">(</span> <span class="nx">parts</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">end</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">);</span>
            <span class="nx">unit</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssNumber</span><span class="p">[</span> <span class="nx">p</span> <span class="p">]</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;px&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-756" id="section-756">&#182;</a>
</div>
<p>We need to compute starting value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">unit</span> <span class="o">!==</span> <span class="s2">&quot;px&quot;</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="p">(</span><span class="nx">end</span> <span class="o">||</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">unit</span><span class="p">);</span>
              <span class="nx">start</span> <span class="o">=</span> <span class="p">((</span><span class="nx">end</span> <span class="o">||</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nx">e</span><span class="p">.</span><span class="nx">cur</span><span class="p">())</span> <span class="o">*</span> <span class="nx">start</span><span class="p">;</span>
              <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">unit</span><span class="p">);</span>
            <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-757" id="section-757">&#182;</a>
</div>
<p>If a +=/-= token was provided, we're doing a relative animation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="k">if</span> <span class="p">(</span> <span class="nx">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
              <span class="nx">end</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span><span class="nx">parts</span><span class="p">[</span> <span class="mi">1</span> <span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;-=&quot;</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">end</span> <span class="p">)</span> <span class="o">+</span> <span class="nx">start</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="nx">e</span><span class="p">.</span><span class="nx">custom</span><span class="p">(</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">unit</span> <span class="p">);</span>

          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">e</span><span class="p">.</span><span class="nx">custom</span><span class="p">(</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-758" id="section-758">&#182;</a>
</div>
<p>For JS strict compliance</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">},</span>

  <span class="nx">stop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">clearQueue</span><span class="p">,</span> <span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">clearQueue</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">queue</span><span class="p">([]);</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">timers</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">,</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="nx">timers</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-759" id="section-759">&#182;</a>
</div>
<p>clear marker counters if we know they won't be</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_unmark</span><span class="p">(</span> <span class="kc">true</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">i</span><span class="o">--</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">timers</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">elem</span> <span class="o">===</span> <span class="k">this</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">gotoEnd</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-760" id="section-760">&#182;</a>
</div>
<p>force the next step to be the last</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
            <span class="nx">timers</span><span class="p">[</span><span class="nx">i</span><span class="p">](</span><span class="kc">true</span><span class="p">);</span>
          <span class="p">}</span>

          <span class="nx">timers</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-761" id="section-761">&#182;</a>
</div>
<p>start the next in the queue if the last step wasn't forced</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-762" id="section-762">&#182;</a>
</div>
<p>Animations created synchronously will run synchronously</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">createFxNow</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">setTimeout</span><span class="p">(</span> <span class="nx">clearFxNow</span><span class="p">,</span> <span class="mi">0</span> <span class="p">);</span>
  <span class="k">return</span> <span class="p">(</span> <span class="nx">fxNow</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">now</span><span class="p">()</span> <span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">clearFxNow</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">fxNow</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-763" id="section-763">&#182;</a>
</div>
<p>Generate parameters to create a standard animation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">genFx</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">num</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">fxAttrs</span><span class="p">.</span><span class="nx">concat</span><span class="p">.</span><span class="nx">apply</span><span class="p">([],</span> <span class="nx">fxAttrs</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">num</span><span class="p">)),</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">obj</span><span class="p">[</span> <span class="k">this</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">type</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-764" id="section-764">&#182;</a>
</div>
<p>Generate shortcuts for custom animations</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">({</span>
  <span class="nx">slideDown</span><span class="o">:</span> <span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;show&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
  <span class="nx">slideUp</span><span class="o">:</span> <span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;hide&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
  <span class="nx">slideToggle</span><span class="o">:</span> <span class="nx">genFx</span><span class="p">(</span><span class="s2">&quot;toggle&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
  <span class="nx">fadeIn</span><span class="o">:</span> <span class="p">{</span> <span class="nx">opacity</span><span class="o">:</span> <span class="s2">&quot;show&quot;</span> <span class="p">},</span>
  <span class="nx">fadeOut</span><span class="o">:</span> <span class="p">{</span> <span class="nx">opacity</span><span class="o">:</span> <span class="s2">&quot;hide&quot;</span> <span class="p">},</span>
  <span class="nx">fadeToggle</span><span class="o">:</span> <span class="p">{</span> <span class="nx">opacity</span><span class="o">:</span> <span class="s2">&quot;toggle&quot;</span> <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">props</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">animate</span><span class="p">(</span> <span class="nx">props</span><span class="p">,</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">);</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">speed</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">opt</span> <span class="o">=</span> <span class="nx">speed</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">speed</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">speed</span><span class="p">)</span> <span class="o">:</span> <span class="p">{</span>
      <span class="nx">complete</span><span class="o">:</span> <span class="nx">fn</span> <span class="o">||</span> <span class="o">!</span><span class="nx">fn</span> <span class="o">&amp;&amp;</span> <span class="nx">easing</span> <span class="o">||</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">speed</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">speed</span><span class="p">,</span>
      <span class="nx">duration</span><span class="o">:</span> <span class="nx">speed</span><span class="p">,</span>
      <span class="nx">easing</span><span class="o">:</span> <span class="nx">fn</span> <span class="o">&amp;&amp;</span> <span class="nx">easing</span> <span class="o">||</span> <span class="nx">easing</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">easing</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">easing</span>
    <span class="p">};</span>

    <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">off</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="k">typeof</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">?</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="o">:</span>
      <span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span> <span class="k">in</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span> <span class="o">?</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span><span class="p">[</span><span class="nx">opt</span><span class="p">.</span><span class="nx">duration</span><span class="p">]</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">speeds</span><span class="p">.</span><span class="nx">_default</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-765" id="section-765">&#182;</a>
</div>
<p>Queueing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">opt</span><span class="p">.</span><span class="nx">old</span> <span class="o">=</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">complete</span><span class="p">;</span>
    <span class="nx">opt</span><span class="p">.</span><span class="nx">complete</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">noUnmark</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">old</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">opt</span><span class="p">.</span><span class="nx">old</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">opt</span><span class="p">.</span><span class="nx">queue</span> <span class="o">!==</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">dequeue</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">noUnmark</span> <span class="o">!==</span> <span class="kc">false</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">_unmark</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="nx">opt</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">easing</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">linear</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">firstNum</span><span class="p">,</span> <span class="nx">diff</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">firstNum</span> <span class="o">+</span> <span class="nx">diff</span> <span class="o">*</span> <span class="nx">p</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">swing</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">firstNum</span><span class="p">,</span> <span class="nx">diff</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">((</span><span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">p</span><span class="o">*</span><span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">*</span> <span class="nx">diff</span> <span class="o">+</span> <span class="nx">firstNum</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">timers</span><span class="o">:</span> <span class="p">[],</span>

  <span class="nx">fx</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">prop</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="o">=</span> <span class="nx">prop</span><span class="p">;</span>

    <span class="nx">options</span><span class="p">.</span><span class="nx">orig</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">orig</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="p">}</span>

<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-766" id="section-766">&#182;</a>
</div>
<p>Simple function for setting a style value</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">step</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">step</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">now</span><span class="p">,</span> <span class="k">this</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">step</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">prop</span><span class="p">]</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">step</span><span class="p">.</span><span class="nx">_default</span><span class="p">)(</span> <span class="k">this</span> <span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-767" id="section-767">&#182;</a>
</div>
<p>Get the current size</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">cur</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">prop</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">prop</span><span class="p">]</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">];</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">parsed</span><span class="p">,</span>
      <span class="nx">r</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-768" id="section-768">&#182;</a>
</div>
<p>Empty strings, null, undefined and "auto" are converted to 0,
complex values such as "rotate(1rad)" are returned as is,
simple values such as "10px" are parsed to Float.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="nb">isNaN</span><span class="p">(</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">r</span> <span class="p">)</span> <span class="p">)</span> <span class="o">?</span> <span class="o">!</span><span class="nx">r</span> <span class="o">||</span> <span class="nx">r</span> <span class="o">===</span> <span class="s2">&quot;auto&quot;</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">r</span> <span class="o">:</span> <span class="nx">parsed</span><span class="p">;</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-769" id="section-769">&#182;</a>
</div>
<p>Start an animation from one number to another</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">custom</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">unit</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
      <span class="nx">fx</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">,</span>
      <span class="nx">raf</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">startTime</span> <span class="o">=</span> <span class="nx">fxNow</span> <span class="o">||</span> <span class="nx">createFxNow</span><span class="p">();</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="nx">from</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">end</span> <span class="o">=</span> <span class="nx">to</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">unit</span> <span class="o">=</span> <span class="nx">unit</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">unit</span> <span class="o">||</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">cssNumber</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;px&quot;</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">now</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">function</span> <span class="nx">t</span><span class="p">(</span> <span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">step</span><span class="p">(</span><span class="nx">gotoEnd</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">t</span><span class="p">.</span><span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">t</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">timerId</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-770" id="section-770">&#182;</a>
</div>
<p>Use requestAnimationFrame instead of setInterval if available</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">requestAnimationFrame</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">timerId</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">raf</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-771" id="section-771">&#182;</a>
</div>
<p>When timerId gets set to null at any point, this stops</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
          <span class="k">if</span> <span class="p">(</span> <span class="nx">timerId</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">requestAnimationFrame</span><span class="p">(</span> <span class="nx">raf</span> <span class="p">);</span>
            <span class="nx">fx</span><span class="p">.</span><span class="nx">tick</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">};</span>
        <span class="nx">requestAnimationFrame</span><span class="p">(</span> <span class="nx">raf</span> <span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">timerId</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">tick</span><span class="p">,</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">interval</span> <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-772" id="section-772">&#182;</a>
</div>
<p>Simple 'show' function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-773" id="section-773">&#182;</a>
</div>
<p>Remember where we started, so that we can go back to it later</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">orig</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">prop</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">show</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-774" id="section-774">&#182;</a>
</div>
<p>Begin the animation
Make sure that we start at a small width/height to avoid any
flash of content</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">custom</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="o">===</span> <span class="s2">&quot;height&quot;</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">cur</span><span class="p">());</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-775" id="section-775">&#182;</a>
</div>
<p>Start by showing the element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span> <span class="p">).</span><span class="nx">show</span><span class="p">();</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-776" id="section-776">&#182;</a>
</div>
<p>Simple 'hide' function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-777" id="section-777">&#182;</a>
</div>
<p>Remember where we started, so that we can go back to it later</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">orig</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">prop</span><span class="p">]</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">hide</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-778" id="section-778">&#182;</a>
</div>
<p>Begin the animation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">custom</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cur</span><span class="p">(),</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">},</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-779" id="section-779">&#182;</a>
</div>
<p>Each step of an animation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">step</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">gotoEnd</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">fxNow</span> <span class="o">||</span> <span class="nx">createFxNow</span><span class="p">(),</span>
      <span class="nx">done</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span>
      <span class="nx">options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">,</span>
      <span class="nx">i</span><span class="p">,</span> <span class="nx">n</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">gotoEnd</span> <span class="o">||</span> <span class="nx">t</span> <span class="o">&gt;=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">duration</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">startTime</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">now</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">end</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>

      <span class="nx">options</span><span class="p">.</span><span class="nx">animatedProperties</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">options</span><span class="p">.</span><span class="nx">animatedProperties</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">animatedProperties</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">true</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">done</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">done</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-780" id="section-780">&#182;</a>
</div>
<p>Reset the overflow</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">shrinkWrapBlocks</span> <span class="p">)</span> <span class="p">{</span>

          <span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">[</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span> <span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">index</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="s2">&quot;overflow&quot;</span> <span class="o">+</span> <span class="nx">value</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">overflow</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
          <span class="p">});</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-781" id="section-781">&#182;</a>
</div>
<p>Hide the element if the "hide" operation was done</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">hide</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">jQuery</span><span class="p">(</span><span class="nx">elem</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-782" id="section-782">&#182;</a>
</div>
<p>Reset the properties, if the item has been hidden or shown</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">hide</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">show</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">p</span> <span class="k">in</span> <span class="nx">options</span><span class="p">.</span><span class="nx">animatedProperties</span> <span class="p">)</span> <span class="p">{</span>
            <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">orig</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-783" id="section-783">&#182;</a>
</div>
<p>Execute the complete function</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="nx">options</span><span class="p">.</span><span class="nx">complete</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>

    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-784" id="section-784">&#182;</a>
</div>
<p>classical easing cannot be used with an Infinity duration</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">duration</span> <span class="o">==</span> <span class="kc">Infinity</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">now</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">n</span> <span class="o">=</span> <span class="nx">t</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">startTime</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">n</span> <span class="o">/</span> <span class="nx">options</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-785" id="section-785">&#182;</a>
</div>
<p>Perform the easing function, defaults to swing</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
        <span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">easing</span><span class="p">[</span> <span class="nx">options</span><span class="p">.</span><span class="nx">animatedProperties</span><span class="p">[</span> <span class="k">this</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="p">](</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">duration</span> <span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">now</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span> <span class="o">+</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">end</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">start</span><span class="p">)</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">);</span>
      <span class="p">}</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-786" id="section-786">&#182;</a>
</div>
<p>Perform the next step of the animation</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">this</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">tick</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">timers</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">timers</span><span class="p">.</span><span class="nx">length</span> <span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">timers</span><span class="p">[</span><span class="nx">i</span><span class="p">]()</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">timers</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">timers</span><span class="p">.</span><span class="nx">length</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fx</span><span class="p">.</span><span class="nx">stop</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">interval</span><span class="o">:</span> <span class="mi">13</span><span class="p">,</span>

  <span class="nx">stop</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">clearInterval</span><span class="p">(</span> <span class="nx">timerId</span> <span class="p">);</span>
    <span class="nx">timerId</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">speeds</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">slow</span><span class="o">:</span> <span class="mi">600</span><span class="p">,</span>
    <span class="nx">fast</span><span class="o">:</span> <span class="mi">200</span><span class="p">,</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-787" id="section-787">&#182;</a>
</div>
<p>Default speed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">_default</span><span class="o">:</span> <span class="mi">400</span>
  <span class="p">},</span>

  <span class="nx">step</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">opacity</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fx</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">jQuery</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">now</span> <span class="p">);</span>
    <span class="p">},</span>

    <span class="nx">_default</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fx</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">&amp;&amp;</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">!=</span> <span class="kc">null</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">fx</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">[</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">fx</span><span class="p">.</span><span class="nx">prop</span> <span class="o">===</span> <span class="s2">&quot;width&quot;</span> <span class="o">||</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">prop</span> <span class="o">===</span> <span class="s2">&quot;height&quot;</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">now</span><span class="p">)</span> <span class="o">:</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">now</span><span class="p">)</span> <span class="o">+</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">unit</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">fx</span><span class="p">.</span><span class="nx">elem</span><span class="p">[</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">prop</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">fx</span><span class="p">.</span><span class="nx">now</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">expr</span><span class="p">.</span><span class="nx">filters</span><span class="p">.</span><span class="nx">animated</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">timers</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">fn</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">elem</span><span class="p">;</span>
    <span class="p">}).</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-788" id="section-788">&#182;</a>
</div>
<p>Try to restore the default display value of an element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="kd">function</span> <span class="nx">defaultDisplay</span><span class="p">(</span> <span class="nx">nodeName</span> <span class="p">)</span> <span class="p">{</span>

  <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elemdisplay</span><span class="p">[</span> <span class="nx">nodeName</span> <span class="p">]</span> <span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span>
      <span class="nx">elem</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">+</span> <span class="nx">nodeName</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span> <span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span> <span class="nx">body</span> <span class="p">),</span>
      <span class="nx">display</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="s2">&quot;display&quot;</span> <span class="p">);</span>

    <span class="nx">elem</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-789" id="section-789">&#182;</a>
</div>
<p>If the simple way fails,
get element's real default display by attaching it to a temp iframe</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;none&quot;</span> <span class="o">||</span> <span class="nx">display</span> <span class="o">===</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-790" id="section-790">&#182;</a>
</div>
<p>No iframe to use yet, so create it</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">iframe</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">iframe</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="s2">&quot;iframe&quot;</span> <span class="p">);</span>
        <span class="nx">iframe</span><span class="p">.</span><span class="nx">frameBorder</span> <span class="o">=</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">iframe</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-791" id="section-791">&#182;</a>
</div>
<p>Create a cacheable copy of the iframe document on first call.
IE and Opera will allow us to reuse the iframeDoc without re-writing the fake HTML
document to it; WebKit &amp; Firefox won't allow reusing the iframe document.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">iframeDoc</span> <span class="o">||</span> <span class="o">!</span><span class="nx">iframe</span><span class="p">.</span><span class="nx">createElement</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">iframeDoc</span> <span class="o">=</span> <span class="p">(</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">contentWindow</span> <span class="o">||</span> <span class="nx">iframe</span><span class="p">.</span><span class="nx">contentDocument</span> <span class="p">).</span><span class="nb">document</span><span class="p">;</span>
        <span class="nx">iframeDoc</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span> <span class="p">(</span> <span class="nb">document</span><span class="p">.</span><span class="nx">compatMode</span> <span class="o">===</span> <span class="s2">&quot;CSS1Compat&quot;</span> <span class="o">?</span> <span class="s2">&quot;&lt;!doctype html&gt;&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&lt;html&gt;&lt;body&gt;&quot;</span> <span class="p">);</span>
        <span class="nx">iframeDoc</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
      <span class="p">}</span>

      <span class="nx">elem</span> <span class="o">=</span> <span class="nx">iframeDoc</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span> <span class="nx">nodeName</span> <span class="p">);</span>

      <span class="nx">iframeDoc</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>

      <span class="nx">display</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;display&quot;</span> <span class="p">);</span>

      <span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">iframe</span> <span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-792" id="section-792">&#182;</a>
</div>
<p>Store the correct default display</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">elemdisplay</span><span class="p">[</span> <span class="nx">nodeName</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">display</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">elemdisplay</span><span class="p">[</span> <span class="nx">nodeName</span> <span class="p">];</span>
<span class="p">}</span>




<span class="kd">var</span> <span class="nx">rtable</span> <span class="o">=</span> <span class="sr">/^t(?:able|d|h)$/i</span><span class="p">,</span>
  <span class="nx">rroot</span> <span class="o">=</span> <span class="sr">/^(?:body|html)$/i</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;getBoundingClientRect&quot;</span> <span class="k">in</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">box</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">setOffset</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">bodyOffset</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="nx">box</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kd">var</span> <span class="nx">doc</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span>
      <span class="nx">docElem</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-793" id="section-793">&#182;</a>
</div>
<p>Make sure we're not dealing with a disconnected DOM node</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">box</span> <span class="o">||</span> <span class="o">!</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span> <span class="nx">docElem</span><span class="p">,</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">box</span> <span class="o">?</span> <span class="p">{</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">box</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="nx">box</span><span class="p">.</span><span class="nx">left</span> <span class="p">}</span> <span class="o">:</span> <span class="p">{</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span> <span class="p">};</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span>
      <span class="nx">win</span> <span class="o">=</span> <span class="nx">getWindow</span><span class="p">(</span><span class="nx">doc</span><span class="p">),</span>
      <span class="nx">clientTop</span>  <span class="o">=</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientTop</span>  <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">clientLeft</span> <span class="o">=</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">clientLeft</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">scrollTop</span>  <span class="o">=</span> <span class="nx">win</span><span class="p">.</span><span class="nx">pageYOffset</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">boxModel</span> <span class="o">&amp;&amp;</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">scrollTop</span>  <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span>
      <span class="nx">scrollLeft</span> <span class="o">=</span> <span class="nx">win</span><span class="p">.</span><span class="nx">pageXOffset</span> <span class="o">||</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">boxModel</span> <span class="o">&amp;&amp;</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">,</span>
      <span class="nx">top</span>  <span class="o">=</span> <span class="nx">box</span><span class="p">.</span><span class="nx">top</span>  <span class="o">+</span> <span class="nx">scrollTop</span>  <span class="o">-</span> <span class="nx">clientTop</span><span class="p">,</span>
      <span class="nx">left</span> <span class="o">=</span> <span class="nx">box</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">scrollLeft</span> <span class="o">-</span> <span class="nx">clientLeft</span><span class="p">;</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">top</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="nx">left</span> <span class="p">};</span>
  <span class="p">};</span>

<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">setOffset</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">i</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="o">||</span> <span class="o">!</span><span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">bodyOffset</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>

    <span class="kd">var</span> <span class="nx">computedStyle</span><span class="p">,</span>
      <span class="nx">offsetParent</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">,</span>
      <span class="nx">prevOffsetParent</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">,</span>
      <span class="nx">doc</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">,</span>
      <span class="nx">docElem</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span>
      <span class="nx">body</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span>
      <span class="nx">defaultView</span> <span class="o">=</span> <span class="nx">doc</span><span class="p">.</span><span class="nx">defaultView</span><span class="p">,</span>
      <span class="nx">prevComputedStyle</span> <span class="o">=</span> <span class="nx">defaultView</span> <span class="o">?</span> <span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="kc">null</span> <span class="p">)</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">,</span>
      <span class="nx">top</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">,</span>
      <span class="nx">left</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span> <span class="p">(</span><span class="nx">elem</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span> <span class="o">!==</span> <span class="nx">body</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span> <span class="o">!==</span> <span class="nx">docElem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">supportsFixedPosition</span> <span class="o">&amp;&amp;</span> <span class="nx">prevComputedStyle</span><span class="p">.</span><span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;fixed&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">computedStyle</span> <span class="o">=</span> <span class="nx">defaultView</span> <span class="o">?</span> <span class="nx">defaultView</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="kc">null</span><span class="p">)</span> <span class="o">:</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">currentStyle</span><span class="p">;</span>
      <span class="nx">top</span>  <span class="o">-=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">;</span>
      <span class="nx">left</span> <span class="o">-=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span> <span class="o">===</span> <span class="nx">offsetParent</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">top</span>  <span class="o">+=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">;</span>
        <span class="nx">left</span> <span class="o">+=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">doesNotAddBorder</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">doesAddBorderForTableAndCells</span> <span class="o">&amp;&amp;</span> <span class="nx">rtable</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">elem</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">))</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">top</span>  <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">computedStyle</span><span class="p">.</span><span class="nx">borderTopWidth</span>  <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
          <span class="nx">left</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">computedStyle</span><span class="p">.</span><span class="nx">borderLeftWidth</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nx">prevOffsetParent</span> <span class="o">=</span> <span class="nx">offsetParent</span><span class="p">;</span>
        <span class="nx">offsetParent</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">subtractsBorderForOverflowNotVisible</span> <span class="o">&amp;&amp;</span> <span class="nx">computedStyle</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">!==</span> <span class="s2">&quot;visible&quot;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">top</span>  <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">computedStyle</span><span class="p">.</span><span class="nx">borderTopWidth</span>  <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">left</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">computedStyle</span><span class="p">.</span><span class="nx">borderLeftWidth</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">prevComputedStyle</span> <span class="o">=</span> <span class="nx">computedStyle</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">prevComputedStyle</span><span class="p">.</span><span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;relative&quot;</span> <span class="o">||</span> <span class="nx">prevComputedStyle</span><span class="p">.</span><span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;static&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">top</span>  <span class="o">+=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">;</span>
      <span class="nx">left</span> <span class="o">+=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">supportsFixedPosition</span> <span class="o">&amp;&amp;</span> <span class="nx">prevComputedStyle</span><span class="p">.</span><span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;fixed&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">top</span>  <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">,</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="p">);</span>
      <span class="nx">left</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span> <span class="nx">docElem</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">,</span> <span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">top</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="nx">left</span> <span class="p">};</span>
  <span class="p">};</span>
<span class="p">}</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="nx">container</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">),</span> <span class="nx">innerDiv</span><span class="p">,</span> <span class="nx">checkDiv</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">td</span><span class="p">,</span> <span class="nx">bodyMarginTop</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="s2">&quot;marginTop&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">html</span> <span class="o">=</span> <span class="s2">&quot;&lt;div style=&#39;position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;&#39;&gt;&lt;div&gt;&lt;/div&gt;&lt;/div&gt;&lt;table style=&#39;position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;&#39; cellpadding=&#39;0&#39; cellspacing=&#39;0&#39;&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;</span><span class="p">;</span>

    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span> <span class="nx">container</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span> <span class="p">{</span> <span class="nx">position</span><span class="o">:</span> <span class="s2">&quot;absolute&quot;</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">border</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">width</span><span class="o">:</span> <span class="s2">&quot;1px&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="o">:</span> <span class="s2">&quot;1px&quot;</span><span class="p">,</span> <span class="nx">visibility</span><span class="o">:</span> <span class="s2">&quot;hidden&quot;</span> <span class="p">}</span> <span class="p">);</span>

    <span class="nx">container</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">html</span><span class="p">;</span>
    <span class="nx">body</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span> <span class="nx">container</span><span class="p">,</span> <span class="nx">body</span><span class="p">.</span><span class="nx">firstChild</span> <span class="p">);</span>
    <span class="nx">innerDiv</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
    <span class="nx">checkDiv</span> <span class="o">=</span> <span class="nx">innerDiv</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
    <span class="nx">td</span> <span class="o">=</span> <span class="nx">innerDiv</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">doesNotAddBorder</span> <span class="o">=</span> <span class="p">(</span><span class="nx">checkDiv</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">!==</span> <span class="mi">5</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">doesAddBorderForTableAndCells</span> <span class="o">=</span> <span class="p">(</span><span class="nx">td</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">===</span> <span class="mi">5</span><span class="p">);</span>

    <span class="nx">checkDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="s2">&quot;fixed&quot;</span><span class="p">;</span>
    <span class="nx">checkDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="s2">&quot;20px&quot;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-794" id="section-794">&#182;</a>
</div>
<p>safari subtracts parent border width here which is 5px</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">this</span><span class="p">.</span><span class="nx">supportsFixedPosition</span> <span class="o">=</span> <span class="p">(</span><span class="nx">checkDiv</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">===</span> <span class="mi">20</span> <span class="o">||</span> <span class="nx">checkDiv</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">===</span> <span class="mi">15</span><span class="p">);</span>
    <span class="nx">checkDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="nx">checkDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

    <span class="nx">innerDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">overflow</span> <span class="o">=</span> <span class="s2">&quot;hidden&quot;</span><span class="p">;</span>
    <span class="nx">innerDiv</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="s2">&quot;relative&quot;</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">subtractsBorderForOverflowNotVisible</span> <span class="o">=</span> <span class="p">(</span><span class="nx">checkDiv</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">===</span> <span class="o">-</span><span class="mi">5</span><span class="p">);</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">doesNotIncludeMarginInBodyOffset</span> <span class="o">=</span> <span class="p">(</span><span class="nx">body</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">!==</span> <span class="nx">bodyMarginTop</span><span class="p">);</span>

    <span class="nx">body</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span> <span class="nx">container</span> <span class="p">);</span>
    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">initialize</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">noop</span><span class="p">;</span>
  <span class="p">},</span>

  <span class="nx">bodyOffset</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">body</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">top</span> <span class="o">=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">,</span>
      <span class="nx">left</span> <span class="o">=</span> <span class="nx">body</span><span class="p">.</span><span class="nx">offsetLeft</span><span class="p">;</span>

    <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">initialize</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">offset</span><span class="p">.</span><span class="nx">doesNotIncludeMarginInBodyOffset</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">top</span>  <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="s2">&quot;marginTop&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">left</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">body</span><span class="p">,</span> <span class="s2">&quot;marginLeft&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="p">{</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">top</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="nx">left</span> <span class="p">};</span>
  <span class="p">},</span>

  <span class="nx">setOffset</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">position</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;position&quot;</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-795" id="section-795">&#182;</a>
</div>
<p>set position first, in-case top/left are set even on static elem</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;static&quot;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">position</span> <span class="o">=</span> <span class="s2">&quot;relative&quot;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">curElem</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">),</span>
      <span class="nx">curOffset</span> <span class="o">=</span> <span class="nx">curElem</span><span class="p">.</span><span class="nx">offset</span><span class="p">(),</span>
      <span class="nx">curCSSTop</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;top&quot;</span> <span class="p">),</span>
      <span class="nx">curCSSLeft</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span> <span class="p">),</span>
      <span class="nx">calculatePosition</span> <span class="o">=</span> <span class="p">(</span><span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;absolute&quot;</span> <span class="o">||</span> <span class="nx">position</span> <span class="o">===</span> <span class="s2">&quot;fixed&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">inArray</span><span class="p">(</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">curCSSTop</span><span class="p">,</span> <span class="nx">curCSSLeft</span><span class="p">])</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
      <span class="nx">props</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">curPosition</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">curTop</span><span class="p">,</span> <span class="nx">curLeft</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-796" id="section-796">&#182;</a>
</div>
<p>need to be able to calculate position if either top or left is auto and position is either absolute or fixed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">calculatePosition</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">curPosition</span> <span class="o">=</span> <span class="nx">curElem</span><span class="p">.</span><span class="nx">position</span><span class="p">();</span>
      <span class="nx">curTop</span> <span class="o">=</span> <span class="nx">curPosition</span><span class="p">.</span><span class="nx">top</span><span class="p">;</span>
      <span class="nx">curLeft</span> <span class="o">=</span> <span class="nx">curPosition</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">curTop</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">curCSSTop</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">curLeft</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">curCSSLeft</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">curOffset</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">top</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">props</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">curOffset</span><span class="p">.</span><span class="nx">top</span><span class="p">)</span> <span class="o">+</span> <span class="nx">curTop</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">left</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">props</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">left</span> <span class="o">-</span> <span class="nx">curOffset</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="o">+</span> <span class="nx">curLeft</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="s2">&quot;using&quot;</span> <span class="k">in</span> <span class="nx">options</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">options</span><span class="p">.</span><span class="nx">using</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">props</span> <span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">curElem</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">props</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>


<span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">position</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-797" id="section-797">&#182;</a>
</div>
<p>Get <em>real</em> offsetParent</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">offsetParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">(),</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-798" id="section-798">&#182;</a>
</div>
<p>Get correct offsets</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">offset</span>       <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">offset</span><span class="p">(),</span>
    <span class="nx">parentOffset</span> <span class="o">=</span> <span class="nx">rroot</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">offsetParent</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nodeName</span><span class="p">)</span> <span class="o">?</span> <span class="p">{</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span> <span class="p">}</span> <span class="o">:</span> <span class="nx">offsetParent</span><span class="p">.</span><span class="nx">offset</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-799" id="section-799">&#182;</a>
</div>
<p>Subtract element margins
note: when an element has margin: auto the offsetLeft and marginLeft
are the same in Safari causing offset.left to incorrectly be 0</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">offset</span><span class="p">.</span><span class="nx">top</span>  <span class="o">-=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;marginTop&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">-=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">elem</span><span class="p">,</span> <span class="s2">&quot;marginLeft&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-800" id="section-800">&#182;</a>
</div>
<p>Add offsetParent borders</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">top</span>  <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">offsetParent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;borderTopWidth&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">left</span> <span class="o">+=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">offsetParent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;borderLeftWidth&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-801" id="section-801">&#182;</a>
</div>
<p>Subtract the two offsets</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">top</span><span class="o">:</span>  <span class="nx">offset</span><span class="p">.</span><span class="nx">top</span>  <span class="o">-</span> <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">top</span><span class="p">,</span>
      <span class="nx">left</span><span class="o">:</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">left</span> <span class="o">-</span> <span class="nx">parentOffset</span><span class="p">.</span><span class="nx">left</span>
    <span class="p">};</span>
  <span class="p">},</span>

  <span class="nx">offsetParent</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">offsetParent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">offsetParent</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span> <span class="nx">offsetParent</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">rroot</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">offsetParent</span><span class="p">.</span><span class="nx">nodeName</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="nx">offsetParent</span><span class="p">,</span> <span class="s2">&quot;position&quot;</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;static&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">offsetParent</span> <span class="o">=</span> <span class="nx">offsetParent</span><span class="p">.</span><span class="nx">offsetParent</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">offsetParent</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-802" id="section-802">&#182;</a>
</div>
<p>Create scrollLeft and scrollTop methods</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="p">[</span><span class="s2">&quot;Left&quot;</span><span class="p">,</span> <span class="s2">&quot;Top&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">method</span> <span class="o">=</span> <span class="s2">&quot;scroll&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">;</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">val</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">win</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">val</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>

      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">win</span> <span class="o">=</span> <span class="nx">getWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-803" id="section-803">&#182;</a>
</div>
<p>Return the scroll offset</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nx">win</span> <span class="o">?</span> <span class="p">(</span><span class="s2">&quot;pageXOffset&quot;</span> <span class="k">in</span> <span class="nx">win</span><span class="p">)</span> <span class="o">?</span> <span class="nx">win</span><span class="p">[</span> <span class="nx">i</span> <span class="o">?</span> <span class="s2">&quot;pageYOffset&quot;</span> <span class="o">:</span> <span class="s2">&quot;pageXOffset&quot;</span> <span class="p">]</span> <span class="o">:</span>
        <span class="nx">jQuery</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">boxModel</span> <span class="o">&amp;&amp;</span> <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">||</span>
          <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">:</span>
        <span class="nx">elem</span><span class="p">[</span> <span class="nx">method</span> <span class="p">];</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-804" id="section-804">&#182;</a>
</div>
<p>Set the scroll offset</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">win</span> <span class="o">=</span> <span class="nx">getWindow</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span> <span class="nx">win</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">win</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span>
          <span class="o">!</span><span class="nx">i</span> <span class="o">?</span> <span class="nx">val</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">win</span> <span class="p">).</span><span class="nx">scrollLeft</span><span class="p">(),</span>
           <span class="nx">i</span> <span class="o">?</span> <span class="nx">val</span> <span class="o">:</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="nx">win</span> <span class="p">).</span><span class="nx">scrollTop</span><span class="p">()</span>
        <span class="p">);</span>

      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">[</span> <span class="nx">method</span> <span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">};</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">getWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="o">?</span>
    <span class="nx">elem</span> <span class="o">:</span>
    <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="o">?</span>
      <span class="nx">elem</span><span class="p">.</span><span class="nx">defaultView</span> <span class="o">||</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">parentWindow</span> <span class="o">:</span>
      <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>





</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-805" id="section-805">&#182;</a>
</div>
<p>Create width, height, innerHeight, innerWidth, outerHeight and outerWidth methods</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">each</span><span class="p">([</span> <span class="s2">&quot;Height&quot;</span><span class="p">,</span> <span class="s2">&quot;Width&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">name</span> <span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-806" id="section-806">&#182;</a>
</div>
<p>innerHeight and innerWidth</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="s2">&quot;inner&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">return</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">?</span>
      <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="s2">&quot;padding&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span>
      <span class="kc">null</span><span class="p">;</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-807" id="section-807">&#182;</a>
</div>
<p>outerHeight and outerWidth</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="s2">&quot;outer&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">margin</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">return</span> <span class="nx">elem</span> <span class="o">&amp;&amp;</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">style</span> <span class="o">?</span>
      <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">margin</span> <span class="o">?</span> <span class="s2">&quot;margin&quot;</span> <span class="o">:</span> <span class="s2">&quot;border&quot;</span> <span class="p">)</span> <span class="p">)</span> <span class="o">:</span>
      <span class="kc">null</span><span class="p">;</span>
  <span class="p">};</span>

  <span class="nx">jQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">size</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-808" id="section-808">&#182;</a>
</div>
<p>Get window width or height</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">elem</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">elem</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">size</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span> <span class="nx">size</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">i</span> <span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span> <span class="k">this</span> <span class="p">);</span>
        <span class="nx">self</span><span class="p">[</span> <span class="nx">type</span> <span class="p">](</span> <span class="nx">size</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span> <span class="k">this</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">self</span><span class="p">[</span> <span class="nx">type</span> <span class="p">]()</span> <span class="p">)</span> <span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">isWindow</span><span class="p">(</span> <span class="nx">elem</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-809" id="section-809">&#182;</a>
</div>
<p>Everyone else use document.documentElement or document.body depending on Quirks vs Standards mode
3rd condition allows Nokia support, as it supports the docElem prop but not CSS1Compat</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">docElemProp</span> <span class="o">=</span> <span class="nx">elem</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span> <span class="s2">&quot;client&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">];</span>
      <span class="k">return</span> <span class="nx">elem</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">compatMode</span> <span class="o">===</span> <span class="s2">&quot;CSS1Compat&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">docElemProp</span> <span class="o">||</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span> <span class="s2">&quot;client&quot;</span> <span class="o">+</span> <span class="nx">name</span> <span class="p">]</span> <span class="o">||</span> <span class="nx">docElemProp</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-810" id="section-810">&#182;</a>
</div>
<p>Get document width or height</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">nodeType</span> <span class="o">===</span> <span class="mi">9</span> <span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-811" id="section-811">&#182;</a>
</div>
<p>Either scroll[Width/Height] or offset[Width/Height], whichever is greater</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span><span class="s2">&quot;client&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">],</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span><span class="s2">&quot;scroll&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">],</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span><span class="s2">&quot;scroll&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">],</span>
        <span class="nx">elem</span><span class="p">.</span><span class="nx">body</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">],</span> <span class="nx">elem</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">[</span><span class="s2">&quot;offset&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">]</span>
      <span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-812" id="section-812">&#182;</a>
</div>
<p>Get or set width or height on the element</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">size</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">orig</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">type</span> <span class="p">),</span>
        <span class="nx">ret</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span> <span class="nx">orig</span> <span class="p">);</span>

      <span class="k">return</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nb">isNaN</span><span class="p">(</span> <span class="nx">ret</span> <span class="p">)</span> <span class="o">?</span> <span class="nx">orig</span> <span class="o">:</span> <span class="nx">ret</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-813" id="section-813">&#182;</a>
</div>
<p>Set the width or height on the element (default to pixels if value is unitless)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span> <span class="nx">type</span><span class="p">,</span> <span class="k">typeof</span> <span class="nx">size</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span> <span class="nx">size</span> <span class="o">:</span> <span class="nx">size</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span> <span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>

<span class="p">});</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-814" id="section-814">&#182;</a>
</div>
<p>Expose jQuery to the global object</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">;</span>
<span class="p">})(</span><span class="nb">window</span><span class="p">);</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
