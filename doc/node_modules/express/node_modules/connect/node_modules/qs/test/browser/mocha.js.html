<!DOCTYPE html>
<html>
<head>
  <title>mocha.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../../../../doc-style.css" />
  <script src="../../../../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../../../../", thisFile = "node_modules/express/node_modules/connect/node_modules/qs/test/browser/mocha.js", defaultSidebar = true;
  </script>
  <script src="../../../../../../../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>mocha.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="p">;(</span><span class="kd">function</span><span class="p">(){</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2">&#182;</a>
</div>
<p>CommonJS require()</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">require</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span>
      <span class="p">,</span> <span class="nx">mod</span> <span class="o">=</span> <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">path</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">mod</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;failed to require &quot;&#39;</span> <span class="o">+</span> <span class="nx">p</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">mod</span><span class="p">.</span><span class="nx">exports</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">mod</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{};</span>
      <span class="nx">mod</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">mod</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">mod</span><span class="p">,</span> <span class="nx">mod</span><span class="p">.</span><span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">.</span><span class="nx">relative</span><span class="p">(</span><span class="nx">path</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">mod</span><span class="p">.</span><span class="nx">exports</span><span class="p">;</span>
  <span class="p">}</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">modules</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">resolve</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">path</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">orig</span> <span class="o">=</span> <span class="nx">path</span>
      <span class="p">,</span> <span class="nx">reg</span> <span class="o">=</span> <span class="nx">path</span> <span class="o">+</span> <span class="s1">&#39;.js&#39;</span>
      <span class="p">,</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">path</span> <span class="o">+</span> <span class="s1">&#39;/index.js&#39;</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">reg</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">reg</span>
      <span class="o">||</span> <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">index</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">index</span>
      <span class="o">||</span> <span class="nx">orig</span><span class="p">;</span>
  <span class="p">};</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
    <span class="nx">require</span><span class="p">.</span><span class="nx">modules</span><span class="p">[</span><span class="nx">path</span><span class="p">]</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
  <span class="p">};</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">relative</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">){</span>
      <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">!=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="k">return</span> <span class="nx">require</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
      
      <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
        <span class="p">,</span> <span class="nx">segs</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>
      <span class="nx">path</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
      
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">segs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">seg</span> <span class="o">=</span> <span class="nx">segs</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;..&#39;</span> <span class="o">==</span> <span class="nx">seg</span><span class="p">)</span> <span class="nx">path</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">!=</span> <span class="nx">seg</span><span class="p">)</span> <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">seg</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="nx">require</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">));</span>
    <span class="p">};</span>
  <span class="p">};</span>


<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;browser/debug.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">){</span>
  <span class="k">return</span> <span class="kd">function</span><span class="p">(){</span>
    
  <span class="p">}</span>
<span class="p">};</span>
<span class="p">});</span> <span class="c1">// module: browser/debug.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;browser/diff.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>

<span class="p">});</span> <span class="c1">// module: browser/diff.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;browser/events.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module exports.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">EventEmitter</span> <span class="o">=</span> <span class="nx">EventEmitter</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Check if <code>obj</code> is an array.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">isArray</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s1">&#39;[object Array]&#39;</span> <span class="o">==</span> <span class="p">{}.</span><span class="nx">toString</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Event emitter constructor.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public.
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">EventEmitter</span><span class="p">(){};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Adds a listener.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">EventEmitter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">on</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$events</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">isArray</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">]))</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">],</span> <span class="nx">fn</span><span class="p">];</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">EventEmitter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addListener</span> <span class="o">=</span> <span class="nx">EventEmitter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">on</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Adds a volatile listener.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">EventEmitter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">once</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">on</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">on</span><span class="p">);</span>
    <span class="nx">fn</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">on</span><span class="p">.</span><span class="nx">listener</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">on</span><span class="p">);</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Removes a listener.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">EventEmitter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeListener</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">list</span><span class="p">))</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">pos</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>

      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">list</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">fn</span> <span class="o">||</span> <span class="p">(</span><span class="nx">list</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">listener</span> <span class="o">&amp;&amp;</span> <span class="nx">list</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">listener</span> <span class="o">===</span> <span class="nx">fn</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">pos</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">pos</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">list</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">pos</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">list</span> <span class="o">===</span> <span class="nx">fn</span> <span class="o">||</span> <span class="p">(</span><span class="nx">list</span><span class="p">.</span><span class="nx">listener</span> <span class="o">&amp;&amp;</span> <span class="nx">list</span><span class="p">.</span><span class="nx">listener</span> <span class="o">===</span> <span class="nx">fn</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Removes all listeners for an event.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">EventEmitter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">removeAllListeners</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="o">===</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$events</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Gets all listeners for a certain event.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">publci
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">EventEmitter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">listeners</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$events</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">])</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isArray</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">]))</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">]];</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Emits an event.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">EventEmitter</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">emit</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">handler</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$events</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;function&#39;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">handler</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">handler</span><span class="p">))</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">listeners</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">listeners</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">listeners</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>
<span class="p">});</span> <span class="c1">// module: browser/events.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;browser/fs.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>

<span class="p">});</span> <span class="c1">// module: browser/fs.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;browser/path.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>

<span class="p">});</span> <span class="c1">// module: browser/path.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;browser/progress.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Progress</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Progress</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Progress</code> indicator.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Progress</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">percent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">fontSize</span><span class="p">(</span><span class="mi">11</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">font</span><span class="p">(</span><span class="s1">&#39;helvetica, arial, sans-serif&#39;</span><span class="p">);</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set progress size to <code>n</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">n</span>
      <span class="dox_type">Number</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Progress</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Progress</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_size</span> <span class="o">=</span> <span class="nx">n</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set text to <code>str</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">str</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Progress</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Progress</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_text</span> <span class="o">=</span> <span class="nx">str</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set font size to <code>n</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">n</span>
      <span class="dox_type">Number</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Progress</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Progress</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fontSize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_fontSize</span> <span class="o">=</span> <span class="nx">n</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set font <code>family</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">family</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Progress</span>
      <span>for chaining</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Progress</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">family</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_font</span> <span class="o">=</span> <span class="nx">family</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Update percentage to <code>n</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">n</span>
      <span class="dox_type">Number</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Progress</span>
      <span>for chaining</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Progress</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">percent</span> <span class="o">=</span> <span class="nx">n</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Draw on <code>ctx</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">ctx</span>
      <span class="dox_type">CanvasRenderingContext2d</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Progress</span>
      <span>for chaining</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Progress</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">draw</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ctx</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">percent</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">percent</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">size</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_size</span>
    <span class="p">,</span> <span class="nx">half</span> <span class="o">=</span> <span class="nx">size</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">half</span>
    <span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">half</span>
    <span class="p">,</span> <span class="nx">rad</span> <span class="o">=</span> <span class="nx">half</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="p">,</span> <span class="nx">fontSize</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_fontSize</span><span class="p">;</span>

  <span class="nx">ctx</span><span class="p">.</span><span class="nx">font</span> <span class="o">=</span> <span class="nx">fontSize</span> <span class="o">+</span> <span class="s1">&#39;px &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_font</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">angle</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="nx">percent</span> <span class="o">/</span> <span class="mi">100</span><span class="p">);</span>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">clearRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">size</span><span class="p">,</span> <span class="nx">size</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20">&#182;</a>
</div>
<p>outer circle</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="s1">&#39;#9f9f9f&#39;</span><span class="p">;</span>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">rad</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">angle</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21">&#182;</a>
</div>
<p>inner circle</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">strokeStyle</span> <span class="o">=</span> <span class="s1">&#39;#eee&#39;</span><span class="p">;</span>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">();</span>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">rad</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">angle</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="nx">ctx</span><span class="p">.</span><span class="nx">stroke</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22">&#182;</a>
</div>
<p>text</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">text</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_text</span> <span class="o">||</span> <span class="p">(</span><span class="nx">percent</span> <span class="o">|</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;%&#39;</span>
    <span class="p">,</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">measureText</span><span class="p">(</span><span class="nx">text</span><span class="p">).</span><span class="nx">width</span><span class="p">;</span>

  <span class="nx">ctx</span><span class="p">.</span><span class="nx">fillText</span><span class="p">(</span>
      <span class="nx">text</span>
    <span class="p">,</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">w</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">fontSize</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">});</span> <span class="c1">// module: browser/progress.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;browser/tty.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">isatty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">};</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">getWindowSize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="k">return</span> <span class="p">[</span><span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span><span class="p">,</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerWidth</span><span class="p">];</span>
<span class="p">};</span>
<span class="p">});</span> <span class="c1">// module: browser/tty.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;context.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Context</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Context</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Context</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Context</span><span class="p">(){}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set the context <code>Runnable</code> to <code>runnable</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runnable</span>
      <span class="dox_type">Runnable</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Context</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Context</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">runnable</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">runnable</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_runnable</span> <span class="o">=</span> <span class="nx">runnable</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set test timeout <code>ms</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">ms</span>
      <span class="dox_type">Number</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Context</span>
      <span>self</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Context</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ms</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_runnable</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="nx">ms</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inspect the context void of <code>._runnable</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Context</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">inspect</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">val</span><span class="p">){</span>
    <span class="k">return</span> <span class="s1">&#39;_runnable&#39;</span> <span class="o">==</span> <span class="nx">key</span>
      <span class="o">?</span> <span class="kc">undefined</span>
      <span class="o">:</span> <span class="nx">val</span><span class="p">;</span>
  <span class="p">},</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">};</span>

<span class="p">});</span> <span class="c1">// module: context.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;hook.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Runnable</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./runnable&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Hook</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Hook</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Hook</code> with the given <code>title</code> and callback <code>fn</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">title</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Hook</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Runnable</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;hook&#39;</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>Runnable.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Hook</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Runnable</span><span class="p">;</span>
<span class="nx">Hook</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Hook</span><span class="p">;</span>


<span class="p">});</span> <span class="c1">// module: hook.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;interfaces/bdd.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Suite</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../suite&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">Test</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../test&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>BDD-style interface:</p>
  </div>
  <div class="body"><p>describe('Array', function(){
       describe('#indexOf()', function(){
         it('should return -1 when not present', function(){</p>

<p>});</p>

<p>it('should return the index when present', function(){</p>

<p>});
       });
     });</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">suites</span> <span class="o">=</span> <span class="p">[</span><span class="nx">suite</span><span class="p">];</span>

  <span class="nx">suite</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pre-require&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34">&#182;</a>
</div>
<p>noop variants</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">xdescribe</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){};</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">xit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute before running tests.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">before</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">beforeAll</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute after running tests.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">after</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">afterAll</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute before each test case.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beforeEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">beforeEach</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute after each test case.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">afterEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">afterEach</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Describe a "suite" with the given <code>title</code>
and callback <code>fn</code> containing nested suites
and/or tests.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  
    <span class="nx">context</span><span class="p">.</span><span class="nx">describe</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="nx">Suite</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">title</span><span class="p">);</span>
      <span class="nx">suites</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
      <span class="nx">fn</span><span class="p">();</span>
      <span class="nx">suites</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Describe a specification or test-case
with the given <code>title</code> and callback <code>fn</code>
acting as a thunk.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">it</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addTest</span><span class="p">(</span><span class="k">new</span> <span class="nx">Test</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">));</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="p">});</span> <span class="c1">// module: interfaces/bdd.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;interfaces/exports.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Suite</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../suite&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">Test</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../test&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>TDD-style interface:</p>
  </div>
  <div class="body"><p>exports.Array = {
      '#indexOf()': {
        'should return -1 when the value is not present': function(){</p>

<p>},</p>

<p>'should return the correct index when the value is present': function(){</p>

<p>}
      }
    };</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">suites</span> <span class="o">=</span> <span class="p">[</span><span class="nx">suite</span><span class="p">];</span>

  <span class="nx">suite</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="nx">visit</span><span class="p">);</span>

  <span class="kd">function</span> <span class="nx">visit</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">suite</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;function&#39;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">case</span> <span class="s1">&#39;before&#39;</span><span class="o">:</span>
            <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">beforeAll</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="k">case</span> <span class="s1">&#39;after&#39;</span><span class="o">:</span>
            <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">afterAll</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="k">case</span> <span class="s1">&#39;beforeEach&#39;</span><span class="o">:</span>
            <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">beforeEach</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="k">case</span> <span class="s1">&#39;afterEach&#39;</span><span class="o">:</span>
            <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">afterEach</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="k">default</span><span class="o">:</span>
            <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addTest</span><span class="p">(</span><span class="k">new</span> <span class="nx">Test</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">fn</span><span class="p">));</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="nx">Suite</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">key</span><span class="p">);</span>
        <span class="nx">suites</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
        <span class="nx">visit</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
        <span class="nx">suites</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="p">});</span> <span class="c1">// module: interfaces/exports.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;interfaces/index.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">bdd</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./bdd&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">tdd</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./tdd&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">qunit</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./qunit&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./exports&#39;</span><span class="p">);</span>

<span class="p">});</span> <span class="c1">// module: interfaces/index.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;interfaces/qunit.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Suite</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../suite&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">Test</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../test&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>QUnit-style interface:</p>
  </div>
  <div class="body"><p>suite('Array');</p>

<p>test('#length', function(){
      var arr = [1,2,3];
      ok(arr.length == 3);
    });</p>

<p>test('#indexOf()', function(){
      var arr = [1,2,3];
      ok(arr.indexOf(1) == 0);
      ok(arr.indexOf(2) == 1);
      ok(arr.indexOf(3) == 2);
    });</p>

<p>suite('String');</p>

<p>test('#length', function(){
      ok('foo'.length == 3);
    });</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">suites</span> <span class="o">=</span> <span class="p">[</span><span class="nx">suite</span><span class="p">];</span>

  <span class="nx">suite</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pre-require&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute before running tests.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">before</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">beforeAll</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute after running tests.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">after</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">afterAll</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute before each test case.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">beforeEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">beforeEach</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute after each test case.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">afterEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">afterEach</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Describe a "suite" with the given <code>title</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  
    <span class="nx">context</span><span class="p">.</span><span class="nx">suite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">title</span><span class="p">){</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">suites</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">suites</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="nx">Suite</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">title</span><span class="p">);</span>
      <span class="nx">suites</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Describe a specification or test-case
with the given <code>title</code> and callback <code>fn</code>
acting as a thunk.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">test</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addTest</span><span class="p">(</span><span class="k">new</span> <span class="nx">Test</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">));</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="p">});</span> <span class="c1">// module: interfaces/qunit.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;interfaces/tdd.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Suite</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../suite&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">Test</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../test&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>TDD-style interface:</p>
  </div>
  <div class="body"><p>suite('Array', function(){
       suite('#indexOf()', function(){
         suiteSetup(function(){</p>

<p>});</p>

<p>test('should return -1 when not present', function(){</p>

<p>});</p>

<p>test('should return the index when present', function(){</p>

<p>});</p>

<p>suiteTeardown(function(){</p>

<p>});
       });
     });</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">suites</span> <span class="o">=</span> <span class="p">[</span><span class="nx">suite</span><span class="p">];</span>

  <span class="nx">suite</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pre-require&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">context</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute before each test case.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">setup</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">beforeEach</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute after each test case.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">teardown</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">afterEach</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute before the suite.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">suiteSetup</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">beforeAll</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Execute after the suite.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">suiteTeardown</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">afterAll</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Describe a "suite" with the given <code>title</code>
and callback <code>fn</code> containing nested suites
and/or tests.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">suite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="nx">Suite</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">title</span><span class="p">);</span>
      <span class="nx">suites</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
      <span class="nx">fn</span><span class="p">();</span>
      <span class="nx">suites</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
    <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Describe a specification or test-case
with the given <code>title</code> and callback <code>fn</code>
acting as a thunk.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

    <span class="nx">context</span><span class="p">.</span><span class="nx">test</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
      <span class="nx">suites</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">addTest</span><span class="p">(</span><span class="k">new</span> <span class="nx">Test</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">));</span>
    <span class="p">};</span>
  <span class="p">});</span>
<span class="p">};</span>

<span class="p">});</span> <span class="c1">// module: interfaces/tdd.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;mocha.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>!
mocha
Copyright(c) 2011 TJ Holowaychuk <a href="&#x6D;&#x61;&#105;&#108;&#116;&#111;:&#116;&#106;&#x40;&#118;&#105;s&#x69;&#x6F;&#110;&#x2D;&#x6D;e&#100;&#105;&#x61;.&#99;&#x61;">&#116;&#106;&#x40;&#118;&#105;s&#x69;&#x6F;&#110;&#x2D;&#x6D;e&#100;&#105;&#x61;.&#99;&#x61;</a>
MIT Licensed</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/path&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Mocha</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Mocha</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Library version.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="s1">&#39;1.0.3&#39;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose internals.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">utils</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./utils&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">interfaces</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./interfaces&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">reporters</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./reporters&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Runnable</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./runnable&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Context</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./context&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Runner</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./runner&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Suite</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./suite&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Hook</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./hook&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Test</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./test&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return image <code>name</code> path.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">image</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">&#39;/../images/&#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;.png&#39;</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Setup mocha with <code>options</code>.</p>
  </div>
  <div class="body"><p>Options:</p>

<ul>
<li><code>ui</code> name "bdd", "tdd", "exports" etc
<ul><li><code>reporter</code> reporter instance, defaults to <code>mocha.reporters.Dot</code></li>
<li><code>globals</code> array of accepted globals</li>
<li><code>timeout</code> timeout in milliseconds</li>
<li><code>ignoreLeaks</code> ignore global leaks</li>
<li><code>grep</code> string or regexp to filter tests with</li></ul></li>
</ul>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Mocha</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="nx">options</span><span class="p">.</span><span class="nx">grep</span> <span class="o">=</span> <span class="s1">&#39;string&#39;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">options</span><span class="p">.</span><span class="nx">grep</span>
    <span class="o">?</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">grep</span><span class="p">)</span>
    <span class="o">:</span> <span class="nx">options</span><span class="p">.</span><span class="nx">grep</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">files</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">suite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">Suite</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">Context</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">ui</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">ui</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">reporter</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">reporter</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">timeout</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">timeout</span><span class="p">);</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Add test <code>file</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">file</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Mocha</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addFile</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">file</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">files</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set reporter to <code>name</code>, defaults to "dot".</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Mocha</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reporter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
  <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">||</span> <span class="s1">&#39;dot&#39;</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_reporter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./reporters/&#39;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_reporter</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;invalid reporter &quot;&#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set test UI <code>name</code>, defaults to "bdd".</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">bdd</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Mocha</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">ui</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
  <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span> <span class="o">||</span> <span class="s1">&#39;bdd&#39;</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_ui</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">interfaces</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_ui</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;invalid interface &quot;&#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_ui</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_ui</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Load registered files.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Mocha</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">loadFiles</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">files</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">file</span><span class="p">){</span>
    <span class="nx">file</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
    <span class="nx">suite</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;pre-require&#39;</span><span class="p">,</span> <span class="nx">global</span><span class="p">,</span> <span class="nx">file</span><span class="p">);</span>
    <span class="nx">suite</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;require&#39;</span><span class="p">,</span> <span class="nx">require</span><span class="p">(</span><span class="nx">file</span><span class="p">),</span> <span class="nx">file</span><span class="p">);</span>
    <span class="nx">suite</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;post-require&#39;</span><span class="p">,</span> <span class="nx">global</span><span class="p">,</span> <span class="nx">file</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Enable growl support.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Mocha</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">growl</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">runner</span><span class="p">,</span> <span class="nx">reporter</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">notify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;growl&#39;</span><span class="p">);</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">stats</span> <span class="o">=</span> <span class="nx">reporter</span><span class="p">.</span><span class="nx">stats</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">failures</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">failures</span> <span class="o">+</span> <span class="s1">&#39; of &#39;</span> <span class="o">+</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">total</span> <span class="o">+</span> <span class="s1">&#39; tests failed&#39;</span><span class="p">;</span>
      <span class="nx">notify</span><span class="p">(</span><span class="nx">msg</span><span class="p">,</span> <span class="p">{</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Failed&#39;</span><span class="p">,</span> <span class="nx">image</span><span class="o">:</span> <span class="nx">image</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">)</span> <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">notify</span><span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">passes</span> <span class="o">+</span> <span class="s1">&#39; tests passed in &#39;</span> <span class="o">+</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">duration</span> <span class="o">+</span> <span class="s1">&#39;ms&#39;</span><span class="p">,</span> <span class="p">{</span>
          <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Passed&#39;</span>
        <span class="p">,</span> <span class="nx">image</span><span class="o">:</span> <span class="nx">image</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">)</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Add regexp to grep for to the options object</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">or</span>
      <span class="dox_type">RegExp</span>
      <span>{String} re</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Mocha</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Mocha</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">grep</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">re</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">grep</span> <span class="o">=</span> <span class="s1">&#39;string&#39;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">re</span>
    <span class="o">?</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">re</span><span class="p">)</span>
    <span class="o">:</span> <span class="nx">re</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run tests and invoke <code>fn()</code> when complete.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Mocha</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">run</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">loadFiles</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">runner</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">Runner</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">reporter</span> <span class="o">=</span> <span class="k">new</span> <span class="k">this</span><span class="p">.</span><span class="nx">_reporter</span><span class="p">(</span><span class="nx">runner</span><span class="p">);</span>
  <span class="nx">runner</span><span class="p">.</span><span class="nx">ignoreLeaks</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">ignoreLeaks</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">grep</span><span class="p">)</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">grep</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">globals</span><span class="p">)</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">globals</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">globals</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">growl</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">growl</span><span class="p">(</span><span class="nx">runner</span><span class="p">,</span> <span class="nx">reporter</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
<span class="p">};</span>

<span class="p">});</span> <span class="c1">// module: mocha.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/base.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">tty</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/tty&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">diff</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/diff&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Save timer references to avoid Sinon interfering (see GH-237).</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nb">Date</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nb">Date</span>
  <span class="p">,</span> <span class="nx">setTimeout</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">setTimeout</span>
  <span class="p">,</span> <span class="nx">setInterval</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">setInterval</span>
  <span class="p">,</span> <span class="nx">clearTimeout</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">clearTimeout</span>
  <span class="p">,</span> <span class="nx">clearInterval</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Check if both stdio streams are associated with a tty.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">isatty</span> <span class="o">=</span> <span class="nx">tty</span><span class="p">.</span><span class="nx">isatty</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">tty</span><span class="p">.</span><span class="nx">isatty</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Base</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Enable coloring by default.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">useColors</span> <span class="o">=</span> <span class="nx">isatty</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Default color map.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">colors</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;pass&#39;</span><span class="o">:</span> <span class="mi">90</span>
  <span class="p">,</span> <span class="s1">&#39;fail&#39;</span><span class="o">:</span> <span class="mi">31</span>
  <span class="p">,</span> <span class="s1">&#39;bright pass&#39;</span><span class="o">:</span> <span class="mi">92</span>
  <span class="p">,</span> <span class="s1">&#39;bright fail&#39;</span><span class="o">:</span> <span class="mi">91</span>
  <span class="p">,</span> <span class="s1">&#39;bright yellow&#39;</span><span class="o">:</span> <span class="mi">93</span>
  <span class="p">,</span> <span class="s1">&#39;pending&#39;</span><span class="o">:</span> <span class="mi">36</span>
  <span class="p">,</span> <span class="s1">&#39;suite&#39;</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">,</span> <span class="s1">&#39;error title&#39;</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">,</span> <span class="s1">&#39;error message&#39;</span><span class="o">:</span> <span class="mi">31</span>
  <span class="p">,</span> <span class="s1">&#39;error stack&#39;</span><span class="o">:</span> <span class="mi">90</span>
  <span class="p">,</span> <span class="s1">&#39;checkmark&#39;</span><span class="o">:</span> <span class="mi">32</span>
  <span class="p">,</span> <span class="s1">&#39;fast&#39;</span><span class="o">:</span> <span class="mi">90</span>
  <span class="p">,</span> <span class="s1">&#39;medium&#39;</span><span class="o">:</span> <span class="mi">33</span>
  <span class="p">,</span> <span class="s1">&#39;slow&#39;</span><span class="o">:</span> <span class="mi">31</span>
  <span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="o">:</span> <span class="mi">32</span>
  <span class="p">,</span> <span class="s1">&#39;light&#39;</span><span class="o">:</span> <span class="mi">90</span>
  <span class="p">,</span> <span class="s1">&#39;diff gutter&#39;</span><span class="o">:</span> <span class="mi">90</span>
  <span class="p">,</span> <span class="s1">&#39;diff added&#39;</span><span class="o">:</span> <span class="mi">42</span>
  <span class="p">,</span> <span class="s1">&#39;diff removed&#39;</span><span class="o">:</span> <span class="mi">41</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Color <code>str</code> with the given <code>type</code>,
allowing colors to be disabled,
as well as user-defined color
schemes.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">type</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">str</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">exports</span><span class="p">.</span><span class="nx">useColors</span><span class="p">)</span> <span class="k">return</span> <span class="nx">str</span><span class="p">;</span>
  <span class="k">return</span> <span class="s1">&#39;\033[&#39;</span> <span class="o">+</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">colors</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;m&#39;</span> <span class="o">+</span> <span class="nx">str</span> <span class="o">+</span> <span class="s1">&#39;\033[0m&#39;</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose term window size, with some
defaults for when stderr is not a tty.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nb">window</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">width</span><span class="o">:</span> <span class="nx">isatty</span>
    <span class="o">?</span> <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">getWindowSize</span>
      <span class="o">?</span> <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">getWindowSize</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
      <span class="o">:</span> <span class="nx">tty</span><span class="p">.</span><span class="nx">getWindowSize</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
    <span class="o">:</span> <span class="mi">75</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose some basic cursor interactions
that are common among reporters.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">cursor</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">hide</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\033[?25l&#39;</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">show</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\033[?25h&#39;</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">deleteLine</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\033[2K&#39;</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">beginningOfLine</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\033[0G&#39;</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">CR</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">exports</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">deleteLine</span><span class="p">();</span>
    <span class="nx">exports</span><span class="p">.</span><span class="nx">cursor</span><span class="p">.</span><span class="nx">beginningOfLine</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>A test is considered slow if it
exceeds the following value in milliseconds.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">slow</span> <span class="o">=</span> <span class="mi">75</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Outut the given <code>failures</code> as a list.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">failures</span>
      <span class="dox_type">Array</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">list</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">failures</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
  <span class="nx">failures</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84">&#182;</a>
</div>
<p>format</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">fmt</span> <span class="o">=</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;error title&#39;</span><span class="p">,</span> <span class="s1">&#39;  %s) %s:\n&#39;</span><span class="p">)</span>
      <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;error message&#39;</span><span class="p">,</span> <span class="s1">&#39;     %s&#39;</span><span class="p">)</span>
      <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;error stack&#39;</span><span class="p">,</span> <span class="s1">&#39;\n%s\n&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-85" id="section-85">&#182;</a>
</div>
<p>msg</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">err</span> <span class="o">=</span> <span class="nx">test</span><span class="p">.</span><span class="nx">err</span>
      <span class="p">,</span> <span class="nx">message</span> <span class="o">=</span> <span class="nx">err</span><span class="p">.</span><span class="nx">message</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span>
      <span class="p">,</span> <span class="nx">stack</span> <span class="o">=</span> <span class="nx">err</span><span class="p">.</span><span class="nx">stack</span> <span class="o">||</span> <span class="nx">message</span>
      <span class="p">,</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">stack</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">message</span><span class="p">)</span> <span class="o">+</span> <span class="nx">message</span><span class="p">.</span><span class="nx">length</span>
      <span class="p">,</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nx">stack</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span>
      <span class="p">,</span> <span class="nx">actual</span> <span class="o">=</span> <span class="nx">err</span><span class="p">.</span><span class="nx">actual</span>
      <span class="p">,</span> <span class="nx">expected</span> <span class="o">=</span> <span class="nx">err</span><span class="p">.</span><span class="nx">expected</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86">&#182;</a>
</div>
<p>actual / expected diff</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;string&#39;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">actual</span> <span class="o">&amp;&amp;</span> <span class="s1">&#39;string&#39;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">expected</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">len</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">actual</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">expected</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">len</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">)</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nx">errorDiff</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="s1">&#39;Chars&#39;</span><span class="p">);</span>
      <span class="k">else</span> <span class="nx">msg</span> <span class="o">=</span> <span class="nx">errorDiff</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="s1">&#39;Words&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-87" id="section-87">&#182;</a>
</div>
<p>linenos</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="kd">var</span> <span class="nx">lines</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">width</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
        <span class="nx">msg</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span>
          <span class="k">return</span> <span class="nx">pad</span><span class="p">(</span><span class="o">++</span><span class="nx">i</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; |&#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">str</span><span class="p">;</span>
        <span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">);</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88">&#182;</a>
</div>
<p>legend</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">msg</span> <span class="o">=</span> <span class="s1">&#39;\n&#39;</span>
        <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;diff removed&#39;</span><span class="p">,</span> <span class="s1">&#39;actual&#39;</span><span class="p">)</span>
        <span class="o">+</span> <span class="s1">&#39; &#39;</span>
        <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;diff added&#39;</span><span class="p">,</span> <span class="s1">&#39;expected&#39;</span><span class="p">)</span>
        <span class="o">+</span> <span class="s1">&#39;\n\n&#39;</span>
        <span class="o">+</span> <span class="nx">msg</span>
        <span class="o">+</span> <span class="s1">&#39;\n&#39;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89">&#182;</a>
</div>
<p>indent</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="nx">msg</span> <span class="o">=</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^/gm</span><span class="p">,</span> <span class="s1">&#39;      &#39;</span><span class="p">);</span>

      <span class="nx">fmt</span> <span class="o">=</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;error title&#39;</span><span class="p">,</span> <span class="s1">&#39;  %s) %s:\n%s&#39;</span><span class="p">)</span>
        <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;error stack&#39;</span><span class="p">,</span> <span class="s1">&#39;\n%s\n&#39;</span><span class="p">);</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90">&#182;</a>
</div>
<p>indent stack trace without msg</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">stack</span> <span class="o">=</span> <span class="nx">stack</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">index</span> <span class="o">?</span> <span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">index</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^/gm</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span><span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">fmt</span><span class="p">,</span> <span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">(),</span> <span class="nx">msg</span><span class="p">,</span> <span class="nx">stack</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Base</code> reporter.</p>
  </div>
  <div class="body"><p>All other reporters generally
inherit from this reporter, providing
stats such as test duration, number
of tests passed / failed etc.</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Base</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">suites</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">tests</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">passes</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">pending</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">failures</span><span class="o">:</span> <span class="mi">0</span> <span class="p">}</span>
    <span class="p">,</span> <span class="nx">failures</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">failures</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">runner</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">runner</span> <span class="o">=</span> <span class="nx">runner</span><span class="p">;</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;suite&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">suites</span> <span class="o">=</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">suites</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">suite</span><span class="p">.</span><span class="nx">root</span> <span class="o">||</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">suites</span><span class="o">++</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">tests</span> <span class="o">=</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">tests</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">tests</span><span class="o">++</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">passes</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">medium</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">slow</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">test</span><span class="p">.</span><span class="nx">speed</span> <span class="o">=</span> <span class="nx">test</span><span class="p">.</span><span class="nx">duration</span> <span class="o">&gt;</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">slow</span>
      <span class="o">?</span> <span class="s1">&#39;slow&#39;</span>
      <span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">duration</span> <span class="o">&gt;</span> <span class="nx">medium</span>
        <span class="o">?</span> <span class="s1">&#39;medium&#39;</span>
        <span class="o">:</span> <span class="s1">&#39;fast&#39;</span><span class="p">;</span>

    <span class="nx">stats</span><span class="p">.</span><span class="nx">passes</span><span class="o">++</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">){</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">failures</span> <span class="o">=</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">failures</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">failures</span><span class="o">++</span><span class="p">;</span>
    <span class="nx">test</span><span class="p">.</span><span class="nx">err</span> <span class="o">=</span> <span class="nx">err</span><span class="p">;</span>
    <span class="nx">failures</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">test</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">end</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">;</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span> <span class="o">-</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">start</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">pending</span><span class="o">++</span><span class="p">;</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Output common epilogue used by many of
the bundled reporters.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Base</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">epilogue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">fmt</span>
    <span class="p">,</span> <span class="nx">tests</span><span class="p">;</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">();</span>

  <span class="kd">function</span> <span class="nx">pluralize</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">==</span> <span class="nx">n</span> <span class="o">?</span> <span class="s1">&#39;test&#39;</span> <span class="o">:</span> <span class="s1">&#39;tests&#39;</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-93" id="section-93">&#182;</a>
</div>
<p>failure</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">failures</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fmt</span> <span class="o">=</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;bright fail&#39;</span><span class="p">,</span> <span class="s1">&#39;  ✖&#39;</span><span class="p">)</span>
      <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="s1">&#39; %d of %d %s failed&#39;</span><span class="p">)</span>
      <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;light&#39;</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">fmt</span><span class="p">,</span>
      <span class="nx">stats</span><span class="p">.</span><span class="nx">failures</span><span class="p">,</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">runner</span><span class="p">.</span><span class="nx">total</span><span class="p">,</span>
      <span class="nx">pluralize</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">runner</span><span class="p">.</span><span class="nx">total</span><span class="p">));</span>

    <span class="nx">Base</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">failures</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">();</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-94" id="section-94">&#182;</a>
</div>
<p>pass</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">fmt</span> <span class="o">=</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;bright pass&#39;</span><span class="p">,</span> <span class="s1">&#39;  ✔&#39;</span><span class="p">)</span>
    <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39; %d %s complete&#39;</span><span class="p">)</span>
    <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;light&#39;</span><span class="p">,</span> <span class="s1">&#39; (%dms)&#39;</span><span class="p">);</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fmt</span><span class="p">,</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">tests</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">pluralize</span><span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">tests</span><span class="p">),</span>
    <span class="nx">stats</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95">&#182;</a>
</div>
<p>pending</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">pending</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fmt</span> <span class="o">=</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="s1">&#39;  •&#39;</span><span class="p">)</span>
      <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="s1">&#39; %d %s pending&#39;</span><span class="p">);</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fmt</span><span class="p">,</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">pending</span><span class="p">,</span> <span class="nx">pluralize</span><span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">pending</span><span class="p">));</span>
  <span class="p">}</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">();</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Pad the given <code>str</code> to <code>len</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">str</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">len</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">pad</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">str</span> <span class="o">=</span> <span class="nb">String</span><span class="p">(</span><span class="nx">str</span><span class="p">);</span>
  <span class="k">return</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">len</span> <span class="o">-</span> <span class="nx">str</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">str</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return a character diff for <code>err</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">err</span>
      <span class="dox_type">Error</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">errorDiff</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">diff</span><span class="p">[</span><span class="s1">&#39;diff&#39;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">](</span><span class="nx">err</span><span class="p">.</span><span class="nx">actual</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">expected</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="sr">/^(\n+)$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span> <span class="nx">str</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">(</span><span class="o">++</span><span class="nb">RegExp</span><span class="p">.</span><span class="nx">$1</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&lt;newline&gt;&#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">added</span><span class="p">)</span> <span class="k">return</span> <span class="nx">colorLines</span><span class="p">(</span><span class="s1">&#39;diff added&#39;</span><span class="p">,</span> <span class="nx">str</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">removed</span><span class="p">)</span> <span class="k">return</span> <span class="nx">colorLines</span><span class="p">(</span><span class="s1">&#39;diff removed&#39;</span><span class="p">,</span> <span class="nx">str</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">str</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Color lines for <code>str</code>, using the color <code>name</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">str</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">colorLines</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">str</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">color</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">str</span><span class="p">);</span>
  <span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">});</span> <span class="c1">// module: reporters/base.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/doc.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">utils</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../utils&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Doc</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Doc</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Doc</code> reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Doc</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">total</span>
    <span class="p">,</span> <span class="nx">indents</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">indent</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">indents</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;suite&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">suite</span><span class="p">.</span><span class="nx">root</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="o">++</span><span class="nx">indents</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;%s&lt;section class=&quot;suite&quot;&gt;&#39;</span><span class="p">,</span> <span class="nx">indent</span><span class="p">());</span>
    <span class="o">++</span><span class="nx">indents</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;%s&lt;h1&gt;%s&lt;/h1&gt;&#39;</span><span class="p">,</span> <span class="nx">indent</span><span class="p">(),</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;%s&lt;dl&gt;&#39;</span><span class="p">,</span> <span class="nx">indent</span><span class="p">());</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;suite end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">suite</span><span class="p">.</span><span class="nx">root</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;%s&lt;/dl&gt;&#39;</span><span class="p">,</span> <span class="nx">indent</span><span class="p">());</span>
    <span class="o">--</span><span class="nx">indents</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;%s&lt;/section&gt;&#39;</span><span class="p">,</span> <span class="nx">indent</span><span class="p">());</span>
    <span class="o">--</span><span class="nx">indents</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;%s  &lt;dt&gt;%s&lt;/dt&gt;&#39;</span><span class="p">,</span> <span class="nx">indent</span><span class="p">(),</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">code</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">escape</span><span class="p">(</span><span class="nx">clean</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">toString</span><span class="p">()));</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;%s  &lt;dd&gt;&lt;pre&gt;&lt;code&gt;%s&lt;/code&gt;&lt;/pre&gt;&lt;/dd&gt;&#39;</span><span class="p">,</span> <span class="nx">indent</span><span class="p">(),</span> <span class="nx">code</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Strip the function definition from <code>str</code>,
and re-indent for pre whitespace.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">str</span> <span class="o">=</span> <span class="nx">str</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^function *\(.*\) *{/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s+\}$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">spaces</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^\n?( *)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span>
    <span class="p">,</span> <span class="nx">re</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;^ {&#39;</span> <span class="o">+</span> <span class="nx">spaces</span> <span class="o">+</span> <span class="s1">&#39;}&#39;</span><span class="p">,</span> <span class="s1">&#39;gm&#39;</span><span class="p">);</span>

  <span class="nx">str</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">re</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">str</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">});</span> <span class="c1">// module: reporters/doc.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/dot.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-104" id="section-104">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Dot</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Dot</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-105" id="section-105">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Dot</code> matrix test reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Dot</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nb">window</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="p">.</span><span class="mi">75</span> <span class="o">|</span> <span class="mi">0</span>
    <span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\n  &#39;</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">));</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">++</span><span class="nx">n</span> <span class="o">%</span> <span class="nx">width</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\n  &#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;slow&#39;</span> <span class="o">==</span> <span class="nx">test</span><span class="p">.</span><span class="nx">speed</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="s1">&#39;bright yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">));</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">speed</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">++</span><span class="nx">n</span> <span class="o">%</span> <span class="nx">width</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\n  &#39;</span><span class="p">);</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">));</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">();</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">epilogue</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-106" id="section-106">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>Base.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Dot</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Base</span><span class="p">;</span>
<span class="nx">Dot</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Dot</span><span class="p">;</span>

<span class="p">});</span> <span class="c1">// module: reporters/dot.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/html-cov.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-107" id="section-107">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">JSONCov</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./json-cov&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/fs&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-108" id="section-108">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>HTMLCov</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">HTMLCov</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-109" id="section-109">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>JsCoverage</code> reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">HTMLCov</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">jade</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jade&#39;</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">&#39;/templates/coverage.jade&#39;</span>
    <span class="p">,</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">jade</span><span class="p">.</span><span class="nx">compile</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="p">{</span> <span class="nx">filename</span><span class="o">:</span> <span class="nx">file</span> <span class="p">})</span>
    <span class="p">,</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="nx">JSONCov</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">fn</span><span class="p">({</span>
        <span class="nx">cov</span><span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">cov</span>
      <span class="p">,</span> <span class="nx">coverageClass</span><span class="o">:</span> <span class="nx">coverageClass</span>
    <span class="p">}));</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">coverageClass</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;=</span> <span class="mi">75</span><span class="p">)</span> <span class="k">return</span> <span class="s1">&#39;high&#39;</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;=</span> <span class="mi">50</span><span class="p">)</span> <span class="k">return</span> <span class="s1">&#39;medium&#39;</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;=</span> <span class="mi">25</span><span class="p">)</span> <span class="k">return</span> <span class="s1">&#39;low&#39;</span><span class="p">;</span>
  <span class="k">return</span> <span class="s1">&#39;terrible&#39;</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">});</span> <span class="c1">// module: reporters/html-cov.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/html.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-110" id="section-110">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">utils</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../utils&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">Progress</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../browser/progress&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">escape</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">escape</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-111" id="section-111">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Save timer references to avoid Sinon interfering (see GH-237).</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nb">Date</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nb">Date</span>
  <span class="p">,</span> <span class="nx">setTimeout</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">setTimeout</span>
  <span class="p">,</span> <span class="nx">setInterval</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">setInterval</span>
  <span class="p">,</span> <span class="nx">clearTimeout</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">clearTimeout</span>
  <span class="p">,</span> <span class="nx">clearInterval</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-112" id="section-112">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Doc</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">HTML</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-113" id="section-113">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Stats template.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">statsTemplate</span> <span class="o">=</span> <span class="s1">&#39;&lt;ul id=&quot;stats&quot;&gt;&#39;</span>
  <span class="o">+</span> <span class="s1">&#39;&lt;li class=&quot;progress&quot;&gt;&lt;canvas width=&quot;40&quot; height=&quot;40&quot;&gt;&lt;/canvas&gt;&lt;/li&gt;&#39;</span>
  <span class="o">+</span> <span class="s1">&#39;&lt;li class=&quot;passes&quot;&gt;passes: &lt;em&gt;0&lt;/em&gt;&lt;/li&gt;&#39;</span>
  <span class="o">+</span> <span class="s1">&#39;&lt;li class=&quot;failures&quot;&gt;failures: &lt;em&gt;0&lt;/em&gt;&lt;/li&gt;&#39;</span>
  <span class="o">+</span> <span class="s1">&#39;&lt;li class=&quot;duration&quot;&gt;duration: &lt;em&gt;0&lt;/em&gt;s&lt;/li&gt;&#39;</span>
  <span class="o">+</span> <span class="s1">&#39;&lt;/ul&gt;&#39;</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-114" id="section-114">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Doc</code> reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">HTML</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">total</span>
    <span class="p">,</span> <span class="nx">root</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;mocha&#39;</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">stat</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">(</span><span class="nx">statsTemplate</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">items</span> <span class="o">=</span> <span class="nx">stat</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;li&#39;</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">passes</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;em&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">,</span> <span class="nx">failures</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;em&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">,</span> <span class="nx">duration</span> <span class="o">=</span> <span class="nx">items</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;em&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">,</span> <span class="nx">canvas</span> <span class="o">=</span> <span class="nx">stat</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;canvas&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">,</span> <span class="nx">stack</span> <span class="o">=</span> <span class="p">[</span><span class="nx">root</span><span class="p">]</span>
    <span class="p">,</span> <span class="nx">progress</span>
    <span class="p">,</span> <span class="nx">ctx</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ctx</span> <span class="o">=</span> <span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;2d&#39;</span><span class="p">);</span>
    <span class="nx">progress</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Progress</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">root</span><span class="p">)</span> <span class="k">return</span> <span class="nx">error</span><span class="p">(</span><span class="s1">&#39;#mocha div missing, add it to your document&#39;</span><span class="p">);</span>

  <span class="nx">root</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">stat</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">progress</span><span class="p">)</span> <span class="nx">progress</span><span class="p">.</span><span class="nx">size</span><span class="p">(</span><span class="mi">40</span><span class="p">);</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;suite&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">suite</span><span class="p">.</span><span class="nx">root</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-115" id="section-115">&#182;</a>
</div>
<p>suite</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;suite&quot;&gt;&lt;h1&gt;%s&lt;/h1&gt;&lt;/div&gt;&#39;</span><span class="p">,</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-116" id="section-116">&#182;</a>
</div>
<p>container</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">stack</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
    <span class="nx">stack</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">));</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">stack</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;suite end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">suite</span><span class="p">.</span><span class="nx">root</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="nx">stack</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;hook&#39;</span> <span class="o">==</span> <span class="nx">test</span><span class="p">.</span><span class="nx">type</span> <span class="o">||</span> <span class="nx">err</span><span class="p">.</span><span class="nx">uncaught</span><span class="p">)</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="nx">test</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-117" id="section-117">&#182;</a>
</div>
<p>TODO: add to stats</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">percent</span> <span class="o">=</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">tests</span> <span class="o">/</span> <span class="nx">total</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">|</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">progress</span><span class="p">)</span> <span class="nx">progress</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">percent</span><span class="p">).</span><span class="nx">draw</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-118" id="section-118">&#182;</a>
</div>
<p>update stats</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">ms</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span> <span class="o">-</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">start</span><span class="p">;</span>
    <span class="nx">text</span><span class="p">(</span><span class="nx">passes</span><span class="p">,</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">passes</span><span class="p">);</span>
    <span class="nx">text</span><span class="p">(</span><span class="nx">failures</span><span class="p">,</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">failures</span><span class="p">);</span>
    <span class="nx">text</span><span class="p">(</span><span class="nx">duration</span><span class="p">,</span> <span class="p">(</span><span class="nx">ms</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-119" id="section-119">&#182;</a>
</div>
<p>test</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;passed&#39;</span> <span class="o">==</span> <span class="nx">test</span><span class="p">.</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;test pass %e&quot;&gt;&lt;h2&gt;%e&lt;span class=&quot;duration&quot;&gt;%ems&lt;/span&gt;&lt;/h2&gt;&lt;/div&gt;&#39;</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">speed</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">pending</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;test pass pending&quot;&gt;&lt;h2&gt;%e&lt;/h2&gt;&lt;/div&gt;&#39;</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">(</span><span class="s1">&#39;&lt;div class=&quot;test fail&quot;&gt;&lt;h2&gt;%e&lt;/h2&gt;&lt;/div&gt;&#39;</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">test</span><span class="p">.</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span> <span class="o">||</span> <span class="nx">test</span><span class="p">.</span><span class="nx">err</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-120" id="section-120">&#182;</a>
</div>
<p>FF / Opera do not add the message</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span><span class="o">!~</span><span class="nx">str</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">str</span> <span class="o">=</span> <span class="nx">test</span><span class="p">.</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span> <span class="o">+</span> <span class="nx">str</span><span class="p">;</span>
      <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-121" id="section-121">&#182;</a>
</div>
<p>&lt;=IE7 stringifies to [Object Error]. Since it can be overloaded, we
check for the result of the stringifying.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;[object Error]&#39;</span> <span class="o">==</span> <span class="nx">str</span><span class="p">)</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">test</span><span class="p">.</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-122" id="section-122">&#182;</a>
</div>
<p>Safari doesn't give you a stack. Let's at least provide a source line.</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">test</span><span class="p">.</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span> <span class="o">&amp;&amp;</span> <span class="nx">test</span><span class="p">.</span><span class="nx">err</span><span class="p">.</span><span class="nx">sourceURL</span> <span class="o">&amp;&amp;</span> <span class="nx">test</span><span class="p">.</span><span class="nx">err</span><span class="p">.</span><span class="nx">line</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">str</span> <span class="o">+=</span> <span class="s2">&quot;\n(&quot;</span> <span class="o">+</span> <span class="nx">test</span><span class="p">.</span><span class="nx">err</span><span class="p">.</span><span class="nx">sourceURL</span> <span class="o">+</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="nx">test</span><span class="p">.</span><span class="nx">err</span><span class="p">.</span><span class="nx">line</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
      <span class="p">}</span>

      <span class="nx">el</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">fragment</span><span class="p">(</span><span class="s1">&#39;&lt;pre class=&quot;error&quot;&gt;%e&lt;/pre&gt;&#39;</span><span class="p">,</span> <span class="nx">str</span><span class="p">));</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-123" id="section-123">&#182;</a>
</div>
<p>toggle code</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">h2</span> <span class="o">=</span> <span class="nx">el</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;h2&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>

    <span class="nx">on</span><span class="p">(</span><span class="nx">h2</span><span class="p">,</span> <span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">pre</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span> <span class="o">==</span> <span class="nx">pre</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span>
        <span class="o">?</span> <span class="s1">&#39;block&#39;</span>
        <span class="o">:</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>
    <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-124" id="section-124">&#182;</a>
</div>
<p>code
TODO: defer</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">test</span><span class="p">.</span><span class="nx">pending</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">pre</span> <span class="o">=</span> <span class="nx">fragment</span><span class="p">(</span><span class="s1">&#39;&lt;pre&gt;&lt;code&gt;%e&lt;/code&gt;&lt;/pre&gt;&#39;</span><span class="p">,</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">toString</span><span class="p">()));</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">pre</span><span class="p">);</span>
      <span class="nx">pre</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">stack</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-125" id="section-125">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Display error <code>msg</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">error</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">fragment</span><span class="p">(</span><span class="s1">&#39;&lt;div id=&quot;error&quot;&gt;%s&lt;/div&gt;&#39;</span><span class="p">,</span> <span class="nx">msg</span><span class="p">));</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-126" id="section-126">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return a DOM fragment from <code>html</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">fragment</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">arguments</span>
    <span class="p">,</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;div&#39;</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

  <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">html</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/%([se])/g</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">,</span> <span class="nx">type</span><span class="p">){</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="s1">&#39;s&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="nb">String</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">]);</span>
      <span class="k">case</span> <span class="s1">&#39;e&#39;</span><span class="o">:</span> <span class="k">return</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="nx">div</span><span class="p">.</span><span class="nx">firstChild</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-127" id="section-127">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set <code>el</code> text to <code>str</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">text</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">textContent</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">str</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">=</span> <span class="nx">str</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-128" id="section-128">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Listen on <code>event</code> with callback <code>fn</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">on</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span><span class="s1">&#39;on&#39;</span> <span class="o">+</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-129" id="section-129">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Strip the function definition from <code>str</code>,
and re-indent for pre whitespace.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">str</span> <span class="o">=</span> <span class="nx">str</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^function *\(.*\) *{/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s+\}$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">spaces</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^\n?( *)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span>
    <span class="p">,</span> <span class="nx">re</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;^ {&#39;</span> <span class="o">+</span> <span class="nx">spaces</span> <span class="o">+</span> <span class="s1">&#39;}&#39;</span><span class="p">,</span> <span class="s1">&#39;gm&#39;</span><span class="p">);</span>

  <span class="nx">str</span> <span class="o">=</span> <span class="nx">str</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">re</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^\s+/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">str</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">});</span> <span class="c1">// module: reporters/html.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/index.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Dot</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./dot&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Doc</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./doc&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">TAP</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./tap&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">JSON</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./json&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">HTML</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./html&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">List</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./list&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Min</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./min&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Spec</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./spec&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Progress</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./progress&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Landing</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./landing&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">JSONCov</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./json-cov&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">HTMLCov</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./html-cov&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">JSONStream</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./json-stream&#39;</span><span class="p">);</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">XUnit</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./xunit&#39;</span><span class="p">)</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">Teamcity</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./teamcity&#39;</span><span class="p">)</span>

<span class="p">});</span> <span class="c1">// module: reporters/index.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/json-cov.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-130" id="section-130">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-131" id="section-131">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>JSONCov</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">JSONCov</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-132" id="section-132">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>JsCoverage</code> reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">output</span>
      <span class="dox_type">Boolean</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">JSONCov</span><span class="p">(</span><span class="nx">runner</span><span class="p">,</span> <span class="nx">output</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">output</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">==</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="kc">true</span> <span class="o">:</span> <span class="nx">output</span><span class="p">;</span>

  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">tests</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">,</span> <span class="nx">failures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">,</span> <span class="nx">passes</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">tests</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">test</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">passes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">test</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">failures</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">test</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">cov</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">_$jscoverage</span> <span class="o">||</span> <span class="p">{};</span>
    <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">cov</span> <span class="o">=</span> <span class="nx">map</span><span class="p">(</span><span class="nx">cov</span><span class="p">);</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">stats</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">stats</span><span class="p">;</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">tests</span> <span class="o">=</span> <span class="nx">tests</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">clean</span><span class="p">);</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">failures</span> <span class="o">=</span> <span class="nx">failures</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">clean</span><span class="p">);</span>
    <span class="nx">result</span><span class="p">.</span><span class="nx">passes</span> <span class="o">=</span> <span class="nx">passes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">clean</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">output</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">result</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span> <span class="p">));</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-133" id="section-133">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Map jscoverage data to a JSON structure
suitable for reporting.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">cov</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">map</span><span class="p">(</span><span class="nx">cov</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">instrumentation</span><span class="o">:</span> <span class="s1">&#39;node-jscoverage&#39;</span>
    <span class="p">,</span> <span class="nx">sloc</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">,</span> <span class="nx">hits</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">,</span> <span class="nx">misses</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">,</span> <span class="nx">coverage</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">,</span> <span class="nx">files</span><span class="o">:</span> <span class="p">[]</span>
  <span class="p">};</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">filename</span> <span class="k">in</span> <span class="nx">cov</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">coverage</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">cov</span><span class="p">[</span><span class="nx">filename</span><span class="p">]);</span>
    <span class="nx">ret</span><span class="p">.</span><span class="nx">files</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="nx">ret</span><span class="p">.</span><span class="nx">hits</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">hits</span><span class="p">;</span>
    <span class="nx">ret</span><span class="p">.</span><span class="nx">misses</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">misses</span><span class="p">;</span>
    <span class="nx">ret</span><span class="p">.</span><span class="nx">sloc</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">sloc</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">ret</span><span class="p">.</span><span class="nx">sloc</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ret</span><span class="p">.</span><span class="nx">coverage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ret</span><span class="p">.</span><span class="nx">hits</span> <span class="o">/</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">sloc</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-134" id="section-134">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Map jscoverage data for a single source file
to a JSON structure suitable for reporting.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">filename</span>
      <span class="dox_type">String</span>
      <span>name of the source file</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">data</span>
      <span class="dox_type">Object</span>
      <span>jscoverage coverage data</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">coverage</span><span class="p">(</span><span class="nx">filename</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">filename</span><span class="o">:</span> <span class="nx">filename</span><span class="p">,</span>
    <span class="nx">coverage</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">hits</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">misses</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">sloc</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">source</span><span class="o">:</span> <span class="p">{}</span>
  <span class="p">};</span>

  <span class="nx">data</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">line</span><span class="p">,</span> <span class="nx">num</span><span class="p">){</span>
    <span class="nx">num</span><span class="o">++</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">num</span><span class="p">]</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">misses</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">sloc</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">num</span><span class="p">]</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">hits</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">sloc</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">ret</span><span class="p">.</span><span class="nx">source</span><span class="p">[</span><span class="nx">num</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">source</span><span class="o">:</span> <span class="nx">line</span>
      <span class="p">,</span> <span class="nx">coverage</span><span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">num</span><span class="p">]</span> <span class="o">===</span> <span class="kc">undefined</span>
        <span class="o">?</span> <span class="s1">&#39;&#39;</span>
        <span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">num</span><span class="p">]</span>
    <span class="p">};</span>
  <span class="p">});</span>

  <span class="nx">ret</span><span class="p">.</span><span class="nx">coverage</span> <span class="o">=</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">hits</span> <span class="o">/</span> <span class="nx">ret</span><span class="p">.</span><span class="nx">sloc</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-135" id="section-135">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return a plain-object representation of <code>test</code>
free of cyclic properties etc.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">test</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
      <span class="nx">title</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span>
    <span class="p">,</span> <span class="nx">fullTitle</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">()</span>
    <span class="p">,</span> <span class="nx">duration</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">duration</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="p">});</span> <span class="c1">// module: reporters/json-cov.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/json-stream.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-136" id="section-136">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-137" id="section-137">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>List</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">List</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-138" id="section-138">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>List</code> test reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">List</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">total</span><span class="p">;</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">([</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">total</span><span class="o">:</span> <span class="nx">total</span> <span class="p">}]));</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">([</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">test</span><span class="p">)]));</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">([</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">test</span><span class="p">)]));</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">([</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">stats</span><span class="p">]));</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-139" id="section-139">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return a plain-object representation of <code>test</code>
free of cyclic properties etc.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">test</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
      <span class="nx">title</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span>
    <span class="p">,</span> <span class="nx">fullTitle</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">()</span>
    <span class="p">,</span> <span class="nx">duration</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">duration</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">});</span> <span class="c1">// module: reporters/json-stream.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/json.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-140" id="section-140">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">cursor</span>
  <span class="p">,</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-141" id="section-141">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>JSON</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">JSONReporter</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-142" id="section-142">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>JSON</code> reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">JSONReporter</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">tests</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">,</span> <span class="nx">failures</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">,</span> <span class="nx">passes</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">tests</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">test</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">passes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">test</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">failures</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">test</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">stats</span><span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">stats</span>
      <span class="p">,</span> <span class="nx">tests</span><span class="o">:</span> <span class="nx">tests</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">clean</span><span class="p">)</span>
      <span class="p">,</span> <span class="nx">failures</span><span class="o">:</span> <span class="nx">failures</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">clean</span><span class="p">)</span>
      <span class="p">,</span> <span class="nx">passes</span><span class="o">:</span> <span class="nx">passes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">clean</span><span class="p">)</span>
    <span class="p">};</span>

    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">));</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-143" id="section-143">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return a plain-object representation of <code>test</code>
free of cyclic properties etc.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">test</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
      <span class="nx">title</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span>
    <span class="p">,</span> <span class="nx">fullTitle</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">()</span>
    <span class="p">,</span> <span class="nx">duration</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">duration</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="p">});</span> <span class="c1">// module: reporters/json.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/landing.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-144" id="section-144">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">cursor</span>
  <span class="p">,</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-145" id="section-145">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Landing</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Landing</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-146" id="section-146">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Airplane color.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Base</span><span class="p">.</span><span class="nx">colors</span><span class="p">.</span><span class="nx">plane</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-147" id="section-147">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Airplane crash color.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Base</span><span class="p">.</span><span class="nx">colors</span><span class="p">[</span><span class="s1">&#39;plane crash&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">31</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-148" id="section-148">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Runway color.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Base</span><span class="p">.</span><span class="nx">colors</span><span class="p">.</span><span class="nx">runway</span> <span class="o">=</span> <span class="mi">90</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-149" id="section-149">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Landing</code> reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Landing</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nb">window</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="p">.</span><span class="mi">75</span> <span class="o">|</span> <span class="mi">0</span>
    <span class="p">,</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">total</span>
    <span class="p">,</span> <span class="nx">stream</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span>
    <span class="p">,</span> <span class="nx">plane</span> <span class="o">=</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;plane&#39;</span><span class="p">,</span> <span class="s1">&#39;✈&#39;</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">crashed</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">runway</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">buf</span> <span class="o">=</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">width</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">);</span>
    <span class="k">return</span> <span class="s1">&#39;  &#39;</span> <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;runway&#39;</span><span class="p">,</span> <span class="nx">buf</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">stream</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\n  &#39;</span><span class="p">);</span>
    <span class="nx">cursor</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-150" id="section-150">&#182;</a>
</div>
<p>check if the plane crashed</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="kd">var</span> <span class="nx">col</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">==</span> <span class="nx">crashed</span>
      <span class="o">?</span> <span class="nx">width</span> <span class="o">*</span> <span class="o">++</span><span class="nx">n</span> <span class="o">/</span> <span class="nx">total</span> <span class="o">|</span> <span class="mi">0</span>
      <span class="o">:</span> <span class="nx">crashed</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-151" id="section-151">&#182;</a>
</div>
<p>show the crash</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;failed&#39;</span> <span class="o">==</span> <span class="nx">test</span><span class="p">.</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">plane</span> <span class="o">=</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;plane crash&#39;</span><span class="p">,</span> <span class="s1">&#39;✈&#39;</span><span class="p">);</span>
      <span class="nx">crashed</span> <span class="o">=</span> <span class="nx">col</span><span class="p">;</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-152" id="section-152">&#182;</a>
</div>
<p>render landing strip</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">stream</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\033[4F\n\n&#39;</span><span class="p">);</span>
    <span class="nx">stream</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">runway</span><span class="p">());</span>
    <span class="nx">stream</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\n  &#39;</span><span class="p">);</span>
    <span class="nx">stream</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="s1">&#39;runway&#39;</span><span class="p">,</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">col</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;⋅&#39;</span><span class="p">)));</span>
    <span class="nx">stream</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">plane</span><span class="p">)</span>
    <span class="nx">stream</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="s1">&#39;runway&#39;</span><span class="p">,</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">col</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;⋅&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span><span class="p">));</span>
    <span class="nx">stream</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">runway</span><span class="p">());</span>
    <span class="nx">stream</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\033[0m&#39;</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">cursor</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">();</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">epilogue</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-153" id="section-153">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>Base.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Landing</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Base</span><span class="p">;</span>
<span class="nx">Landing</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Landing</span><span class="p">;</span>

<span class="p">});</span> <span class="c1">// module: reporters/landing.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/list.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-154" id="section-154">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">cursor</span>
  <span class="p">,</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-155" id="section-155">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>List</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">List</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-156" id="section-156">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>List</code> test reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">List</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="s1">&#39;    &#39;</span> <span class="o">+</span> <span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span><span class="p">));</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">fmt</span> <span class="o">=</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;checkmark&#39;</span><span class="p">,</span> <span class="s1">&#39;  -&#39;</span><span class="p">)</span>
      <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="s1">&#39; %s&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fmt</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">());</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">fmt</span> <span class="o">=</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;checkmark&#39;</span><span class="p">,</span> <span class="s1">&#39;  ✓&#39;</span><span class="p">)</span>
      <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="s1">&#39; %s: &#39;</span><span class="p">)</span>
      <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">speed</span><span class="p">,</span> <span class="s1">&#39;%dms&#39;</span><span class="p">);</span>
    <span class="nx">cursor</span><span class="p">.</span><span class="nx">CR</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fmt</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">(),</span> <span class="nx">test</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">){</span>
    <span class="nx">cursor</span><span class="p">.</span><span class="nx">CR</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="s1">&#39;  %d) %s&#39;</span><span class="p">),</span> <span class="o">++</span><span class="nx">n</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">());</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">epilogue</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">self</span><span class="p">));</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-157" id="section-157">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>Base.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">List</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Base</span><span class="p">;</span>
<span class="nx">List</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">List</span><span class="p">;</span>


<span class="p">});</span> <span class="c1">// module: reporters/list.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/markdown.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-158" id="section-158">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">utils</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../utils&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-159" id="section-159">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Markdown</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Markdown</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-160" id="section-160">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Markdown</code> reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Markdown</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">total</span>
    <span class="p">,</span> <span class="nx">level</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="p">,</span> <span class="nx">buf</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">title</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">level</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">str</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">indent</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">level</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">mapTOC</span><span class="p">(</span><span class="nx">suite</span><span class="p">,</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">;</span>
    <span class="nx">obj</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">suite</span><span class="p">.</span><span class="nx">title</span><span class="p">]</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">suite</span><span class="p">.</span><span class="nx">title</span><span class="p">]</span> <span class="o">||</span> <span class="p">{</span> <span class="nx">suite</span><span class="o">:</span> <span class="nx">suite</span> <span class="p">};</span>
    <span class="nx">suite</span><span class="p">.</span><span class="nx">suites</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
      <span class="nx">mapTOC</span><span class="p">(</span><span class="nx">suite</span><span class="p">,</span> <span class="nx">obj</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">stringifyTOC</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">level</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">++</span><span class="nx">level</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">buf</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">link</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;suite&#39;</span> <span class="o">==</span> <span class="nx">key</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="nx">link</span> <span class="o">=</span> <span class="s1">&#39; - [&#39;</span> <span class="o">+</span> <span class="nx">key</span> <span class="o">+</span> <span class="s1">&#39;](#&#39;</span> <span class="o">+</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">slug</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">suite</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">())</span> <span class="o">+</span> <span class="s1">&#39;)\n&#39;</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="nx">buf</span> <span class="o">+=</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">level</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">link</span><span class="p">;</span>
      <span class="nx">buf</span> <span class="o">+=</span> <span class="nx">stringifyTOC</span><span class="p">(</span><span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span> <span class="nx">level</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="o">--</span><span class="nx">level</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">buf</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">generateTOC</span><span class="p">(</span><span class="nx">suite</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">mapTOC</span><span class="p">(</span><span class="nx">suite</span><span class="p">,</span> <span class="p">{});</span>
    <span class="k">return</span> <span class="nx">stringifyTOC</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">generateTOC</span><span class="p">(</span><span class="nx">runner</span><span class="p">.</span><span class="nx">suite</span><span class="p">);</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;suite&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
    <span class="o">++</span><span class="nx">level</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">slug</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">slug</span><span class="p">(</span><span class="nx">suite</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">());</span>
    <span class="nx">buf</span> <span class="o">+=</span> <span class="s1">&#39;&lt;a name=&quot;&#39;</span> <span class="o">+</span> <span class="nx">slug</span> <span class="o">+</span> <span class="s1">&#39;&quot; /&gt;&#39;</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span><span class="p">;</span>
    <span class="nx">buf</span> <span class="o">+=</span> <span class="nx">title</span><span class="p">(</span><span class="nx">suite</span><span class="p">.</span><span class="nx">title</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;suite end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
    <span class="o">--</span><span class="nx">level</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">code</span> <span class="o">=</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
    <span class="nx">buf</span> <span class="o">+=</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span> <span class="o">+</span> <span class="s1">&#39;.\n&#39;</span><span class="p">;</span>
    <span class="nx">buf</span> <span class="o">+=</span> <span class="s1">&#39;\n```js&#39;</span><span class="p">;</span>
    <span class="nx">buf</span> <span class="o">+=</span> <span class="nx">code</span> <span class="o">+</span> <span class="s1">&#39;\n&#39;</span><span class="p">;</span>
    <span class="nx">buf</span> <span class="o">+=</span> <span class="s1">&#39;```\n\n&#39;</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;# TOC\n&#39;</span><span class="p">);</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">generateTOC</span><span class="p">(</span><span class="nx">runner</span><span class="p">.</span><span class="nx">suite</span><span class="p">));</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">buf</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-161" id="section-161">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Strip the function definition from <code>str</code>,
and re-indent for pre whitespace.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">clean</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">str</span> <span class="o">=</span> <span class="nx">str</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^function *\(.*\) *{/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s+\}$/</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">spaces</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^\n?( *)/</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="nx">length</span>
    <span class="p">,</span> <span class="nx">re</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;^ {&#39;</span> <span class="o">+</span> <span class="nx">spaces</span> <span class="o">+</span> <span class="s1">&#39;}&#39;</span><span class="p">,</span> <span class="s1">&#39;gm&#39;</span><span class="p">);</span>

  <span class="nx">str</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">re</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>

  <span class="k">return</span> <span class="nx">str</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">});</span> <span class="c1">// module: reporters/markdown.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/min.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-162" id="section-162">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-163" id="section-163">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Min</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Min</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-164" id="section-164">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Min</code> minimal test reporter (best used with --watch).</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Min</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>
  
  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-165" id="section-165">&#182;</a>
</div>
<p>clear screen</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\033[2J&#39;</span><span class="p">);</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-166" id="section-166">&#182;</a>
</div>
<p>set cursor position</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\033[1;3H&#39;</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">epilogue</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">));</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-167" id="section-167">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>Base.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Min</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Base</span><span class="p">;</span>
<span class="nx">Min</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Min</span><span class="p">;</span>

<span class="p">});</span> <span class="c1">// module: reporters/min.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/progress.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-168" id="section-168">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">cursor</span>
  <span class="p">,</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-169" id="section-169">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Progress</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Progress</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-170" id="section-170">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>General progress bar color.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Base</span><span class="p">.</span><span class="nx">colors</span><span class="p">.</span><span class="nx">progress</span> <span class="o">=</span> <span class="mi">90</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-171" id="section-171">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Progress</code> bar test reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">options</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Progress</span><span class="p">(</span><span class="nx">runner</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">options</span> <span class="o">||</span> <span class="p">{}</span>
    <span class="p">,</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">width</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nb">window</span><span class="p">.</span><span class="nx">width</span> <span class="o">*</span> <span class="p">.</span><span class="mi">50</span> <span class="o">|</span> <span class="mi">0</span>
    <span class="p">,</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">total</span>
    <span class="p">,</span> <span class="nx">complete</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="p">,</span> <span class="nx">max</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-172" id="section-172">&#182;</a>
</div>
<p>default chars</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">options</span><span class="p">.</span><span class="nx">open</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">open</span> <span class="o">||</span> <span class="s1">&#39;[&#39;</span><span class="p">;</span>
  <span class="nx">options</span><span class="p">.</span><span class="nx">complete</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">complete</span> <span class="o">||</span> <span class="s1">&#39;▬&#39;</span><span class="p">;</span>
  <span class="nx">options</span><span class="p">.</span><span class="nx">incomplete</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">incomplete</span> <span class="o">||</span> <span class="s1">&#39;⋅&#39;</span><span class="p">;</span>
  <span class="nx">options</span><span class="p">.</span><span class="nx">close</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">close</span> <span class="o">||</span> <span class="s1">&#39;]&#39;</span><span class="p">;</span>
  <span class="nx">options</span><span class="p">.</span><span class="nx">verbose</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-173" id="section-173">&#182;</a>
</div>
<p>tests started</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">();</span>
    <span class="nx">cursor</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
  <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-174" id="section-174">&#182;</a>
</div>
<p>tests complete</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">complete</span><span class="o">++</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">incomplete</span> <span class="o">=</span> <span class="nx">total</span> <span class="o">-</span> <span class="nx">complete</span>
      <span class="p">,</span> <span class="nx">percent</span> <span class="o">=</span> <span class="nx">complete</span> <span class="o">/</span> <span class="nx">total</span>
      <span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">*</span> <span class="nx">percent</span> <span class="o">|</span> <span class="mi">0</span>
      <span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">-</span> <span class="nx">n</span><span class="p">;</span>

    <span class="nx">cursor</span><span class="p">.</span><span class="nx">CR</span><span class="p">();</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s1">&#39;\033[J&#39;</span><span class="p">);</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="s1">&#39;progress&#39;</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span> <span class="o">+</span> <span class="nx">options</span><span class="p">.</span><span class="nx">open</span><span class="p">));</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="nx">n</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">complete</span><span class="p">));</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nb">Array</span><span class="p">(</span><span class="nx">i</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">incomplete</span><span class="p">));</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="s1">&#39;progress&#39;</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">close</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">verbose</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="s1">&#39;progress&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">complete</span> <span class="o">+</span> <span class="s1">&#39; of &#39;</span> <span class="o">+</span> <span class="nx">total</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-175" id="section-175">&#182;</a>
</div>
<p>tests are complete, output some stats
and the failures if any</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">cursor</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">();</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">epilogue</span><span class="p">();</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-176" id="section-176">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>Base.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Progress</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Base</span><span class="p">;</span>
<span class="nx">Progress</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Progress</span><span class="p">;</span>


<span class="p">});</span> <span class="c1">// module: reporters/progress.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/spec.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-177" id="section-177">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">cursor</span>
  <span class="p">,</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-178" id="section-178">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Spec</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Spec</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-179" id="section-179">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Spec</code> test reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Spec</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">indents</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">indent</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">indents</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;suite&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
    <span class="o">++</span><span class="nx">indents</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">color</span><span class="p">(</span><span class="s1">&#39;suite&#39;</span><span class="p">,</span> <span class="s1">&#39;%s%s&#39;</span><span class="p">),</span> <span class="nx">indent</span><span class="p">(),</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;suite end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
    <span class="o">--</span><span class="nx">indents</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="mi">1</span> <span class="o">==</span> <span class="nx">indents</span><span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">indent</span><span class="p">()</span> <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="s1">&#39;  ◦ &#39;</span> <span class="o">+</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span><span class="p">));</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">fmt</span> <span class="o">=</span> <span class="nx">indent</span><span class="p">()</span> <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="s1">&#39;  - %s&#39;</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fmt</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;fast&#39;</span> <span class="o">==</span> <span class="nx">test</span><span class="p">.</span><span class="nx">speed</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">fmt</span> <span class="o">=</span> <span class="nx">indent</span><span class="p">()</span>
        <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;checkmark&#39;</span><span class="p">,</span> <span class="s1">&#39;  ✓&#39;</span><span class="p">)</span>
        <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="s1">&#39; %s &#39;</span><span class="p">);</span>
      <span class="nx">cursor</span><span class="p">.</span><span class="nx">CR</span><span class="p">();</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fmt</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">fmt</span> <span class="o">=</span> <span class="nx">indent</span><span class="p">()</span>
        <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;checkmark&#39;</span><span class="p">,</span> <span class="s1">&#39;  ✓&#39;</span><span class="p">)</span>
        <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="s1">&#39; %s &#39;</span><span class="p">)</span>
        <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">speed</span><span class="p">,</span> <span class="s1">&#39;(%dms)&#39;</span><span class="p">);</span>
      <span class="nx">cursor</span><span class="p">.</span><span class="nx">CR</span><span class="p">();</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fmt</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">duration</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">){</span>
    <span class="nx">cursor</span><span class="p">.</span><span class="nx">CR</span><span class="p">();</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">indent</span><span class="p">()</span> <span class="o">+</span> <span class="nx">color</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="s1">&#39;  %d) %s&#39;</span><span class="p">),</span> <span class="o">++</span><span class="nx">n</span><span class="p">,</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">epilogue</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">self</span><span class="p">));</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-180" id="section-180">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>Base.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Base</span><span class="p">;</span>
<span class="nx">Spec</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Spec</span><span class="p">;</span>


<span class="p">});</span> <span class="c1">// module: reporters/spec.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/tap.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-181" id="section-181">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">cursor</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">cursor</span>
  <span class="p">,</span> <span class="nx">color</span> <span class="o">=</span> <span class="nx">Base</span><span class="p">.</span><span class="nx">color</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-182" id="section-182">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>TAP</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">TAP</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-183" id="section-183">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>TAP</code> reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">TAP</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">total</span> <span class="o">=</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">total</span>
    <span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;%d..%d&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">total</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="o">++</span><span class="nx">n</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ok %d %s # SKIP -&#39;</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">title</span><span class="p">(</span><span class="nx">test</span><span class="p">));</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;ok %d %s&#39;</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">title</span><span class="p">(</span><span class="nx">test</span><span class="p">));</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;not ok %d %s&#39;</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">title</span><span class="p">(</span><span class="nx">test</span><span class="p">));</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/^/gm</span><span class="p">,</span> <span class="s1">&#39;  &#39;</span><span class="p">));</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-184" id="section-184">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return a TAP-safe title of <code>test</code></p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">test</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">title</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/#/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">});</span> <span class="c1">// module: reporters/tap.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/teamcity.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-185" id="section-185">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-186" id="section-186">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Teamcity</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Teamcity</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-187" id="section-187">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Teamcity</code> reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Teamcity</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span><span class="p">;</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;##teamcity[testSuiteStarted name=&#39;mocha.suite&#39;]&quot;</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;##teamcity[testStarted name=&#39;&quot;</span> <span class="o">+</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot;&#39;]&quot;</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;##teamcity[testFailed name=&#39;&quot;</span> <span class="o">+</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot;&#39; message=&#39;&quot;</span> <span class="o">+</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39;]&quot;</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;##teamcity[testIgnored name=&#39;&quot;</span> <span class="o">+</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot;&#39; message=&#39;pending&#39;]&quot;</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;##teamcity[testFinished name=&#39;&quot;</span> <span class="o">+</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">())</span> <span class="o">+</span> <span class="s2">&quot;&#39; duration=&#39;&quot;</span> <span class="o">+</span> <span class="nx">test</span><span class="p">.</span><span class="nx">duration</span> <span class="o">+</span> <span class="s2">&quot;&#39;]&quot;</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;##teamcity[testSuiteFinished name=&#39;mocha.suite&#39; duration=&#39;&quot;</span> <span class="o">+</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">duration</span> <span class="o">+</span> <span class="s2">&quot;&#39;]&quot;</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-188" id="section-188">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Escape the given <code>str</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">str</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&#39;/g</span><span class="p">,</span> <span class="s2">&quot;|&#39;&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">});</span> <span class="c1">// module: reporters/teamcity.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;reporters/xunit.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-189" id="section-189">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Base</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./base&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">utils</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;../utils&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">escape</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">escape</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-190" id="section-190">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Save timer references to avoid Sinon interfering (see GH-237).</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nb">Date</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nb">Date</span>
  <span class="p">,</span> <span class="nx">setTimeout</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">setTimeout</span>
  <span class="p">,</span> <span class="nx">setInterval</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">setInterval</span>
  <span class="p">,</span> <span class="nx">clearTimeout</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">clearTimeout</span>
  <span class="p">,</span> <span class="nx">clearInterval</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-191" id="section-191">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>XUnit</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">XUnit</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-192" id="section-192">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>XUnit</code> reporter.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">runner</span>
      <span class="dox_type">Runner</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">XUnit</span><span class="p">(</span><span class="nx">runner</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Base</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">runner</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">stats</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">stats</span>
    <span class="p">,</span> <span class="nx">tests</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">,</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="nx">tests</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">test</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="s1">&#39;testsuite&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Mocha Tests&#39;</span>
      <span class="p">,</span> <span class="nx">tests</span><span class="o">:</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">tests</span>
      <span class="p">,</span> <span class="nx">failures</span><span class="o">:</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">failures</span>
      <span class="p">,</span> <span class="nx">errors</span><span class="o">:</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">failures</span>
      <span class="p">,</span> <span class="nx">skip</span><span class="o">:</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">tests</span> <span class="o">-</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">failures</span> <span class="o">-</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">passes</span>
      <span class="p">,</span> <span class="nx">timestamp</span><span class="o">:</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">).</span><span class="nx">toUTCString</span><span class="p">()</span>
      <span class="p">,</span> <span class="nx">time</span><span class="o">:</span> <span class="nx">stats</span><span class="p">.</span><span class="nx">duration</span> <span class="o">/</span> <span class="mi">1000</span>
    <span class="p">},</span> <span class="kc">false</span><span class="p">));</span>

    <span class="nx">tests</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">test</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;&lt;/testsuite&gt;&#39;</span><span class="p">);</span>    
  <span class="p">});</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-193" id="section-193">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>Base.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">XUnit</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Base</span><span class="p">;</span>
<span class="nx">XUnit</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">XUnit</span><span class="p">;</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-194" id="section-194">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Output tag for the given <code>test.</code></p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">test</span><span class="p">(</span><span class="nx">test</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">attrs</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">classname</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">()</span>
    <span class="p">,</span> <span class="nx">name</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">title</span>
    <span class="p">,</span> <span class="nx">time</span><span class="o">:</span> <span class="nx">test</span><span class="p">.</span><span class="nx">duration</span> <span class="o">/</span> <span class="mi">1000</span>
  <span class="p">};</span>

  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;failed&#39;</span> <span class="o">==</span> <span class="nx">test</span><span class="p">.</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">err</span> <span class="o">=</span> <span class="nx">test</span><span class="p">.</span><span class="nx">err</span><span class="p">;</span>
    <span class="nx">attrs</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="s1">&#39;testcase&#39;</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">tag</span><span class="p">(</span><span class="s1">&#39;failure&#39;</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">cdata</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">))));</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">pending</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="s1">&#39;testcase&#39;</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">tag</span><span class="p">(</span><span class="s1">&#39;skipped&#39;</span><span class="p">,</span> <span class="p">{},</span> <span class="kc">true</span><span class="p">)));</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">tag</span><span class="p">(</span><span class="s1">&#39;testcase&#39;</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span> <span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-195" id="section-195">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>HTML tag helper.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">tag</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">,</span> <span class="nx">close</span><span class="p">,</span> <span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="nx">close</span> <span class="o">?</span> <span class="s1">&#39;/&gt;&#39;</span> <span class="o">:</span> <span class="s1">&#39;&gt;&#39;</span>
    <span class="p">,</span> <span class="nx">pairs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">,</span> <span class="nx">tag</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">attrs</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">pairs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">key</span> <span class="o">+</span> <span class="s1">&#39;=&quot;&#39;</span> <span class="o">+</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">attrs</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">tag</span> <span class="o">=</span> <span class="s1">&#39;&lt;&#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="p">(</span><span class="nx">pairs</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">pairs</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="nx">end</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">content</span><span class="p">)</span> <span class="nx">tag</span> <span class="o">+=</span> <span class="nx">content</span> <span class="o">+</span> <span class="s1">&#39;&lt;/&#39;</span> <span class="o">+</span> <span class="nx">name</span> <span class="o">+</span> <span class="nx">end</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">tag</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-196" id="section-196">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return cdata escaped CDATA <code>str</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">cdata</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s1">&#39;&lt;![CDATA[&#39;</span> <span class="o">+</span> <span class="nx">escape</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;]]&gt;&#39;</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">});</span> <span class="c1">// module: reporters/xunit.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;runnable.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-197" id="section-197">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">EventEmitter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/events&#39;</span><span class="p">).</span><span class="nx">EventEmitter</span>
  <span class="p">,</span> <span class="nx">debug</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/debug&#39;</span><span class="p">)(</span><span class="s1">&#39;runnable&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-198" id="section-198">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Save timer references to avoid Sinon interfering (see GH-237).</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nb">Date</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nb">Date</span>
  <span class="p">,</span> <span class="nx">setTimeout</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">setTimeout</span>
  <span class="p">,</span> <span class="nx">setInterval</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">setInterval</span>
  <span class="p">,</span> <span class="nx">clearTimeout</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">clearTimeout</span>
  <span class="p">,</span> <span class="nx">clearInterval</span> <span class="o">=</span> <span class="nx">global</span><span class="p">.</span><span class="nx">clearInterval</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-199" id="section-199">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Runnable</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Runnable</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-200" id="section-200">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Runnable</code> with the given <code>title</code> and callback <code>fn</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">title</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Runnable</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">title</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">fn</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="nx">fn</span> <span class="o">&amp;&amp;</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">sync</span> <span class="o">=</span> <span class="o">!</span> <span class="k">this</span><span class="p">.</span><span class="nx">async</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_timeout</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">timedOut</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-201" id="section-201">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>EventEmitter.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runnable</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventEmitter</span><span class="p">;</span>
<span class="nx">Runnable</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Runnable</span><span class="p">;</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-202" id="section-202">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set &amp; get timeout <code>ms</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">ms</span>
      <span class="dox_type">Number</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Runnable</span>
      <span class="dox_type">Number</span>
      <span>ms or self</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runnable</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ms</span><span class="p">){</span>
  <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeout</span><span class="p">;</span>
  <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;timeout %d&#39;</span><span class="p">,</span> <span class="nx">ms</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_timeout</span> <span class="o">=</span> <span class="nx">ms</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timer</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">resetTimeout</span><span class="p">();</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-203" id="section-203">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return the full title generated by recursively
concatenating the parent's full title.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runnable</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fullTitle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-204" id="section-204">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Clear the timeout.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runnable</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clearTimeout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="nx">clearTimeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-205" id="section-205">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Reset the timeout.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runnable</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">resetTimeout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">ms</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">();</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">ms</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">callback</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;timeout of &#39;</span> <span class="o">+</span> <span class="nx">ms</span> <span class="o">+</span> <span class="s1">&#39;ms exceeded&#39;</span><span class="p">));</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">timedOut</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span> <span class="nx">ms</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-206" id="section-206">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run the test and invoke <code>fn(err)</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runnable</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">run</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">ms</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">()</span>
    <span class="p">,</span> <span class="nx">start</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span>
    <span class="p">,</span> <span class="nx">ctx</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ctx</span>
    <span class="p">,</span> <span class="nx">finished</span>
    <span class="p">,</span> <span class="nx">emitted</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="nx">ctx</span><span class="p">.</span><span class="nx">runnable</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-207" id="section-207">&#182;</a>
</div>
<p>timeout</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">async</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ms</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="nx">done</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;timeout of &#39;</span> <span class="o">+</span> <span class="nx">ms</span> <span class="o">+</span> <span class="s1">&#39;ms exceeded&#39;</span><span class="p">));</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">timedOut</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">},</span> <span class="nx">ms</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-208" id="section-208">&#182;</a>
</div>
<p>called multiple times</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">multiple</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">emitted</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="nx">emitted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;done() called multiple times&#39;</span><span class="p">));</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-209" id="section-209">&#182;</a>
</div>
<p>finished</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">function</span> <span class="nx">done</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">timedOut</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">finished</span><span class="p">)</span> <span class="k">return</span> <span class="nx">multiple</span><span class="p">();</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">();</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span> <span class="o">-</span> <span class="nx">start</span><span class="p">;</span>
    <span class="nx">finished</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nx">fn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-210" id="section-210">&#182;</a>
</div>
<p>for .resetTimeout()</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">this</span><span class="p">.</span><span class="nx">callback</span> <span class="o">=</span> <span class="nx">done</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-211" id="section-211">&#182;</a>
</div>
<p>async</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">async</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span> <span class="k">instanceof</span> <span class="nb">Error</span><span class="p">)</span> <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="kc">null</span> <span class="o">!=</span> <span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">done</span><span class="p">(</span><span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;done() invoked with non-Error: &#39;</span> <span class="o">+</span> <span class="nx">err</span><span class="p">));</span>
        <span class="nx">done</span><span class="p">();</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">done</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>
  

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-212" id="section-212">&#182;</a>
</div>
<p>sync</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">try</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">pending</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span> <span class="o">-</span> <span class="nx">start</span><span class="p">;</span>
    <span class="nx">fn</span><span class="p">();</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="p">});</span> <span class="c1">// module: runnable.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;runner.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-213" id="section-213">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">EventEmitter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/events&#39;</span><span class="p">).</span><span class="nx">EventEmitter</span>
  <span class="p">,</span> <span class="nx">debug</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/debug&#39;</span><span class="p">)(</span><span class="s1">&#39;runner&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">Test</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./test&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">utils</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./utils&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">noop</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-214" id="section-214">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Runner</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Runner</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-215" id="section-215">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a <code>Runner</code> for the given <code>suite</code>.</p>
  </div>
  <div class="body"><p>Events:</p>

<ul>
<li><code>start</code>  execution started
<ul><li><code>end</code>  execution complete</li>
<li><code>suite</code>  (suite) test suite execution started</li>
<li><code>suite end</code>  (suite) all tests (and sub-suites) have finished</li>
<li><code>test</code>  (test) test execution started</li>
<li><code>test end</code>  (test) test completed</li>
<li><code>hook</code>  (hook) hook execution started</li>
<li><code>hook end</code>  (hook) hook complete</li>
<li><code>pass</code>  (test) test passed</li>
<li><code>fail</code>  (test, err) test failed</li></ul></li>
</ul>
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Runner</span><span class="p">(</span><span class="nx">suite</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_globals</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">suite</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">total</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">total</span><span class="p">();</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">failures</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span> <span class="nx">self</span><span class="p">.</span><span class="nx">checkGlobals</span><span class="p">(</span><span class="nx">test</span><span class="p">);</span> <span class="p">});</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;hook end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hook</span><span class="p">){</span> <span class="nx">self</span><span class="p">.</span><span class="nx">checkGlobals</span><span class="p">(</span><span class="nx">hook</span><span class="p">);</span> <span class="p">});</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="sr">/.*/</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">globals</span><span class="p">(</span><span class="nx">utils</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">global</span><span class="p">).</span><span class="nx">concat</span><span class="p">([</span><span class="s1">&#39;errno&#39;</span><span class="p">]));</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-216" id="section-216">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>EventEmitter.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventEmitter</span><span class="p">;</span>
<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Runner</span><span class="p">;</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-217" id="section-217">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run tests with full titles matching <code>re</code>. Updates runner.total
with number of tests matched.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">re</span>
      <span class="dox_type">RegExp</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Runner</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">grep</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">re</span><span class="p">){</span>
  <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;grep %s&#39;</span><span class="p">,</span> <span class="nx">re</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_grep</span> <span class="o">=</span> <span class="nx">re</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">total</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">grepTotal</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-218" id="section-218">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Returns the number of tests matching the grep search for the 
given suite.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">suite</span>
      <span class="dox_type">Suite</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Number</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">grepTotal</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nx">suite</span><span class="p">.</span><span class="nx">eachTest</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">_grep</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">()))</span> <span class="nx">total</span><span class="o">++</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="nx">total</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-219" id="section-219">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Allow the given <code>arr</code> of globals.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">arr</span>
      <span class="dox_type">Array</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Runner</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">globals</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arr</span><span class="p">){</span>
  <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_globals</span><span class="p">;</span>
  <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;globals %j&#39;</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
  <span class="nx">utils</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arr</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_globals</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arr</span><span class="p">);</span>
  <span class="p">},</span> <span class="k">this</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-220" id="section-220">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Check for global variable leaks.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">checkGlobals</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">ignoreLeaks</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">leaks</span> <span class="o">=</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">utils</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">global</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">){</span>
    <span class="k">return</span> <span class="o">!~</span><span class="nx">utils</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_globals</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">global</span><span class="p">.</span><span class="nx">navigator</span> <span class="o">||</span> <span class="s1">&#39;onerror&#39;</span> <span class="o">!==</span> <span class="nx">key</span><span class="p">);</span>
  <span class="p">},</span> <span class="k">this</span><span class="p">);</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">_globals</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_globals</span><span class="p">.</span><span class="nx">concat</span><span class="p">(</span><span class="nx">leaks</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="nx">leaks</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;global leaks detected: &#39;</span> <span class="o">+</span> <span class="nx">leaks</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span><span class="p">));</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">leaks</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;global leak detected: &#39;</span> <span class="o">+</span> <span class="nx">leaks</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
  <span class="p">}</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-221" id="section-221">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Fail the given <code>test</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">test</span>
      <span class="dox_type">Test</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">err</span>
      <span class="dox_type">Error</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">){</span>
  <span class="o">++</span><span class="k">this</span><span class="p">.</span><span class="nx">failures</span><span class="p">;</span>
  <span class="nx">test</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="s1">&#39;failed&#39;</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;string&#39;</span> <span class="o">==</span> <span class="k">typeof</span> <span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">err</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;the string &quot;&#39;</span> <span class="o">+</span> <span class="nx">err</span> <span class="o">+</span> <span class="s1">&#39;&quot; was thrown, throw an Error :)&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;fail&#39;</span><span class="p">,</span> <span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-222" id="section-222">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Fail the given <code>hook</code> with <code>err</code>.</p>
  </div>
  <div class="body"><p>Hook failures (currently) hard-end due
to that fact that a failing hook will
surely cause subsequent tests to fail,
causing jumbled reporting.</p>
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">hook</span>
      <span class="dox_type">Hook</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">err</span>
      <span class="dox_type">Error</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">failHook</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">hook</span><span class="p">,</span> <span class="nx">err</span><span class="p">){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">hook</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">);</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-223" id="section-223">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run hook <code>name</code> callbacks and then invoke <code>fn()</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">function</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hook</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">suite</span>
    <span class="p">,</span> <span class="nx">hooks</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">[</span><span class="s1">&#39;_&#39;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">]</span>
    <span class="p">,</span> <span class="nx">ms</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">_timeout</span>
    <span class="p">,</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">timer</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">next</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hook</span> <span class="o">=</span> <span class="nx">hooks</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">hook</span><span class="p">)</span> <span class="k">return</span> <span class="nx">fn</span><span class="p">();</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">currentRunnable</span> <span class="o">=</span> <span class="nx">hook</span><span class="p">;</span>

    <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;hook&#39;</span><span class="p">,</span> <span class="nx">hook</span><span class="p">);</span>

    <span class="nx">hook</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">failHook</span><span class="p">(</span><span class="nx">hook</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">hook</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
      <span class="nx">hook</span><span class="p">.</span><span class="nx">removeAllListeners</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">failHook</span><span class="p">(</span><span class="nx">hook</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;hook end&#39;</span><span class="p">,</span> <span class="nx">hook</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="o">++</span><span class="nx">i</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">process</span><span class="p">.</span><span class="nx">nextTick</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">next</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-224" id="section-224">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run hook <code>name</code> for the given array of <code>suites</code>
in order, and callback <code>fn(err)</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">suites</span>
      <span class="dox_type">Array</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hooks</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">suites</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">orig</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">next</span><span class="p">(</span><span class="nx">suite</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">suite</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">suite</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">suite</span> <span class="o">=</span> <span class="nx">orig</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">fn</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="nx">self</span><span class="p">.</span><span class="nx">hook</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">suite</span> <span class="o">=</span> <span class="nx">orig</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="nx">next</span><span class="p">(</span><span class="nx">suites</span><span class="p">.</span><span class="nx">pop</span><span class="p">());</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">next</span><span class="p">(</span><span class="nx">suites</span><span class="p">.</span><span class="nx">pop</span><span class="p">());</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-225" id="section-225">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run hooks from the top level down.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hookUp</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">suites</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parents</span><span class="p">()).</span><span class="nx">reverse</span><span class="p">();</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">hooks</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">suites</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-226" id="section-226">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run hooks from the bottom up.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">name</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hookDown</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">suites</span> <span class="o">=</span> <span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parents</span><span class="p">());</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">hooks</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">suites</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-227" id="section-227">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return an array of parent Suites from
closest to furthest.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Array</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">parents</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">suite</span>
    <span class="p">,</span> <span class="nx">suites</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">while</span> <span class="p">(</span><span class="nx">suite</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="nx">suites</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">suites</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-228" id="section-228">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run the current test and callback <code>fn(err)</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">runTest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">test</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">test</span>
    <span class="p">,</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">test</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="nx">test</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fn</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-229" id="section-229">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run tests in the given <code>suite</code> and invoke
the callback <code>fn()</code> when complete.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">suite</span>
      <span class="dox_type">Suite</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">runTests</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">tests</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">tests</span>
    <span class="p">,</span> <span class="nx">test</span><span class="p">;</span>

  <span class="kd">function</span> <span class="nx">next</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-230" id="section-230">&#182;</a>
</div>
<p>if we bail after first err</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">failures</span> <span class="o">&amp;&amp;</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">_bail</span><span class="p">)</span> <span class="k">return</span> <span class="nx">fn</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-231" id="section-231">&#182;</a>
</div>
<p>next test</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">test</span> <span class="o">=</span> <span class="nx">tests</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-232" id="section-232">&#182;</a>
</div>
<p>all done</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">test</span><span class="p">)</span> <span class="k">return</span> <span class="nx">fn</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-233" id="section-233">&#182;</a>
</div>
<p>grep</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">self</span><span class="p">.</span><span class="nx">_grep</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">()))</span> <span class="k">return</span> <span class="nx">next</span><span class="p">();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-234" id="section-234">&#182;</a>
</div>
<p>pending</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="k">if</span> <span class="p">(</span><span class="nx">test</span><span class="p">.</span><span class="nx">pending</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">,</span> <span class="nx">test</span><span class="p">);</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="nx">test</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-235" id="section-235">&#182;</a>
</div>
<p>execute test and hook(s)</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
    <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">test</span> <span class="o">=</span> <span class="nx">test</span><span class="p">);</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">hookDown</span><span class="p">(</span><span class="s1">&#39;beforeEach&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">currentRunnable</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">test</span><span class="p">;</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">runTest</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
        <span class="nx">test</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">test</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">test</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="nx">test</span><span class="p">);</span>
          <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">hookUp</span><span class="p">(</span><span class="s1">&#39;afterEach&#39;</span><span class="p">,</span> <span class="nx">next</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">test</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="s1">&#39;passed&#39;</span><span class="p">;</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;pass&#39;</span><span class="p">,</span> <span class="nx">test</span><span class="p">);</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="nx">test</span><span class="p">);</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">hookUp</span><span class="p">(</span><span class="s1">&#39;afterEach&#39;</span><span class="p">,</span> <span class="nx">next</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">next</span> <span class="o">=</span> <span class="nx">next</span><span class="p">;</span>
  <span class="nx">next</span><span class="p">();</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-236" id="section-236">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run the given <code>suite</code> and invoke the
callback <code>fn()</code> when complete.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">suite</span>
      <span class="dox_type">Suite</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">runSuite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">total</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">grepTotal</span><span class="p">(</span><span class="nx">suite</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;run suite %s&#39;</span><span class="p">,</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">());</span>

  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">total</span><span class="p">)</span> <span class="k">return</span> <span class="nx">fn</span><span class="p">();</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;suite&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">suite</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">);</span>

  <span class="kd">function</span> <span class="nx">next</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">curr</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">suites</span><span class="p">[</span><span class="nx">i</span><span class="o">++</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">curr</span><span class="p">)</span> <span class="k">return</span> <span class="nx">done</span><span class="p">();</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">runSuite</span><span class="p">(</span><span class="nx">curr</span><span class="p">,</span> <span class="nx">next</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">done</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">suite</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">;</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">hook</span><span class="p">(</span><span class="s1">&#39;afterAll&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;suite end&#39;</span><span class="p">,</span> <span class="nx">suite</span><span class="p">);</span>
      <span class="nx">fn</span><span class="p">();</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">this</span><span class="p">.</span><span class="nx">hook</span><span class="p">(</span><span class="s1">&#39;beforeAll&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">runTests</span><span class="p">(</span><span class="nx">suite</span><span class="p">,</span> <span class="nx">next</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-237" id="section-237">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Handle uncaught exceptions.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">err</span>
      <span class="dox_type">Error</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">uncaught</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
  <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;uncaught exception&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">runnable</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">currentRunnable</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;failed&#39;</span> <span class="o">==</span> <span class="nx">runnable</span><span class="p">.</span><span class="nx">state</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="nx">runnable</span><span class="p">.</span><span class="nx">clearTimeout</span><span class="p">();</span>
  <span class="nx">err</span><span class="p">.</span><span class="nx">uncaught</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">runnable</span><span class="p">,</span> <span class="nx">err</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-238" id="section-238">&#182;</a>
</div>
<p>recover from test</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;test&#39;</span> <span class="o">==</span> <span class="nx">runnable</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;test end&#39;</span><span class="p">,</span> <span class="nx">runnable</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">hookUp</span><span class="p">(</span><span class="s1">&#39;afterEach&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">next</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-239" id="section-239">&#182;</a>
</div>
<p>bail on hooks</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">);</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-240" id="section-240">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run the root suite and invoke <code>fn(failures)</code>
on completion.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Runner</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Runner</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">run</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span>
    <span class="p">,</span> <span class="nx">fn</span> <span class="o">=</span> <span class="nx">fn</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(){};</span>

  <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-241" id="section-241">&#182;</a>
</div>
<p>callback</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">);</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">removeListener</span><span class="p">(</span><span class="s1">&#39;uncaughtException&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">uncaught</span><span class="p">);</span>
    <span class="nx">fn</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">failures</span><span class="p">);</span>
  <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-242" id="section-242">&#182;</a>
</div>
<p>run suites</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;start&#39;</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">runSuite</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">suite</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;finished running&#39;</span><span class="p">);</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">);</span>
  <span class="p">});</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-243" id="section-243">&#182;</a>
</div>
<p>uncaught exception</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;uncaughtException&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">){</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">uncaught</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">});</span> <span class="c1">// module: runner.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;suite.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-244" id="section-244">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">EventEmitter</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/events&#39;</span><span class="p">).</span><span class="nx">EventEmitter</span>
  <span class="p">,</span> <span class="nx">debug</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/debug&#39;</span><span class="p">)(</span><span class="s1">&#39;suite&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">utils</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./utils&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">Hook</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./hook&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-245" id="section-245">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Suite</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span> <span class="o">=</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Suite</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-246" id="section-246">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Create a new <code>Suite</code> with the given <code>title</code>
and parent <code>Suite</code>. When a suite with the
same title is already present, that suite
is returned to provide nicer reporter
and more flexible meta-testing.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">parent</span>
      <span class="dox_type">Suite</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">title</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Suite</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">title</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Suite</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">ctx</span><span class="p">);</span>
  <span class="nx">suite</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
  <span class="nx">title</span> <span class="o">=</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">();</span>
  <span class="nx">parent</span><span class="p">.</span><span class="nx">addSuite</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">suite</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-247" id="section-247">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Suite</code> with the given
<code>title</code> and <code>ctx</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">title</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">ctx</span>
      <span class="dox_type">Context</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Suite</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">ctx</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">title</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">ctx</span> <span class="o">=</span> <span class="nx">ctx</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">suites</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">tests</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_beforeEach</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_beforeAll</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_afterEach</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_afterAll</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">root</span> <span class="o">=</span> <span class="o">!</span><span class="nx">title</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_timeout</span> <span class="o">=</span> <span class="mi">2000</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_bail</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-248" id="section-248">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>EventEmitter.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">EventEmitter</span><span class="p">;</span>
<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Suite</span><span class="p">;</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-249" id="section-249">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return a clone of this <code>Suite</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Suite</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">clone</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Suite</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">);</span>
  <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;clone&#39;</span><span class="p">);</span>
  <span class="nx">suite</span><span class="p">.</span><span class="nx">ctx</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="p">;</span>
  <span class="nx">suite</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">());</span>
  <span class="nx">suite</span><span class="p">.</span><span class="nx">bail</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">bail</span><span class="p">());</span>
  <span class="k">return</span> <span class="nx">suite</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-250" id="section-250">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Set timeout <code>ms</code> or short-hand such as "2s".</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">ms</span>
      <span class="dox_type">Number</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Suite</span>
      <span class="dox_type">Number</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">timeout</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ms</span><span class="p">){</span>
  <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timeout</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">String</span><span class="p">(</span><span class="nx">ms</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/s$/</span><span class="p">))</span> <span class="nx">ms</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">ms</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">;</span>
  <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;timeout %d&#39;</span><span class="p">,</span> <span class="nx">ms</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_timeout</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">ms</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-251" id="section-251">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Sets whether to bail after first error.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Suite</span>
      <span class="dox_type">Number</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">bail</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">bail</span><span class="p">){</span>
  <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_bail</span><span class="p">;</span>
  <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;bail %s&#39;</span><span class="p">,</span> <span class="nx">bail</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_bail</span> <span class="o">=</span> <span class="nx">bail</span><span class="p">;</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-252" id="section-252">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run <code>fn(test[, done])</code> before running tests.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Suite</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">beforeAll</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">hook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hook</span><span class="p">(</span><span class="s1">&#39;&quot;before all&quot; hook&#39;</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">());</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">ctx</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_beforeAll</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">hook</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;beforeAll&#39;</span><span class="p">,</span> <span class="nx">hook</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-253" id="section-253">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run <code>fn(test[, done])</code> after running tests.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Suite</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">afterAll</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">hook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hook</span><span class="p">(</span><span class="s1">&#39;&quot;after all&quot; hook&#39;</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">());</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">ctx</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_afterAll</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">hook</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;afterAll&#39;</span><span class="p">,</span> <span class="nx">hook</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-254" id="section-254">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run <code>fn(test[, done])</code> before each test case.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Suite</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">beforeEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">hook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hook</span><span class="p">(</span><span class="s1">&#39;&quot;before each&quot; hook&#39;</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">());</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">ctx</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_beforeEach</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">hook</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;beforeEach&#39;</span><span class="p">,</span> <span class="nx">hook</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-255" id="section-255">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run <code>fn(test[, done])</code> after each test case.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Suite</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">afterEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">hook</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hook</span><span class="p">(</span><span class="s1">&#39;&quot;after each&quot; hook&#39;</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">());</span>
  <span class="nx">hook</span><span class="p">.</span><span class="nx">ctx</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">_afterEach</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">hook</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;afterEach&#39;</span><span class="p">,</span> <span class="nx">hook</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-256" id="section-256">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Add a test <code>suite</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">suite</span>
      <span class="dox_type">Suite</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Suite</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addSuite</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
  <span class="nx">suite</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">suite</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">());</span>
  <span class="nx">suite</span><span class="p">.</span><span class="nx">bail</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">bail</span><span class="p">());</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">suites</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;suite&#39;</span><span class="p">,</span> <span class="nx">suite</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-257" id="section-257">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Add a <code>test</code> to this suite.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">test</span>
      <span class="dox_type">Test</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Suite</span>
      <span>for chaining</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">addTest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">test</span><span class="p">){</span>
  <span class="nx">test</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
  <span class="nx">test</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timeout</span><span class="p">());</span>
  <span class="nx">test</span><span class="p">.</span><span class="nx">ctx</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">ctx</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">tests</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">test</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="nx">test</span><span class="p">);</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-258" id="section-258">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return the full title generated by recursively
concatenating the parent's full title.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">fullTitle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">full</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">fullTitle</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">full</span><span class="p">)</span> <span class="k">return</span> <span class="nx">full</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-259" id="section-259">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Return the total number of tests.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Number</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">public
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">total</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="k">return</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">suites</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">sum</span><span class="p">,</span> <span class="nx">suite</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">sum</span> <span class="o">+</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">total</span><span class="p">();</span>
  <span class="p">},</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">tests</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-260" id="section-260">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Iterates through each suite recursively to find
all tests. Applies a function in the format
<code>fn(test)</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Suite</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Suite</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">eachTest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
  <span class="nx">utils</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">tests</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
  <span class="nx">utils</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">suites</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suite</span><span class="p">){</span>
    <span class="nx">suite</span><span class="p">.</span><span class="nx">eachTest</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
<span class="p">};</span>

<span class="p">});</span> <span class="c1">// module: suite.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;test.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-261" id="section-261">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">Runnable</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./runnable&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-262" id="section-262">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose <code>Test</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">Test</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-263" id="section-263">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Initialize a new <code>Test</code> with the given <code>title</code> and callback <code>fn</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">title</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">Test</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Runnable</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">fn</span><span class="p">);</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">pending</span> <span class="o">=</span> <span class="o">!</span><span class="nx">fn</span><span class="p">;</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;test&#39;</span><span class="p">;</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-264" id="section-264">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inherit from <code>Runnable.prototype</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Test</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Runnable</span><span class="p">;</span>
<span class="nx">Test</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Test</span><span class="p">;</span>



</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-265" id="section-265">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Inspect the context void of private properties.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">Test</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">inspect</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
  <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">val</span><span class="p">){</span>
    <span class="k">return</span> <span class="s1">&#39;_&#39;</span> <span class="o">==</span> <span class="nx">key</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
      <span class="o">?</span> <span class="kc">undefined</span>
      <span class="o">:</span> <span class="s1">&#39;parent&#39;</span> <span class="o">==</span> <span class="nx">key</span>
        <span class="o">?</span> <span class="s1">&#39;#&lt;Suite&gt;&#39;</span>
        <span class="o">:</span> <span class="nx">val</span><span class="p">;</span>
  <span class="p">},</span> <span class="mi">2</span><span class="p">);</span>
<span class="p">};</span>
<span class="p">});</span> <span class="c1">// module: test.js</span>

<span class="nx">require</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="s2">&quot;utils.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">module</span><span class="p">,</span> <span class="nx">exports</span><span class="p">,</span> <span class="nx">require</span><span class="p">){</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-266" id="section-266">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Module dependencies.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/fs&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/path&#39;</span><span class="p">)</span>
  <span class="p">,</span> <span class="nx">join</span> <span class="o">=</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span>
  <span class="p">,</span> <span class="nx">debug</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser/debug&#39;</span><span class="p">)(</span><span class="s1">&#39;watch&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-267" id="section-267">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Ignored directories.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">var</span> <span class="nx">ignore</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;node_modules&#39;</span><span class="p">,</span> <span class="s1">&#39;.git&#39;</span><span class="p">];</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-268" id="section-268">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Escape special characters in the given string of html.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span>{String} html</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">escape</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">String</span><span class="p">(</span><span class="nx">html</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;amp;&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&quot;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;quot;&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;lt;&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;gt;&#39;</span><span class="p">);</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-269" id="section-269">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Array#forEach (&lt;=IE8)</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">array</span>
      <span class="dox_type">Array</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">scope</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">forEach</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">scope</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
    <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">);</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-270" id="section-270">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Array#indexOf (&lt;=IE8)</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj</span>
      <span class="dox_type">Object</span>
      <span>to find index of</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">start</span>
      <span class="dox_type">Number</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">indexOf</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="nx">obj</span><span class="p">,</span> <span class="nx">start</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">start</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">===</span> <span class="nx">obj</span><span class="p">)</span>
      <span class="k">return</span> <span class="nx">i</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-271" id="section-271">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Array#reduce (&lt;=IE8)</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">array</span>
      <span class="dox_type">Array</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">initial</span>
      <span class="dox_type">Object</span>
      <span>value</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">scope</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">reduce</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">scope</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">rval</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">rval</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">rval</span><span class="p">,</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">arr</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">rval</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-272" id="section-272">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Array#filter (&lt;=IE8)</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">array</span>
      <span class="dox_type">Array</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">scope</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">filter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="nx">scope</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">l</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">val</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">arr</span><span class="p">))</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-273" id="section-273">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Object.keys (&lt;=IE8)</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">obj</span>
      <span class="dox_type">Object</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Array</span>
      <span>keys</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">keys</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">,</span> <span class="nx">has</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">hasOwnProperty</span> <span class="c1">// for `window` on &lt;=IE8</span>

  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">has</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">key</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">keys</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-274" id="section-274">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Watch the given <code>files</code> for changes
and invoke <code>fn(file)</code> on modification.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">files</span>
      <span class="dox_type">Array</span>
    </div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">fn</span>
      <span class="dox_type">Function</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">watch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">files</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">interval</span><span class="o">:</span> <span class="mi">100</span> <span class="p">};</span>
  <span class="nx">files</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">file</span><span class="p">){</span>
    <span class="nx">debug</span><span class="p">(</span><span class="s1">&#39;file %s&#39;</span><span class="p">,</span> <span class="nx">file</span><span class="p">);</span>
    <span class="nx">fs</span><span class="p">.</span><span class="nx">watchFile</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">options</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">curr</span><span class="p">,</span> <span class="nx">prev</span><span class="p">){</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">prev</span><span class="p">.</span><span class="nx">mtime</span> <span class="o">&lt;</span> <span class="nx">curr</span><span class="p">.</span><span class="nx">mtime</span><span class="p">)</span> <span class="nx">fn</span><span class="p">(</span><span class="nx">file</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-275" id="section-275">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Ignored files.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="kd">function</span> <span class="nx">ignored</span><span class="p">(</span><span class="nx">path</span><span class="p">){</span>
  <span class="k">return</span> <span class="o">!~</span><span class="nx">ignore</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
<span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-276" id="section-276">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Lookup files in the given <code>dir</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">Array</span>
    </div>
    <div class="dox_tag_title">API</div>
    <div class="dox_tag_detail">
      <span class="dox_type">private
</span>
    </span>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">files</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dir</span><span class="p">,</span> <span class="nx">ret</span><span class="p">){</span>
  <span class="nx">ret</span> <span class="o">=</span> <span class="nx">ret</span> <span class="o">||</span> <span class="p">[];</span>

  <span class="nx">fs</span><span class="p">.</span><span class="nx">readdirSync</span><span class="p">(</span><span class="nx">dir</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">ignored</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">path</span><span class="p">){</span>
    <span class="nx">path</span> <span class="o">=</span> <span class="nx">join</span><span class="p">(</span><span class="nx">dir</span><span class="p">,</span> <span class="nx">path</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">fs</span><span class="p">.</span><span class="nx">statSync</span><span class="p">(</span><span class="nx">path</span><span class="p">).</span><span class="nx">isDirectory</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">exports</span><span class="p">.</span><span class="nx">files</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">ret</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/\.(js|coffee)$/</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>

  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-277" id="section-277">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Compute a slug from the given <code>str</code>.</p>
  </div>
  <div class="body">
  </div>
  <div class="details">
    <div class="dox_tag_title">Params</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name">str</span>
      <span class="dox_type">String</span>
    </div>
    <div class="dox_tag_title">Returns</div>
    <div class="dox_tag_detail">
      <span class="dox_tag_name"></span>
      <span class="dox_type">String
</span>
      <span>{String}</span>
    </div>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">exports</span><span class="p">.</span><span class="nx">slug</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">str</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">str</span>
    <span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ +/g</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[^-\w]/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">);</span>
<span class="p">};</span>
<span class="p">});</span> <span class="c1">// module: utils.js</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-278" id="section-278">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Node shims.</p>
  </div>
  <div class="body"><p>These are meant only to allow
mocha.js to run untouched, not
to allow running node code in
the browser.</p>
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">process</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">process</span><span class="p">.</span><span class="nx">exit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">status</span><span class="p">){};</span>
<span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">global</span> <span class="o">=</span> <span class="nb">window</span><span class="p">;</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-279" id="section-279">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>next tick implementation.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">process</span><span class="p">.</span><span class="nx">nextTick</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-280" id="section-280">&#182;</a>
</div>
<p>postMessage behaves badly on IE8</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">ActiveXObject</span> <span class="o">||</span> <span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span> <span class="nx">fn</span><span class="p">()</span> <span class="p">};</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-281" id="section-281">&#182;</a>
</div>
<p>based on setZeroTimeout by David Baron
- <a href='http://dbaron.org/log/20100309-faster-timeouts'>http://dbaron.org/log/20100309-faster-timeouts</a></p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
  <span class="kd">var</span> <span class="nx">timeouts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="p">,</span> <span class="nx">name</span> <span class="o">=</span> <span class="s1">&#39;mocha-zero-timeout&#39;</span>

  <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">source</span> <span class="o">==</span> <span class="nb">window</span> <span class="o">&amp;&amp;</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span> <span class="o">==</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">)</span> <span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">timeouts</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="nx">timeouts</span><span class="p">.</span><span class="nx">shift</span><span class="p">()();</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>

  <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
    <span class="nx">timeouts</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="s1">&#39;*&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">})();</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-282" id="section-282">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Remove uncaughtException listener.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">process</span><span class="p">.</span><span class="nx">removeListener</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;uncaughtException&#39;</span> <span class="o">==</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-283" id="section-283">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Implements uncaughtException listener.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nx">process</span><span class="p">.</span><span class="nx">on</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">fn</span><span class="p">){</span>
  <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;uncaughtException&#39;</span> <span class="o">==</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="nx">fn</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-284" id="section-284">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Expose mocha.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

<span class="nb">window</span><span class="p">.</span><span class="nx">mocha</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;mocha&#39;</span><span class="p">);</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-285" id="section-285">&#182;</a>
</div>
<p>boot</p>
        </td>
        <td class="code highlight"><div class="highlight"><pre>
<span class="p">;(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">suite</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">mocha</span><span class="p">.</span><span class="nx">Suite</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">mocha</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span>
    <span class="p">,</span> <span class="nx">utils</span> <span class="o">=</span> <span class="nx">mocha</span><span class="p">.</span><span class="nx">utils</span>
    <span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-286" id="section-286">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Highlight the given string of <code>js</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

  <span class="kd">function</span> <span class="nx">highlight</span><span class="p">(</span><span class="nx">js</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">js</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;lt;&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;gt;&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\/\/(.*)/gm</span><span class="p">,</span> <span class="s1">&#39;&lt;span class=&quot;comment&quot;&gt;//$1&lt;/span&gt;&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(&#39;.*?&#39;)/gm</span><span class="p">,</span> <span class="s1">&#39;&lt;span class=&quot;string&quot;&gt;$1&lt;/span&gt;&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(\d+\.\d+)/gm</span><span class="p">,</span> <span class="s1">&#39;&lt;span class=&quot;number&quot;&gt;$1&lt;/span&gt;&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(\d+)/gm</span><span class="p">,</span> <span class="s1">&#39;&lt;span class=&quot;number&quot;&gt;$1&lt;/span&gt;&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\bnew *(\w+)/gm</span><span class="p">,</span> <span class="s1">&#39;&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;init&quot;&gt;$1&lt;/span&gt;&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\b(function|new|throw|return|var|if|else)\b/gm</span><span class="p">,</span> <span class="s1">&#39;&lt;span class=&quot;keyword&quot;&gt;$1&lt;/span&gt;&#39;</span><span class="p">)</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-287" id="section-287">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Highlight code contents.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

  <span class="kd">function</span> <span class="nx">highlightCode</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">code</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;code&#39;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">code</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">code</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">highlight</span><span class="p">(</span><span class="nx">code</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">innerHTML</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-288" id="section-288">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Parse the given <code>qs</code>.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

  <span class="kd">function</span> <span class="nx">parse</span><span class="p">(</span><span class="nx">qs</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s1">&#39;?&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">pair</span><span class="p">){</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">pair</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span>
          <span class="p">,</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">pair</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span>
          <span class="p">,</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">pair</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="o">++</span><span class="nx">i</span><span class="p">);</span>

        <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">decodeURIComponent</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
      <span class="p">},</span> <span class="p">{});</span>
  <span class="p">}</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-289" id="section-289">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Setup mocha with the given setting options.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

  <span class="nx">mocha</span><span class="p">.</span><span class="nx">setup</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">opts</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="s1">&#39;string&#39;</span> <span class="o">===</span> <span class="k">typeof</span> <span class="nx">opts</span><span class="p">)</span> <span class="nx">options</span><span class="p">.</span><span class="nx">ui</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">;</span>
    <span class="k">else</span> <span class="nx">options</span> <span class="o">=</span> <span class="nx">opts</span><span class="p">;</span>

    <span class="nx">ui</span> <span class="o">=</span> <span class="nx">mocha</span><span class="p">.</span><span class="nx">interfaces</span><span class="p">[</span><span class="nx">options</span><span class="p">.</span><span class="nx">ui</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">ui</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;invalid mocha interface &quot;&#39;</span> <span class="o">+</span> <span class="nx">ui</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">timeout</span><span class="p">)</span> <span class="nx">suite</span><span class="p">.</span><span class="nx">timeout</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">timeout</span><span class="p">);</span>
    <span class="nx">ui</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
    <span class="nx">suite</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;pre-require&#39;</span><span class="p">,</span> <span class="nb">window</span><span class="p">);</span>
  <span class="p">};</span>


</pre></div>
        </td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-290" id="section-290">&#182;</a>
</div>
<div class="dox">
  <div class="summary"><p>Run mocha, returning the Runner.</p>
  </div>
  <div class="body">
  </div>
</div>
        </td>
        <td class="code highlight"><div class="highlight"><pre>

  <span class="nx">mocha</span><span class="p">.</span><span class="nx">run</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fn</span><span class="p">){</span>
    <span class="nx">suite</span><span class="p">.</span><span class="nx">emit</span><span class="p">(</span><span class="s1">&#39;run&#39;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">runner</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">mocha</span><span class="p">.</span><span class="nx">Runner</span><span class="p">(</span><span class="nx">suite</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">Reporter</span> <span class="o">=</span> <span class="nx">options</span><span class="p">.</span><span class="nx">reporter</span> <span class="o">||</span> <span class="nx">mocha</span><span class="p">.</span><span class="nx">reporters</span><span class="p">.</span><span class="nx">HTML</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">reporter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Reporter</span><span class="p">(</span><span class="nx">runner</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">search</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">query</span><span class="p">.</span><span class="nx">grep</span><span class="p">)</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">grep</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">query</span><span class="p">.</span><span class="nx">grep</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">ignoreLeaks</span><span class="p">)</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">ignoreLeaks</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">globals</span><span class="p">)</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">globals</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">globals</span><span class="p">);</span>
    <span class="nx">runner</span><span class="p">.</span><span class="nx">globals</span><span class="p">([</span><span class="s1">&#39;location&#39;</span><span class="p">]);</span>
    <span class="nx">runner</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="nx">highlightCode</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">runner</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">fn</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">})();</span>
<span class="p">})();</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
