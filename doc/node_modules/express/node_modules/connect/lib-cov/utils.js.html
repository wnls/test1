<!DOCTYPE html>
<html>
<head>
  <title>utils.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../../doc-style.css" />
  <script src="../../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../../", thisFile = "node_modules/express/node_modules/connect/lib-cov/utils.js", defaultSidebar = true;
  </script>
  <script src="../../../../../doc-script.js"></script>
</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">
    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container"><div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
      <tr>
        <td class="docs">
          <h1>utils.js</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
      <tr>
        <td class="docs">
<div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1">&#182;</a>
</div>

        </td>
        <td class="code highlight"><div class="highlight"><pre><span class="cm">/* automatically generated by JSCoverage - do not edit */</span>
<span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">_$jscoverage</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="nx">_$jscoverage</span> <span class="o">=</span> <span class="p">{};</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">])</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">26</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">27</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">39</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">40</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">41</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">54</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">55</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">56</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">57</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">73</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">74</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">95</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">96</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">97</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">98</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">101</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">112</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">113</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">132</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">133</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">147</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">148</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">149</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">166</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">167</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">168</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">169</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">184</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">185</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">186</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">187</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">188</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">189</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">190</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">191</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">192</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">196</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">208</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">209</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">222</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">223</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">224</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">225</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">226</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">228</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">239</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">240</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">241</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">242</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">267</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">276</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">277</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">278</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">279</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">292</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">293</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">305</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">306</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">307</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">308</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">319</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">320</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">321</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">322</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">334</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">335</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">346</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">347</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">350</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">351</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">355</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">358</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">369</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">370</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">371</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">372</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">374</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">386</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">13</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">),</span> <span class="nx">crypto</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;crypto&quot;</span><span class="p">),</span> <span class="nx">parse</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">).</span><span class="nx">parse</span><span class="p">,</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;cookie-signature&quot;</span><span class="p">);</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">26</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">hasBody</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">27</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="s2">&quot;transfer-encoding&quot;</span> <span class="k">in</span> <span class="nx">req</span><span class="p">.</span><span class="nx">headers</span> <span class="o">||</span> <span class="s2">&quot;content-length&quot;</span> <span class="k">in</span> <span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">;</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">39</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">mime</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">40</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s2">&quot;content-type&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">41</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">str</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">54</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">error</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">code</span><span class="p">,</span> <span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">55</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">err</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="nx">msg</span> <span class="o">||</span> <span class="nx">http</span><span class="p">.</span><span class="nx">STATUS_CODES</span><span class="p">[</span><span class="nx">code</span><span class="p">]);</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">56</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">err</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="nx">code</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">57</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">err</span><span class="p">;</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">73</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">md5</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">encoding</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">74</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHash</span><span class="p">(</span><span class="s2">&quot;md5&quot;</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">str</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="nx">encoding</span> <span class="o">||</span> <span class="s2">&quot;hex&quot;</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">95</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">merge</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">96</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">97</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">98</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">a</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
<span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">101</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">a</span><span class="p">;</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">112</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">escape</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">html</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">113</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nb">String</span><span class="p">(</span><span class="nx">html</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;(?!\w+;)/g</span><span class="p">,</span> <span class="s2">&quot;&amp;amp;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;lt;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;gt;&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&quot;/g</span><span class="p">,</span> <span class="s2">&quot;&amp;quot;&quot;</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">132</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">uid</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">len</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">133</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">randomBytes</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">len</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">/</span> <span class="mi">4</span><span class="p">)).</span><span class="nx">toString</span><span class="p">(</span><span class="s2">&quot;base64&quot;</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">len</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">147</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">sign</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">secret</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">148</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s2">&quot;do not use utils.sign(), use https://github.com/visionmedia/node-cookie-signature&quot;</span><span class="p">);</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">149</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">val</span> <span class="o">+</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">&quot;sha256&quot;</span><span class="p">,</span> <span class="nx">secret</span><span class="p">).</span><span class="nx">update</span><span class="p">(</span><span class="nx">val</span><span class="p">).</span><span class="nx">digest</span><span class="p">(</span><span class="s2">&quot;base64&quot;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/=+$/</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">166</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">unsign</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">,</span> <span class="nx">secret</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">167</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">warn</span><span class="p">(</span><span class="s2">&quot;do not use utils.unsign(), use https://github.com/visionmedia/node-cookie-signature&quot;</span><span class="p">);</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">168</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">val</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">val</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">));</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">169</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">secret</span><span class="p">)</span> <span class="o">==</span> <span class="nx">val</span><span class="o">?</span> <span class="nx">str</span><span class="o">:</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">184</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">parseSignedCookies</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">secret</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">185</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">186</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">obj</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="kd">function</span> <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">187</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">188</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">val</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;s:&quot;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">189</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="nx">val</span> <span class="o">=</span> <span class="nx">signature</span><span class="p">.</span><span class="nx">unsign</span><span class="p">(</span><span class="nx">val</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nx">secret</span><span class="p">);</span>
    <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">190</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">191</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">ret</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">val</span><span class="p">;</span>
      <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">192</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
      <span class="k">delete</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}));</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">196</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">ret</span><span class="p">;</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">208</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">parseSignedCookie</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="nx">secret</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">209</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="mi">0</span> <span class="o">==</span> <span class="nx">str</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;s:&quot;</span><span class="p">)</span><span class="o">?</span> <span class="nx">signature</span><span class="p">.</span><span class="nx">unsign</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="nx">secret</span><span class="p">)</span><span class="o">:</span> <span class="nx">str</span><span class="p">;</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">222</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">parseJSONCookies</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">223</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">obj</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="kd">function</span> <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">224</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">val</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">225</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">res</span> <span class="o">=</span> <span class="nx">exports</span><span class="p">.</span><span class="nx">parseJSONCookie</span><span class="p">(</span><span class="nx">val</span><span class="p">);</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">226</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">226</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">res</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}));</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">228</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">239</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">parseJSONCookie</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">240</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">str</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;j:&quot;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">241</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">242</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">str</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">267</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">pause</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;pause&quot;</span><span class="p">);</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">276</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">removeContentHeaders</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">277</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">_headers</span><span class="p">).</span><span class="nx">forEach</span><span class="p">((</span><span class="kd">function</span> <span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">278</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="nx">field</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;content&quot;</span><span class="p">))</span> <span class="p">{</span>
    <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">279</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="nx">res</span><span class="p">.</span><span class="nx">removeHeader</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}));</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">292</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">conditionalGET</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">293</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s2">&quot;if-modified-since&quot;</span><span class="p">]</span> <span class="o">||</span> <span class="nx">req</span><span class="p">.</span><span class="nx">headers</span><span class="p">[</span><span class="s2">&quot;if-none-match&quot;</span><span class="p">];</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">305</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">unauthorized</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">,</span> <span class="nx">realm</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">306</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">401</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">307</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">setHeader</span><span class="p">(</span><span class="s2">&quot;WWW-Authenticate&quot;</span><span class="p">,</span> <span class="s2">&quot;Basic realm=\&quot;&quot;</span> <span class="o">+</span> <span class="nx">realm</span> <span class="o">+</span> <span class="s2">&quot;\&quot;&quot;</span><span class="p">);</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">308</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="s2">&quot;Unauthorized&quot;</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">319</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">notModified</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">320</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">exports</span><span class="p">.</span><span class="nx">removeContentHeaders</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">321</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">statusCode</span> <span class="o">=</span> <span class="mi">304</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">322</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="nx">res</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">334</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">etag</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">stat</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">335</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="s2">&quot;\&quot;&quot;</span> <span class="o">+</span> <span class="nx">stat</span><span class="p">.</span><span class="nx">size</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">stat</span><span class="p">.</span><span class="nx">mtime</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;\&quot;&quot;</span><span class="p">;</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">346</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">parseCacheControl</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">347</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">directives</span> <span class="o">=</span> <span class="nx">str</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">),</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">350</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">directives</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">351</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">parts</span> <span class="o">=</span> <span class="nx">directives</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">),</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">parts</span><span class="p">.</span><span class="nx">shift</span><span class="p">().</span><span class="nx">trim</span><span class="p">(),</span> <span class="nx">val</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">parts</span><span class="p">.</span><span class="nx">shift</span><span class="p">(),</span> <span class="mi">10</span><span class="p">);</span>
    <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">355</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="nx">obj</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span><span class="o">?</span> <span class="kc">true</span><span class="o">:</span> <span class="nx">val</span><span class="p">;</span>
<span class="p">}</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">358</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">return</span> <span class="nx">obj</span><span class="p">;</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">369</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">parseUrl</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">req</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">370</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">parsed</span> <span class="o">=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">_parsedUrl</span><span class="p">;</span>
  <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">371</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">parsed</span> <span class="o">&amp;&amp;</span> <span class="nx">parsed</span><span class="p">.</span><span class="nx">href</span> <span class="o">==</span> <span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">372</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">parsed</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">else</span> <span class="p">{</span>
    <span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">374</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">req</span><span class="p">.</span><span class="nx">_parsedUrl</span> <span class="o">=</span> <span class="nx">parse</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">][</span><span class="mi">386</span><span class="p">]</span><span class="o">++</span><span class="p">;</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">parseBytes</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;bytes&quot;</span><span class="p">);</span>
<span class="nx">_$jscoverage</span><span class="p">[</span><span class="s1">&#39;utils.js&#39;</span><span class="p">].</span><span class="nx">source</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/*!&quot;</span><span class="p">,</span><span class="s2">&quot; * Connect - utils&quot;</span><span class="p">,</span><span class="s2">&quot; * Copyright(c) 2010 Sencha Inc.&quot;</span><span class="p">,</span><span class="s2">&quot; * Copyright(c) 2011 TJ Holowaychuk&quot;</span><span class="p">,</span><span class="s2">&quot; * MIT Licensed&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Module dependencies.&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;var http = require(&#39;http&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;  , crypto = require(&#39;crypto&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;  , parse = require(&#39;url&#39;).parse&quot;</span><span class="p">,</span><span class="s2">&quot;  , signature = require(&#39;cookie-signature&#39;);&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Return `true` if the request has a body, otherwise return `false`.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param  {IncomingMessage} req&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {Boolean}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.hasBody = function(req) {&quot;</span><span class="p">,</span><span class="s2">&quot;  return &#39;transfer-encoding&#39; in req.headers || &#39;content-length&#39; in req.headers;&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Extract the mime type from the given request&#39;s&quot;</span><span class="p">,</span><span class="s2">&quot; * _Content-Type_ header.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param  {IncomingMessage} req&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {String}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.mime = function(req) {&quot;</span><span class="p">,</span><span class="s2">&quot;  var str = req.headers[&#39;content-type&#39;] || &#39;&#39;;&quot;</span><span class="p">,</span><span class="s2">&quot;  return str.split(&#39;;&#39;)[0];&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Generate an `Error` from the given status `code`&quot;</span><span class="p">,</span><span class="s2">&quot; * and optional `msg`.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {Number} code&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} msg&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {Error}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.error = function(code, msg){&quot;</span><span class="p">,</span><span class="s2">&quot;  var err = new Error(msg || http.STATUS_CODES[code]);&quot;</span><span class="p">,</span><span class="s2">&quot;  err.status = code;&quot;</span><span class="p">,</span><span class="s2">&quot;  return err;&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Return md5 hash of the given string and optional encoding,&quot;</span><span class="p">,</span><span class="s2">&quot; * defaulting to hex.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; *     utils.md5(&#39;wahoo&#39;);&quot;</span><span class="p">,</span><span class="s2">&quot; *     // =&amp;gt; \&quot;e493298061761236c96b02ea6aa8a2ad\&quot;&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} str&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} encoding&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {String}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.md5 = function(str, encoding){&quot;</span><span class="p">,</span><span class="s2">&quot;  return crypto&quot;</span><span class="p">,</span><span class="s2">&quot;    .createHash(&#39;md5&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;    .update(str)&quot;</span><span class="p">,</span><span class="s2">&quot;    .digest(encoding || &#39;hex&#39;);&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Merge object b with object a.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; *     var a = { foo: &#39;bar&#39; }&quot;</span><span class="p">,</span><span class="s2">&quot; *       , b = { bar: &#39;baz&#39; };&quot;</span><span class="p">,</span><span class="s2">&quot; *     &quot;</span><span class="p">,</span><span class="s2">&quot; *     utils.merge(a, b);&quot;</span><span class="p">,</span><span class="s2">&quot; *     // =&amp;gt; { foo: &#39;bar&#39;, bar: &#39;baz&#39; }&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {Object} a&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {Object} b&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {Object}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.merge = function(a, b){&quot;</span><span class="p">,</span><span class="s2">&quot;  if (a &amp;amp;&amp;amp; b) {&quot;</span><span class="p">,</span><span class="s2">&quot;    for (var key in b) {&quot;</span><span class="p">,</span><span class="s2">&quot;      a[key] = b[key];&quot;</span><span class="p">,</span><span class="s2">&quot;    }&quot;</span><span class="p">,</span><span class="s2">&quot;  }&quot;</span><span class="p">,</span><span class="s2">&quot;  return a;&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Escape the given string of `html`.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} html&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {String}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.escape = function(html){&quot;</span><span class="p">,</span><span class="s2">&quot;  return String(html)&quot;</span><span class="p">,</span><span class="s2">&quot;    .replace(/&amp;amp;(?!\\w+;)/g, &#39;&amp;amp;amp;&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;    .replace(/&amp;lt;/g, &#39;&amp;amp;lt;&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;    .replace(/&amp;gt;/g, &#39;&amp;amp;gt;&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;    .replace(/\&quot;/g, &#39;&amp;amp;quot;&#39;);&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Return a unique identifier with the given `len`.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; *     utils.uid(10);&quot;</span><span class="p">,</span><span class="s2">&quot; *     // =&amp;gt; \&quot;FDaS435D2z\&quot;&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {Number} len&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {String}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.uid = function(len) {&quot;</span><span class="p">,</span><span class="s2">&quot;  return crypto.randomBytes(Math.ceil(len * 3 / 4))&quot;</span><span class="p">,</span><span class="s2">&quot;    .toString(&#39;base64&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;    .slice(0, len);&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Sign the given `val` with `secret`.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} val&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} secret&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {String}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.sign = function(val, secret){&quot;</span><span class="p">,</span><span class="s2">&quot;  console.warn(&#39;do not use utils.sign(), use https://github.com/visionmedia/node-cookie-signature&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;  return val + &#39;.&#39; + crypto&quot;</span><span class="p">,</span><span class="s2">&quot;    .createHmac(&#39;sha256&#39;, secret)&quot;</span><span class="p">,</span><span class="s2">&quot;    .update(val)&quot;</span><span class="p">,</span><span class="s2">&quot;    .digest(&#39;base64&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;    .replace(/=+$/, &#39;&#39;);&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Unsign and decode the given `val` with `secret`,&quot;</span><span class="p">,</span><span class="s2">&quot; * returning `false` if the signature is invalid.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} val&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} secret&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {String|Boolean}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.unsign = function(val, secret){&quot;</span><span class="p">,</span><span class="s2">&quot;  console.warn(&#39;do not use utils.unsign(), use https://github.com/visionmedia/node-cookie-signature&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;  var str = val.slice(0, val.lastIndexOf(&#39;.&#39;));&quot;</span><span class="p">,</span><span class="s2">&quot;  return exports.sign(str, secret) == val&quot;</span><span class="p">,</span><span class="s2">&quot;    ? str&quot;</span><span class="p">,</span><span class="s2">&quot;    : false;&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Parse signed cookies, returning an object&quot;</span><span class="p">,</span><span class="s2">&quot; * containing the decoded key/value pairs,&quot;</span><span class="p">,</span><span class="s2">&quot; * while removing the signed key from `obj`.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {Object} obj&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {Object}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.parseSignedCookies = function(obj, secret){&quot;</span><span class="p">,</span><span class="s2">&quot;  var ret = {};&quot;</span><span class="p">,</span><span class="s2">&quot;  Object.keys(obj).forEach(function(key){&quot;</span><span class="p">,</span><span class="s2">&quot;    var val = obj[key];&quot;</span><span class="p">,</span><span class="s2">&quot;    if (0 == val.indexOf(&#39;s:&#39;)) {&quot;</span><span class="p">,</span><span class="s2">&quot;      val = signature.unsign(val.slice(2), secret);&quot;</span><span class="p">,</span><span class="s2">&quot;      if (val) {&quot;</span><span class="p">,</span><span class="s2">&quot;        ret[key] = val;&quot;</span><span class="p">,</span><span class="s2">&quot;        delete obj[key];&quot;</span><span class="p">,</span><span class="s2">&quot;      }&quot;</span><span class="p">,</span><span class="s2">&quot;    }&quot;</span><span class="p">,</span><span class="s2">&quot;  });&quot;</span><span class="p">,</span><span class="s2">&quot;  return ret;&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Parse a signed cookie string, return the decoded value&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} str signed cookie string&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} secret&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {String} decoded value&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.parseSignedCookie = function(str, secret){&quot;</span><span class="p">,</span><span class="s2">&quot;  return 0 == str.indexOf(&#39;s:&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;    ? signature.unsign(str.slice(2), secret)&quot;</span><span class="p">,</span><span class="s2">&quot;    : str;&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Parse JSON cookies.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {Object} obj&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {Object}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.parseJSONCookies = function(obj){&quot;</span><span class="p">,</span><span class="s2">&quot;  Object.keys(obj).forEach(function(key){&quot;</span><span class="p">,</span><span class="s2">&quot;    var val = obj[key];&quot;</span><span class="p">,</span><span class="s2">&quot;    var res = exports.parseJSONCookie(val);&quot;</span><span class="p">,</span><span class="s2">&quot;    if (res) obj[key] = res;&quot;</span><span class="p">,</span><span class="s2">&quot;  });&quot;</span><span class="p">,</span><span class="s2">&quot;  return obj;&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Parse JSON cookie string&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} str&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {Object} Parsed object or null if not json cookie&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.parseJSONCookie = function(str) {&quot;</span><span class="p">,</span><span class="s2">&quot;  if (0 == str.indexOf(&#39;j:&#39;)) {&quot;</span><span class="p">,</span><span class="s2">&quot;    try {&quot;</span><span class="p">,</span><span class="s2">&quot;      return JSON.parse(str.slice(2));&quot;</span><span class="p">,</span><span class="s2">&quot;    } catch (err) {&quot;</span><span class="p">,</span><span class="s2">&quot;      // no op&quot;</span><span class="p">,</span><span class="s2">&quot;    }&quot;</span><span class="p">,</span><span class="s2">&quot;  }&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Pause `data` and `end` events on the given `obj`.&quot;</span><span class="p">,</span><span class="s2">&quot; * Middleware performing async tasks _should_ utilize&quot;</span><span class="p">,</span><span class="s2">&quot; * this utility (or similar), to re-emit data once&quot;</span><span class="p">,</span><span class="s2">&quot; * the async operation has completed, otherwise these&quot;</span><span class="p">,</span><span class="s2">&quot; * events may be lost.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; *      var pause = utils.pause(req);&quot;</span><span class="p">,</span><span class="s2">&quot; *      fs.readFile(path, function(){&quot;</span><span class="p">,</span><span class="s2">&quot; *         next();&quot;</span><span class="p">,</span><span class="s2">&quot; *         pause.resume();&quot;</span><span class="p">,</span><span class="s2">&quot; *      });&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {Object} obj&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {Object}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.pause = require(&#39;pause&#39;);&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Strip `Content-*` headers from `res`.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {ServerResponse} res&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.removeContentHeaders = function(res){&quot;</span><span class="p">,</span><span class="s2">&quot;  Object.keys(res._headers).forEach(function(field){&quot;</span><span class="p">,</span><span class="s2">&quot;    if (0 == field.indexOf(&#39;content&#39;)) {&quot;</span><span class="p">,</span><span class="s2">&quot;      res.removeHeader(field);&quot;</span><span class="p">,</span><span class="s2">&quot;    }&quot;</span><span class="p">,</span><span class="s2">&quot;  });&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Check if `req` is a conditional GET request.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {IncomingMessage} req&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {Boolean}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.conditionalGET = function(req) {&quot;</span><span class="p">,</span><span class="s2">&quot;  return req.headers[&#39;if-modified-since&#39;]&quot;</span><span class="p">,</span><span class="s2">&quot;    || req.headers[&#39;if-none-match&#39;];&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Respond with 401 \&quot;Unauthorized\&quot;.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {ServerResponse} res&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} realm&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.unauthorized = function(res, realm) {&quot;</span><span class="p">,</span><span class="s2">&quot;  res.statusCode = 401;&quot;</span><span class="p">,</span><span class="s2">&quot;  res.setHeader(&#39;WWW-Authenticate&#39;, &#39;Basic realm=\&quot;&#39; + realm + &#39;\&quot;&#39;);&quot;</span><span class="p">,</span><span class="s2">&quot;  res.end(&#39;Unauthorized&#39;);&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Respond with 304 \&quot;Not Modified\&quot;.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {ServerResponse} res&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {Object} headers&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.notModified = function(res) {&quot;</span><span class="p">,</span><span class="s2">&quot;  exports.removeContentHeaders(res);&quot;</span><span class="p">,</span><span class="s2">&quot;  res.statusCode = 304;&quot;</span><span class="p">,</span><span class="s2">&quot;  res.end();&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Return an ETag in the form of `\&quot;&amp;lt;size&amp;gt;-&amp;lt;mtime&amp;gt;\&quot;`&quot;</span><span class="p">,</span><span class="s2">&quot; * from the given `stat`.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {Object} stat&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {String}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.etag = function(stat) {&quot;</span><span class="p">,</span><span class="s2">&quot;  return &#39;\&quot;&#39; + stat.size + &#39;-&#39; + Number(stat.mtime) + &#39;\&quot;&#39;;&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Parse the given Cache-Control `str`.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} str&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {Object}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.parseCacheControl = function(str){&quot;</span><span class="p">,</span><span class="s2">&quot;  var directives = str.split(&#39;,&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;    , obj = {};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;  for(var i = 0, len = directives.length; i &amp;lt; len; i++) {&quot;</span><span class="p">,</span><span class="s2">&quot;    var parts = directives[i].split(&#39;=&#39;)&quot;</span><span class="p">,</span><span class="s2">&quot;      , key = parts.shift().trim()&quot;</span><span class="p">,</span><span class="s2">&quot;      , val = parseInt(parts.shift(), 10);&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;    obj[key] = isNaN(val) ? true : val;&quot;</span><span class="p">,</span><span class="s2">&quot;  }&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;  return obj;&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Parse the `req` url with memoization.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {ServerRequest} req&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {Object}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.parseUrl = function(req){&quot;</span><span class="p">,</span><span class="s2">&quot;  var parsed = req._parsedUrl;&quot;</span><span class="p">,</span><span class="s2">&quot;  if (parsed &amp;amp;&amp;amp; parsed.href == req.url) {&quot;</span><span class="p">,</span><span class="s2">&quot;    return parsed;&quot;</span><span class="p">,</span><span class="s2">&quot;  } else {&quot;</span><span class="p">,</span><span class="s2">&quot;    return req._parsedUrl = parse(req.url);&quot;</span><span class="p">,</span><span class="s2">&quot;  }&quot;</span><span class="p">,</span><span class="s2">&quot;};&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;/**&quot;</span><span class="p">,</span><span class="s2">&quot; * Parse byte `size` string.&quot;</span><span class="p">,</span><span class="s2">&quot; *&quot;</span><span class="p">,</span><span class="s2">&quot; * @param {String} size&quot;</span><span class="p">,</span><span class="s2">&quot; * @return {Number}&quot;</span><span class="p">,</span><span class="s2">&quot; * @api private&quot;</span><span class="p">,</span><span class="s2">&quot; */&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="s2">&quot;exports.parseBytes = require(&#39;bytes&#39;);&quot;</span><span class="p">];</span>
</pre></div>
        </td>
      </tr>
  </tbody>
</table>
  </div>
</body>
</html>
